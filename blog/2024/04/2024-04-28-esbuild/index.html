<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.1"/><style data-href="/styles.9e907bc32054b7771552.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style data-styled="" data-styled-version="6.1.15">.dpzVnt{display:flex;flex:1;position:relative;margin:0 auto;align-items:start;width:1024px;max-width:1024px;}/*!sc*/
@media (max-width:1024px){.dpzVnt{margin:0;width:auto;}}/*!sc*/
data-styled.g1[id="PostContent__PostWrapper-sc-9jovib-0"]{content:"dpzVnt,"}/*!sc*/
.eUbyKZ{border-bottom:1px solid #e6e6e6;}/*!sc*/
.eUbyKZ>div{display:flex;flex:1;align-items:center;justify-content:space-between;margin:0 auto;max-width:1024px;padding:0 20px;}/*!sc*/
@media (max-width:1024px){.eUbyKZ>div{margin:0;min-width:auto;}}/*!sc*/
.eUbyKZ h1{font-size:24px;margin:12px 0 8px;}/*!sc*/
data-styled.g2[id="PostContent__PostHeadWrapper-sc-9jovib-1"]{content:"eUbyKZ,"}/*!sc*/
.bDPFHN{width:80%;}/*!sc*/
@media (max-width:1024px){.bDPFHN{width:100%;}}/*!sc*/
data-styled.g3[id="PostContent__PostContentWrapper-sc-9jovib-2"]{content:"bDPFHN,"}/*!sc*/
.dwHlbl{padding:0 20px;margin-bottom:48px;}/*!sc*/
.dwHlbl>h1{margin-bottom:8px;font-size:40px;}/*!sc*/
data-styled.g4[id="PostContent__PostTitle-sc-9jovib-3"]{content:"dwHlbl,"}/*!sc*/
.cbTbsU{display:inline-block;margin:12px 0 0 10px;position:sticky;top:20px;left:100%;transition:all 0.125s esse-in 0s;color:rgba(0,0,0,0.4);padding:0.25rem 0.75rem;border-left:2px solid gray;overflow:hidden auto;max-height:calc(-128px + 100vh);}/*!sc*/
.cbTbsU ul{list-style:none;}/*!sc*/
.cbTbsU ul li{margin-top:5px;}/*!sc*/
.cbTbsU ul li a{display:inline-block;}/*!sc*/
.cbTbsU ul li a.reach{color:#000000;}/*!sc*/
.cbTbsU ul ul{margin-left:12px;}/*!sc*/
@media (max-width:1024px){.cbTbsU{display:none;}}/*!sc*/
data-styled.g5[id="PostContent__TocRenderer-sc-9jovib-4"]{content:"cbTbsU,"}/*!sc*/
.lcuqXx{display:flex;flex-direction:column;word-break:keep-all;margin-bottom:250px;padding:0 20px;width:100%;line-height:1.8;font-size:16px;font-weight:400;}/*!sc*/
@media (max-width:1024px){.lcuqXx{margin-bottom:48px;}}/*!sc*/
.lcuqXx p{padding:3px 0;}/*!sc*/
.lcuqXx h1,.lcuqXx h2,.lcuqXx h3{font-weight:800;}/*!sc*/
.lcuqXx *+h1{margin-top:60px;}/*!sc*/
.lcuqXx *+h2{margin-top:40px;}/*!sc*/
.lcuqXx *+h3{margin-top:30px;}/*!sc*/
.lcuqXx hr+h1,.lcuqXx hr+h2,.lcuqXx hr+h3{margin-top:0;}/*!sc*/
.lcuqXx h1{font-size:30px;}/*!sc*/
.lcuqXx h2{font-size:25px;}/*!sc*/
.lcuqXx h3{font-size:20px;}/*!sc*/
.lcuqXx blockquote{margin:30px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}/*!sc*/
.lcuqXx ol,.lcuqXx ul{margin-left:20px;padding:10px 0;}/*!sc*/
.lcuqXx hr{border:1px solid #000000;margin:100px 0;}/*!sc*/
.lcuqXx a{color:#4263eb;text-decoration:underline;}/*!sc*/
.lcuqXx pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}/*!sc*/
.lcuqXx pre[class*='language-'] ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.5);border-radius:3px;}/*!sc*/
.lcuqXx code[class*='language-'],.lcuqXx pre[class*='language-']{tab-size:2;}/*!sc*/
.lcuqXx img{width:100%;}/*!sc*/
.lcuqXx summary{cursor:pointer;font-size:24px;}/*!sc*/
data-styled.g6[id="PostContent__MarkdownRenderer-sc-9jovib-5"]{content:"lcuqXx,"}/*!sc*/
.eozcVb{margin:40px 0;display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0 20px;}/*!sc*/
.eozcVb h5{font-size:24px;margin-bottom:8px;}/*!sc*/
.eozcVb a{border-radius:6px;font-size:20px;color:#cc007a;font-weight:700;}/*!sc*/
data-styled.g7[id="PostContent__PostNavigator-sc-9jovib-6"]{content:"eozcVb,"}/*!sc*/
.kaFjH{display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.7);color:#161b21;width:40px;height:40px;min-width:40px;font-size:20px;border:none;border-radius:50%;}/*!sc*/
.kaFjH>img{width:35px;height:35px;}/*!sc*/
data-styled.g8[id="PostContent__SocialLink-sc-9jovib-7"]{content:"kaFjH,"}/*!sc*/
.iqMMNl{display:grid;place-items:center;margin-top:auto;margin-left:0;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}/*!sc*/
@media (max-width:1024px){.iqMMNl{margin-left:0;}}/*!sc*/
data-styled.g16[id="Footer__FooterWrapper-sc-rphy7j-0"]{content:"iqMMNl,"}/*!sc*/
html{line-height:1.15;-webkit-text-size-adjust:100%;}/*!sc*/
body{margin:0;}/*!sc*/
main{display:block;}/*!sc*/
h1{font-size:2em;margin:0.67em 0;}/*!sc*/
hr{box-sizing:content-box;height:0;overflow:visible;}/*!sc*/
pre{font-family:monospace,monospace;font-size:1em;}/*!sc*/
a{background-color:transparent;}/*!sc*/
abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}/*!sc*/
b,strong{font-weight:bolder;}/*!sc*/
code,kbd,samp{font-family:monospace,monospace;font-size:1em;}/*!sc*/
small{font-size:80%;}/*!sc*/
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}/*!sc*/
sub{bottom:-0.25em;}/*!sc*/
sup{top:-0.5em;}/*!sc*/
img{border-style:none;}/*!sc*/
button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}/*!sc*/
button,input{overflow:visible;}/*!sc*/
button,select{text-transform:none;}/*!sc*/
button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}/*!sc*/
button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}/*!sc*/
button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}/*!sc*/
fieldset{padding:0.35em 0.75em 0.625em;}/*!sc*/
legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}/*!sc*/
progress{vertical-align:baseline;}/*!sc*/
textarea{overflow:auto;}/*!sc*/
[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}/*!sc*/
[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}/*!sc*/
[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}/*!sc*/
[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}/*!sc*/
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}/*!sc*/
details{display:block;}/*!sc*/
summary{display:list-item;}/*!sc*/
template{display:none;}/*!sc*/
[hidden]{display:none;}/*!sc*/
*{padding:0;margin:0;box-sizing:border-box;}/*!sc*/
html,body,#___gatsby{height:100%;word-break:keep-all;overflow-wrap:break-word;}/*!sc*/
#gatsby-focus-wrapper{height:100%;}/*!sc*/
a,a:hover{color:inherit;text-decoration:none;cursor:pointer;}/*!sc*/
.utterances{max-width:1024px;margin:0 auto;}/*!sc*/
data-styled.g18[id="sc-global-dhQtTb1"]{content:"sc-global-dhQtTb1,"}/*!sc*/
.iJvdpr{display:flex;flex-direction:column;height:100%;}/*!sc*/
data-styled.g19[id="Template__Container-sc-1a9t0ug-0"]{content:"iJvdpr,"}/*!sc*/
</style><style type="text/css">
    .custom-class.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .custom-class.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .custom-class svg,
    h2 .custom-class svg,
    h3 .custom-class svg,
    h4 .custom-class svg,
    h5 .custom-class svg,
    h6 .custom-class svg {
      visibility: hidden;
    }
    h1:hover .custom-class svg,
    h2:hover .custom-class svg,
    h3:hover .custom-class svg,
    h4:hover .custom-class svg,
    h5:hover .custom-class svg,
    h6:hover .custom-class svg,
    h1 .custom-class:focus svg,
    h2 .custom-class:focus svg,
    h3 .custom-class:focus svg,
    h4 .custom-class:focus svg,
    h5 .custom-class:focus svg,
    h6 .custom-class:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seungahhong.github.io/blog/2024/04/2024-04-28-esbuild/" data-baseprotocol="https:" data-basehost="seungahhong.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-TYGQRJE1B8', 'auto', {});
      
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-G8Z1HZWWYL"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-G8Z1HZWWYL', {"send_page_view":false});
      }
      </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Template__Container-sc-1a9t0ug-0 iJvdpr"><header class="PostContent__PostHeadWrapper-sc-9jovib-1 eUbyKZ"><div><a href="/"><h1>홍승아블로그</h1></a><a href="https://github.com/seungahhong" rel="noopener noreferrer" title="notion" target="_blank" size="35" class="PostContent__SocialLink-sc-9jovib-7 kaFjH"><img src="/static/4a6687a74051de2b3536e95d0b6c992a/github.svg" alt="Github Link Image"/></a></div></header><div class="PostContent__PostWrapper-sc-9jovib-0 dpzVnt"><div class="PostContent__PostContentWrapper-sc-9jovib-2 bDPFHN"><div class="PostContent__PostTitle-sc-9jovib-3 dwHlbl"><h1>esbuild</h1><time>2024.04.28</time></div><article class="PostContent__MarkdownRenderer-sc-9jovib-5 lcuqXx"><h1 id="esbuild-특징" style="position:relative;"><a href="#esbuild-%ED%8A%B9%EC%A7%95" aria-label="esbuild 특징 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>esbuild 특징</h1>
<ul>
<li><strong>Go언어를 기반으로 작성되었고 정적(네이티브) 코드 방식으로 컴파일</strong>
프로그래밍 언어로 작성된 코드를 기계가 이해할 수 있는 기계어로 바뀌는 변환 방식은 총 3가지로 표현됩니다.
<ul>
<li>정적 컴파일
<ul>
<li>컴파일 진행 시 전체를 기계어로 변환되기 때문에 전체 실행시간이 짧아진다는 장점이 있음.</li>
<li>단, 컴파일이 오래 걸리고 플랫폼(Mac, Window)에 맞게 다르게 컴파일이 진행해야하는 단점이 있음</li>
</ul>
</li>
<li>인터프리터
<ul>
<li>프로그래밍 언어를 한 문장씩 읽고 기계어로 바꾸는 방식, 조금씩 바꾸고 바로 실행하기 때문에 초기 동작이 빠름(자바스크립트 채용)</li>
<li>단, 전체 실행 시간은 정적 컴파일에 비해 드리며, 같은 코드를 발견하더라도 매번 같은 방식으로 번역해야해서 비효율적</li>
</ul>
</li>
<li>JIT(Just in Time)
<ul>
<li>번역했던 문장을 번역해서 캐시에 저장해놓고, 혹여 동일한 문장을 번역 시 캐시에 저장된 기계어를 사용해서 실행하는 방식</li>
<li>정적 컴파일, 인터프리터 방식을 혼합해서 사용(V8 엔진)
esbuild 방식은 GO 언어 기반으로 작성되었고, 정적 컴파일 코드 방식으로 컴파일을 진행함으로 전체 실행시간을 줄여줄 수 있다.</li>
</ul>
</li>
</ul>
</li>
<li><strong>병럴 처리에 많이 사용</strong>
성능 개선에 한 부분으로는 병렬 처리도 한 몫을 하고 있습니다.
자바스크립트 엔진은 싱글 스레이드 기반으로 동작하기 때문에 하나의 쓰레드에서만 동작하기에 처리속도에 제한이 있습니다.
go 언어로 작성 된 esbuild는 운영 체제에 병렬 처리를 사용하고 있으며, cpu 사용량을 최대한 사용해서 번들링을 수행하고 있어서 성능이 높다고 하네요.</li>
<li><strong>메모리가 효율적으로 사용</strong>
CPU 캐시 사용량을 극대화 해서 AST 데이터 변환을 최대한 지양하고 재사용 진행</li>
</ul>
<p>위에 3가지 특징을 통해서 전체 빌드 성능을 10-100 배 정도 빠르게 컴파일이 가능하다고 하네요^^</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7574ce771d9cd1bda2e894d133615669/52c6a/Untitled.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 14.453125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAu0lEQVR42k3Hy2rCQACF4TyfUFy57KN0ZakvIpJdG5BasvAJ3KjQlhqFxLvRYRLNxUxm/g5SqAc+zjmOEJJl+M1xOSQTIyg+0dnUmmCKH4pSoWrNfYwx1v3/304UrQgXU+rFI2rWoA6a1HMreLDd4jx/olo9Y3Yd9PblT8f+NvnOJTmOMeUXqpIopXFOJ0F8WFMJH5O8Q/pBGXs3pANIPLJNj3Lvgny9uay7XA8uRvbR0iffv5GKgDy/8gvketrA3rMGaQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/7574ce771d9cd1bda2e894d133615669/4fae8/Untitled.webp 256w,
/static/7574ce771d9cd1bda2e894d133615669/2bf0f/Untitled.webp 512w,
/static/7574ce771d9cd1bda2e894d133615669/d71bc/Untitled.webp 1024w,
/static/7574ce771d9cd1bda2e894d133615669/688d3/Untitled.webp 1452w"
              sizes="(max-width: 1024px) 100vw, 1024px"
              type="image/webp"
            />
          <source
            srcset="/static/7574ce771d9cd1bda2e894d133615669/e3135/Untitled.png 256w,
/static/7574ce771d9cd1bda2e894d133615669/06341/Untitled.png 512w,
/static/7574ce771d9cd1bda2e894d133615669/42a19/Untitled.png 1024w,
/static/7574ce771d9cd1bda2e894d133615669/52c6a/Untitled.png 1452w"
            sizes="(max-width: 1024px) 100vw, 1024px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/7574ce771d9cd1bda2e894d133615669/42a19/Untitled.png"
            alt="Untitled"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<h1 id="esbuild-loader-사용-이유" style="position:relative;"><a href="#esbuild-loader-%EC%82%AC%EC%9A%A9-%EC%9D%B4%EC%9C%A0" aria-label="esbuild loader 사용 이유 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>esbuild-loader 사용 이유</h1>
<p>서비스를 빌드 속도 개선을 위해서 어디서 시간이 많이 소요되는지 확인하기 위해서 speed-measure-webpack-plugin을 사용하여서 현재 빌드 시간을 측정해보기로 했습니다.</p>
<p>빌드 시 각 Loader, Plugin, 전체 사용 시간을 측정해서 알려주는 Plugin으로써 아래와 같이 설치해서 사용이 가능합니다.</p>
<ul>
<li>Loader
<ul>
<li>빌드 과정에서 각 파일을 import 혹은 load할 때 모듈의 소스코드를 변형시키는 전처리 과정을 수행</li>
<li>webpack은 기본적으로 JS / JSON 파일만 이해 → 그 외에 웹자원((HTML, CSS, Images, 폰트 등)에 대해서는 변환을 위한 작업</li>
</ul>
</li>
<li>Plugin
<ul>
<li>로더는 파일을 해석하고 변환하는 과정에 관여하는 반면, 플러그인은 해당 결과물의 형태를 바꾸는 역할</li>
<li>기본적인 동작에 추가적인 기능을 제공하는 속성</li>
</ul>
</li>
</ul>
<h2 id="빌드-속도-측정" style="position:relative;"><a href="#%EB%B9%8C%EB%93%9C-%EC%86%8D%EB%8F%84-%EC%B8%A1%EC%A0%95" aria-label="빌드 속도 측정 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>빌드 속도 측정</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 670px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/6bbca/Untitled1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 35.15625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVR42p1Ruw6CQBC8ku+gpbA1ofULbO1sKPw2GktNROTlI0TEEl8J2BPPBILA6J1aaMCom2zmdjczN3tH8CHKsuTozl2Eh/ClVxekblAUBUe1r0JsiGi1W4iO0X1WFn8IPkidXgdEIhAkAYPhgPfyPP9NkK31JOljHXJThtJVQCl9cf+VIBN7EhiyOssyfgE7Xy75x7ck7x+QJAlM24Fh2rCdGTTdwPiWlj3F0lvBtByMNB1BsKkUrnRI6RlpmmK722PlrzGdLzAxLHiej9Nt7TiOuesqh1cSJQ9m73mJSQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/4fae8/Untitled1.webp 256w,
/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/2bf0f/Untitled1.webp 512w,
/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/32193/Untitled1.webp 670w"
              sizes="(max-width: 670px) 100vw, 670px"
              type="image/webp"
            />
          <source
            srcset="/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/e3135/Untitled1.png 256w,
/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/06341/Untitled1.png 512w,
/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/6bbca/Untitled1.png 670w"
            sizes="(max-width: 670px) 100vw, 670px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/48ddc55b0a7ad5bf10e29ca9da8ec18a/6bbca/Untitled1.png"
            alt="Untitled"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">yarn add <span class="token operator">-</span><span class="token constant">D</span> speed<span class="token operator">-</span>measure<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin</code></pre></div>
<h3 id="속도를-측정해보자" style="position:relative;"><a href="#%EC%86%8D%EB%8F%84%EB%A5%BC-%EC%B8%A1%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90" aria-label="속도를 측정해보자 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>속도를 측정해보자.</h3>
<p>측정을 해보니 빌드 시간 느린 순으로 babel-loader, Terser Plugin, OptimizeCssAssetsWebpackPlugin 정도가 오래 걸리는 다는 것을 확인 할 수 있었습니다.</p>
<ul>
<li>성능 측정에 대한 Loader, Plugin 정리
<ul>
<li><strong>babel-loader</strong>
<ul>
<li>es6 이상의 문법을 es5 이하의 코드로 <strong>transpiling</strong> 해주는 것을 babel이라고 하며 이러한 babel과 webpack을 연동시켜주는 것이 babel-loader입니다.</li>
</ul>
</li>
<li><strong>optimize-css-assets-webpack-plugin</strong>
<ul>
<li>HtmlWebpackPlugin 이 html을 압축하는 plugin이라면, optimize-css-assets-webpack-plugin는 css를 압축시키는 plugin입니다.</li>
</ul>
</li>
<li><strong>terser-webpack-plugin</strong>
<ul>
<li>코드를 mangle 하는 과정이나 compress 하는 과정과 같이, 우리가 작성한 코드를 동일한 기능을 제공하는 경량화된 코드로 변환해 주는 일련의 작업을 minify 혹은 minification(코드 경량화) 라고 부르고, 코드 경량화 작업을 해주는 툴을 우리는 minifier라고 합니다. terser-webpack-plugin은는 우리가 작성한 자바스크립트 코드를 프로덕션에서 더욱 경량화된 상태로 제공될 수 있도록 도와주는 plugin 입니다.</li>
</ul>
</li>
<li><strong>css-loader, postcss-loader, sass-loader</strong>
<ul>
<li><strong>postcss-loader</strong>: js 플러그인을 통해 스타일을 변형하는 도구입니다.</li>
<li><strong>sass-loader</strong>: sass-loader는 webpack에 의해 관리 및 유지되는 기능이 아닌 third-party 패키지로, 브라우저는 sass를 인식할 수 없기 때문에 css로 <strong>transpiling</strong> 해줍니다.</li>
<li><strong>css-loader</strong>: css 파일을 js 코드로 변환합니다.</li>
</ul>
</li>
<li><strong>IgnorePlugin</strong>
<ul>
<li>번들링시 무시할 파일들을 정규 표현식 또는 필터 함수로 설정합니다.</li>
</ul>
</li>
<li><strong>file-loader</strong>: 파일을 모듈로 사용할 수 있게 만들어주는 처리를 합니다. 실제로 사용하는 파일을 output directory로 옮깁니다.</li>
<li><strong>url-loader</strong>: 파일을 base64 url로 변환하는 처리를 해줍니다. 파일을 옮기는 작업이 아닌 변환해서 output directory에 저장합니다.</li>
</ul>
</li>
</ul>
<h1 id="webpack과-esbuild-장점을-살린-esbuild-loader-도입" style="position:relative;"><a href="#webpack%EA%B3%BC-esbuild-%EC%9E%A5%EC%A0%90%EC%9D%84-%EC%82%B4%EB%A6%B0-esbuild-loader-%EB%8F%84%EC%9E%85" aria-label="webpack과 esbuild 장점을 살린 esbuild loader 도입 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpack과 esbuild 장점을 살린 esbuild-loader 도입</h1>
<p>위에서 언급한 것처럼 번들러를 esbuild로 도입하면 좋겠지만, 기존에 webpack에서 사용하는 loader, plugin을 esbuild에서 전부 다 지원하지 않고 있고, 또한 이슈가 생겼을 때 많은 래퍼런스 자료를 가지고 있는 webpack을 버리기는 어려운 사정으로 webpack을 유지한 채로 esbuild 속도만 지원받기 위해서 esbuild-loader 도입하게 되었습니다.</p>
<p>webpack + babel/plugin 사용보다는 webpack-[esbuild-loader/minifycss]를 사용할 경우 transpilation과 Minification 단계를 더 빠르게 할 수 있는 대안을 제공하고 있습니다.</p>
<h2 id="installation" style="position:relative;"><a href="#installation" aria-label="installation permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">npm install <span class="token operator">-</span><span class="token constant">D</span> esbuild<span class="token operator">-</span>loader
or
yarn add <span class="token operator">-</span><span class="token constant">D</span> esbuild<span class="token operator">-</span>loader
or
pnpm add <span class="token operator">-</span><span class="token constant">D</span> esbuild<span class="token operator">-</span>loader</code></pre></div>
<h2 id="quick-setup" style="position:relative;"><a href="#quick-setup" aria-label="quick setup permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quick Setup</h2>
<h3 id="esbuild는-확장자에-따라-각-파일을-처리하는-방법을-자동으로-결정" style="position:relative;"><a href="#esbuild%EB%8A%94-%ED%99%95%EC%9E%A5%EC%9E%90%EC%97%90-%EB%94%B0%EB%9D%BC-%EA%B0%81-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%B2%98%EB%A6%AC%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95%EC%9D%84-%EC%9E%90%EB%8F%99%EC%9C%BC%EB%A1%9C-%EA%B2%B0%EC%A0%95" aria-label="esbuild는 확장자에 따라 각 파일을 처리하는 방법을 자동으로 결정 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>esbuild는 확장자에 따라 각 파일을 처리하는 방법을 자동으로 결정</h3>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// webpack.config.js</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
      module<span class="token operator">:</span> <span class="token punctuation">{</span>
          rules<span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token operator">-</span>             <span class="token comment">// Transpile JavaScript</span>
<span class="token operator">-</span>             <span class="token punctuation">{</span>
<span class="token operator">-</span>                 test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token operator">-</span>                 use<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
<span class="token operator">-</span>             <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">-</span>
<span class="token operator">-</span>             <span class="token comment">// Compile TypeScript</span>
<span class="token operator">-</span>             <span class="token punctuation">{</span>
<span class="token operator">-</span>                 test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.tsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token operator">-</span>                 use<span class="token operator">:</span> <span class="token string">'ts-loader'</span>
<span class="token operator">-</span>             <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span>             <span class="token comment">// Use esbuild to compile JavaScript &amp; TypeScript</span>
<span class="token operator">+</span>             <span class="token punctuation">{</span>
<span class="token operator">+</span>                 <span class="token comment">// Match `.js`, `.jsx`, `.ts` or `.tsx` files</span>
<span class="token operator">+</span>                 test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[jt]sx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token operator">+</span>                 loader<span class="token operator">:</span> <span class="token string">'esbuild-loader'</span><span class="token punctuation">,</span>
<span class="token operator">+</span>                 options<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>                     <span class="token comment">// JavaScript version to compile to</span>
<span class="token operator">+</span>                     target<span class="token operator">:</span> <span class="token string">'es2015'</span>
<span class="token operator">+</span>                 <span class="token punctuation">}</span>
<span class="token operator">+</span>             <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span></code></pre></div>
<h3 id="다른-파일-확장자에게-특정-로더를-강제-적용할-경우" style="position:relative;"><a href="#%EB%8B%A4%EB%A5%B8-%ED%8C%8C%EC%9D%BC-%ED%99%95%EC%9E%A5%EC%9E%90%EC%97%90%EA%B2%8C-%ED%8A%B9%EC%A0%95-%EB%A1%9C%EB%8D%94%EB%A5%BC-%EA%B0%95%EC%A0%9C-%EC%A0%81%EC%9A%A9%ED%95%A0-%EA%B2%BD%EC%9A%B0" aria-label="다른 파일 확장자에게 특정 로더를 강제 적용할 경우 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>다른 파일 확장자에게 특정 로더를 강제 적용할 경우</h3>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// webpack.config.js</span>
 <span class="token punctuation">{</span>
     test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
     loader<span class="token operator">:</span> <span class="token string">'esbuild-loader'</span><span class="token punctuation">,</span>
     options<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        <span class="token comment">// Treat `.js` files as `.jsx` files</span>
<span class="token operator">+</span>        loader<span class="token operator">:</span> <span class="token string">'jsx'</span><span class="token punctuation">,</span>

         <span class="token comment">// JavaScript version to transpile to</span>
         target<span class="token operator">:</span> <span class="token string">'es2015'</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span></code></pre></div>
<h3 id="이전-자바스크립트-엔진과-호환을-위한-작업" style="position:relative;"><a href="#%EC%9D%B4%EC%A0%84-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%97%94%EC%A7%84%EA%B3%BC-%ED%98%B8%ED%99%98%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%9E%91%EC%97%85" aria-label="이전 자바스크립트 엔진과 호환을 위한 작업 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>이전 자바스크립트 엔진과 호환을 위한 작업</h3>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
     test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[jt]sx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
     loader<span class="token operator">:</span> <span class="token string">'esbuild-loader'</span><span class="token punctuation">,</span>
     options<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        target<span class="token operator">:</span> <span class="token string">'es2015'</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span></code></pre></div>
<h3 id="타입스크립트-지원" style="position:relative;"><a href="#%ED%83%80%EC%9E%85%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%A7%80%EC%9B%90" aria-label="타입스크립트 지원 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>타입스크립트 지원</h3>
<ul>
<li>esbuild-loader는 타입스크립트 컴파일 지원</li>
<li>root 패스에 tsconfig.json이 있는경우 자동으로 esbuild-loader 로드</li>
<li>단, config파일을 다르게 설정한 경우 아래와 같이 options에 설정
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"> <span class="token comment">// webpack.config.js</span>
 <span class="token punctuation">{</span>
     test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.tsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
     loader<span class="token operator">:</span> <span class="token string">'esbuild-loader'</span><span class="token punctuation">,</span>
     options<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        tsconfig<span class="token operator">:</span> <span class="token string">'./tsconfig.custom.json'</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
</li>
</ul>
<h3 id="esbuildplugin" style="position:relative;"><a href="#esbuildplugin" aria-label="esbuildplugin permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>EsbuildPlugin</strong></h3>
<p><strong>Minification</strong></p>
<ul>
<li>Esbuild는 자바스크립트 축소를 지원하며 Terser or UglifyJs와 같은 코드 압축에 대한 기능 제공</li>
<li>또한, 설정에 따라서 css 축소 기능도 지원하고 있습니다. 단, css-loader 과 같은 css 로딩 기능이 이미 설정되어 있어야합니다.</li>
<li>terser-webpack-plugin, mini-css-extract-plugin/optimize-css-assets-webpack-plugin 대안으로 사용이 가능합니다.</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> EsbuildPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'esbuild-loader'</span><span class="token punctuation">)</span>

  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>

<span class="token operator">+</span>     optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>         minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token operator">+</span>             <span class="token keyword">new</span> <span class="token class-name">EsbuildPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token operator">+</span>                 target<span class="token operator">:</span> <span class="token string">'es2015'</span>  <span class="token comment">// Syntax to transpile to (see options below for possible values)</span>
<span class="token operator">+</span>                 css<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// Apply minification to CSS assets</span>
<span class="token operator">+</span>             <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">+</span>         <span class="token punctuation">]</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre></div>
<p><strong>CSS-in-JS</strong></p>
<ul>
<li>styled-components 나 emotion과 같은 CSS-in-JS 방식을 사용하고 계신다면 아래와 같은 방식으로 CSS를 최적화 제공</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...,</span>

      module<span class="token operator">:</span> <span class="token punctuation">{</span>
          rules<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
                  use<span class="token operator">:</span> <span class="token punctuation">[</span>
                      <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
                      <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
<span class="token operator">+</span>                     <span class="token punctuation">{</span>
<span class="token operator">+</span>                         loader<span class="token operator">:</span> <span class="token string">'esbuild-loader'</span><span class="token punctuation">,</span>
<span class="token operator">+</span>                         options<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>                             minify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token operator">+</span>                         <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span>                     <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span></code></pre></div>
<p><strong>Defining constants</strong></p>
<ul>
<li>webpack DefindPlugin을 esbuild-loader의 define 속성을 대체가 가능,</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token operator">-</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token operator">+</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> EsbuildPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'esbuild-loader'</span><span class="token punctuation">)</span>

  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...,</span>

      plugins<span class="token operator">:</span><span class="token punctuation">[</span>
<span class="token operator">-</span>         <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token operator">-</span>             <span class="token string">'process.env.NODE_ENV'</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">-</span>         <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">+</span>         <span class="token keyword">new</span> <span class="token class-name">EsbuildPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token operator">+</span>             define<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>                 <span class="token string">'process.env.NODE_ENV'</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">+</span>             <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span>         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
  <span class="token punctuation">}</span></code></pre></div>
<h2 id="cra--react-app-rewired" style="position:relative;"><a href="#cra--react-app-rewired" aria-label="cra  react app rewired permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CRA + react-app-rewired</h2>
<p><strong>esbuild-loader 적용</strong></p>
<ul>
<li>CRA 내부적으로 사용중인 babel-loader rules 삭제</li>
<li>esbuild-loader 적용
<ul>
<li>내장된 babebel-older, babel-runtime plugin 삭제</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// config-override.js</span>
<span class="token punctuation">{</span>
  <span class="token comment">// Match `.js`, `.jsx`, `.ts` or `.tsx` files</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[jt]sx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  loader<span class="token operator">:</span> <span class="token string">'esbuild-loader'</span><span class="token punctuation">,</span>
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    target<span class="token operator">:</span> <span class="token string">'es2015'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token keyword">const</span> <span class="token function-variable function">removeBabelImportsFromExternalPaths</span> <span class="token operator">=</span> <span class="token punctuation">(</span>webpackConfig<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> oneOfRule <span class="token operator">=</span> webpackConfig<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span> <span class="token operator">=></span> rule<span class="token punctuation">.</span>oneOf<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>oneOfRule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    oneOfRule<span class="token punctuation">.</span>oneOf <span class="token operator">=</span> oneOfRule<span class="token punctuation">.</span>oneOf<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">!</span>rule<span class="token punctuation">.</span>test <span class="token operator">||</span> <span class="token operator">!</span>rule<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">removeBabelImportsFromExternalPaths</span><span class="token punctuation">(</span>modifiedConfig<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="esbuildplugin-적용" style="position:relative;"><a href="#esbuildplugin-%EC%A0%81%EC%9A%A9" aria-label="esbuildplugin 적용 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>EsbuildPlugin 적용</strong></h3>
<ul>
<li>CRA 내부적으로 사용중인 terser-webpack-plugin, optimize-css-assets-webpack-plugin 삭제</li>
<li>EsbuildPlugin 적용</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// config-override.js</span>

modifiedConfig<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span>minimizer <span class="token operator">=</span> webpackConfig<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span>minimizer<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string">'TerserPlugin'</span><span class="token punctuation">,</span> <span class="token string">'OptimizeCssAssetsWebpackPlugin'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>plugin<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token punctuation">{</span>
	optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
      minimize<span class="token operator">:</span> isEnvProduction<span class="token punctuation">,</span>
      minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">EsbuildPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'es2015'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          css<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<h1 id="참고페이지" style="position:relative;"><a href="#%EC%B0%B8%EA%B3%A0%ED%8E%98%EC%9D%B4%EC%A7%80" aria-label="참고페이지 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>참고페이지</h1>
<ul>
<li>
<p><a href="https://github.com/privatenumber/esbuild-loader" target="_blank" rel="nofollow">https://github.com/privatenumber/esbuild-loader</a></p>
</li>
<li>
<p><a href="https://gusrb3164.github.io/web/2022/04/16/esbuild/" target="_blank" rel="nofollow">esbuild는 왜 빠른가?(번역)</a></p>
</li>
</ul></article><section class="PostContent__PostNavigator-sc-9jovib-6 eozcVb"><a href="/blog/2024/05/2024-05-12-development-improvements/"><h5>이전글</h5><i>← </i>개발 생산성 &amp; 빌드 성능 개선</a><a href="/blog/2024/03/2024-03-18-pnpm/"><h5>다음글</h5>PNPM<i> →</i></a></section><div></div></div><aside class="PostContent__TocRenderer-sc-9jovib-4 cbTbsU"><ul>
<li>
<p><a href="#esbuild-%ED%8A%B9%EC%A7%95">esbuild 특징</a></p>
</li>
<li>
<p><a href="#esbuild-loader-%EC%82%AC%EC%9A%A9-%EC%9D%B4%EC%9C%A0">esbuild-loader 사용 이유</a></p>
<ul>
<li><a href="#%EB%B9%8C%EB%93%9C-%EC%86%8D%EB%8F%84-%EC%B8%A1%EC%A0%95">빌드 속도 측정</a></li>
</ul>
</li>
<li>
<p><a href="#webpack%EA%B3%BC-esbuild-%EC%9E%A5%EC%A0%90%EC%9D%84-%EC%82%B4%EB%A6%B0-esbuild-loader-%EB%8F%84%EC%9E%85">webpack과 esbuild 장점을 살린 esbuild-loader 도입</a></p>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#quick-setup">Quick Setup</a></li>
<li><a href="#cra--react-app-rewired">CRA + react-app-rewired</a></li>
</ul>
</li>
<li>
<p><a href="#%EC%B0%B8%EA%B3%A0%ED%8E%98%EC%9D%B4%EC%A7%80">참고페이지</a></p>
</li>
</ul></aside></div><div class="Footer__FooterWrapper-sc-rphy7j-0 iqMMNl">Thank You for Visiting My Blog,<br/>© 2021 Developer SeungAh, Powered By Gatsby.</div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2024/04/2024-04-28-esbuild/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-3f569fefb0788f5a0023.js\"],\"component---src-components-templates-post-template-tsx\":[\"/component---src-components-templates-post-template-tsx-d9d3da42943c44af159e.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-4d52495227296e18c78a.js\"],\"component---src-pages-about-tsx\":[\"/component---src-pages-about-tsx-ed4d3b150f6b0138dbea.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-95992269d7f74c02239a.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="c3210c92db98a47d2773";</script><script src="/webpack-runtime-7612a97d8f43392f6335.js" async></script><script src="/framework-a96385c61229616bc6a1.js" async></script><script src="/app-3f569fefb0788f5a0023.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>