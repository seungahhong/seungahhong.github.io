<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.1"/><style data-href="/styles.9e907bc32054b7771552.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style data-styled="" data-styled-version="6.1.15">.dpzVnt{display:flex;flex:1;position:relative;margin:0 auto;align-items:start;width:1024px;max-width:1024px;}/*!sc*/
@media (max-width:1024px){.dpzVnt{margin:0;width:auto;}}/*!sc*/
data-styled.g1[id="PostContent__PostWrapper-sc-9jovib-0"]{content:"dpzVnt,"}/*!sc*/
.eUbyKZ{border-bottom:1px solid #e6e6e6;}/*!sc*/
.eUbyKZ>div{display:flex;flex:1;align-items:center;justify-content:space-between;margin:0 auto;max-width:1024px;padding:0 20px;}/*!sc*/
@media (max-width:1024px){.eUbyKZ>div{margin:0;min-width:auto;}}/*!sc*/
.eUbyKZ h1{font-size:24px;margin:12px 0 8px;}/*!sc*/
data-styled.g2[id="PostContent__PostHeadWrapper-sc-9jovib-1"]{content:"eUbyKZ,"}/*!sc*/
.bDPFHN{width:80%;}/*!sc*/
@media (max-width:1024px){.bDPFHN{width:100%;}}/*!sc*/
data-styled.g3[id="PostContent__PostContentWrapper-sc-9jovib-2"]{content:"bDPFHN,"}/*!sc*/
.dwHlbl{padding:0 20px;margin-bottom:48px;}/*!sc*/
.dwHlbl>h1{margin-bottom:8px;font-size:40px;}/*!sc*/
data-styled.g4[id="PostContent__PostTitle-sc-9jovib-3"]{content:"dwHlbl,"}/*!sc*/
.cbTbsU{display:inline-block;margin:12px 0 0 10px;position:sticky;top:20px;left:100%;transition:all 0.125s esse-in 0s;color:rgba(0,0,0,0.4);padding:0.25rem 0.75rem;border-left:2px solid gray;overflow:hidden auto;max-height:calc(-128px + 100vh);}/*!sc*/
.cbTbsU ul{list-style:none;}/*!sc*/
.cbTbsU ul li{margin-top:5px;}/*!sc*/
.cbTbsU ul li a{display:inline-block;}/*!sc*/
.cbTbsU ul li a.reach{color:#000000;}/*!sc*/
.cbTbsU ul ul{margin-left:12px;}/*!sc*/
@media (max-width:1024px){.cbTbsU{display:none;}}/*!sc*/
data-styled.g5[id="PostContent__TocRenderer-sc-9jovib-4"]{content:"cbTbsU,"}/*!sc*/
.lcuqXx{display:flex;flex-direction:column;word-break:keep-all;margin-bottom:250px;padding:0 20px;width:100%;line-height:1.8;font-size:16px;font-weight:400;}/*!sc*/
@media (max-width:1024px){.lcuqXx{margin-bottom:48px;}}/*!sc*/
.lcuqXx p{padding:3px 0;}/*!sc*/
.lcuqXx h1,.lcuqXx h2,.lcuqXx h3{font-weight:800;}/*!sc*/
.lcuqXx *+h1{margin-top:60px;}/*!sc*/
.lcuqXx *+h2{margin-top:40px;}/*!sc*/
.lcuqXx *+h3{margin-top:30px;}/*!sc*/
.lcuqXx hr+h1,.lcuqXx hr+h2,.lcuqXx hr+h3{margin-top:0;}/*!sc*/
.lcuqXx h1{font-size:30px;}/*!sc*/
.lcuqXx h2{font-size:25px;}/*!sc*/
.lcuqXx h3{font-size:20px;}/*!sc*/
.lcuqXx blockquote{margin:30px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}/*!sc*/
.lcuqXx ol,.lcuqXx ul{margin-left:20px;padding:10px 0;}/*!sc*/
.lcuqXx hr{border:1px solid #000000;margin:100px 0;}/*!sc*/
.lcuqXx a{color:#4263eb;text-decoration:underline;}/*!sc*/
.lcuqXx pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}/*!sc*/
.lcuqXx pre[class*='language-'] ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.5);border-radius:3px;}/*!sc*/
.lcuqXx code[class*='language-'],.lcuqXx pre[class*='language-']{tab-size:2;}/*!sc*/
.lcuqXx img{width:100%;}/*!sc*/
.lcuqXx summary{cursor:pointer;font-size:24px;}/*!sc*/
data-styled.g6[id="PostContent__MarkdownRenderer-sc-9jovib-5"]{content:"lcuqXx,"}/*!sc*/
.eozcVb{margin:40px 0;display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0 20px;}/*!sc*/
.eozcVb h5{font-size:24px;margin-bottom:8px;}/*!sc*/
.eozcVb a{border-radius:6px;font-size:20px;color:#cc007a;font-weight:700;}/*!sc*/
data-styled.g7[id="PostContent__PostNavigator-sc-9jovib-6"]{content:"eozcVb,"}/*!sc*/
.kaFjH{display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.7);color:#161b21;width:40px;height:40px;min-width:40px;font-size:20px;border:none;border-radius:50%;}/*!sc*/
.kaFjH>img{width:35px;height:35px;}/*!sc*/
data-styled.g8[id="PostContent__SocialLink-sc-9jovib-7"]{content:"kaFjH,"}/*!sc*/
.iqMMNl{display:grid;place-items:center;margin-top:auto;margin-left:0;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}/*!sc*/
@media (max-width:1024px){.iqMMNl{margin-left:0;}}/*!sc*/
data-styled.g16[id="Footer__FooterWrapper-sc-rphy7j-0"]{content:"iqMMNl,"}/*!sc*/
html{line-height:1.15;-webkit-text-size-adjust:100%;}/*!sc*/
body{margin:0;}/*!sc*/
main{display:block;}/*!sc*/
h1{font-size:2em;margin:0.67em 0;}/*!sc*/
hr{box-sizing:content-box;height:0;overflow:visible;}/*!sc*/
pre{font-family:monospace,monospace;font-size:1em;}/*!sc*/
a{background-color:transparent;}/*!sc*/
abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}/*!sc*/
b,strong{font-weight:bolder;}/*!sc*/
code,kbd,samp{font-family:monospace,monospace;font-size:1em;}/*!sc*/
small{font-size:80%;}/*!sc*/
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}/*!sc*/
sub{bottom:-0.25em;}/*!sc*/
sup{top:-0.5em;}/*!sc*/
img{border-style:none;}/*!sc*/
button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}/*!sc*/
button,input{overflow:visible;}/*!sc*/
button,select{text-transform:none;}/*!sc*/
button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}/*!sc*/
button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}/*!sc*/
button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}/*!sc*/
fieldset{padding:0.35em 0.75em 0.625em;}/*!sc*/
legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}/*!sc*/
progress{vertical-align:baseline;}/*!sc*/
textarea{overflow:auto;}/*!sc*/
[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}/*!sc*/
[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}/*!sc*/
[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}/*!sc*/
[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}/*!sc*/
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}/*!sc*/
details{display:block;}/*!sc*/
summary{display:list-item;}/*!sc*/
template{display:none;}/*!sc*/
[hidden]{display:none;}/*!sc*/
*{padding:0;margin:0;box-sizing:border-box;}/*!sc*/
html,body,#___gatsby{height:100%;word-break:keep-all;overflow-wrap:break-word;}/*!sc*/
#gatsby-focus-wrapper{height:100%;}/*!sc*/
a,a:hover{color:inherit;text-decoration:none;cursor:pointer;}/*!sc*/
.utterances{max-width:1024px;margin:0 auto;}/*!sc*/
data-styled.g18[id="sc-global-dhQtTb1"]{content:"sc-global-dhQtTb1,"}/*!sc*/
.iJvdpr{display:flex;flex-direction:column;height:100%;}/*!sc*/
data-styled.g19[id="Template__Container-sc-1a9t0ug-0"]{content:"iJvdpr,"}/*!sc*/
</style><style type="text/css">
    .custom-class.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .custom-class.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .custom-class svg,
    h2 .custom-class svg,
    h3 .custom-class svg,
    h4 .custom-class svg,
    h5 .custom-class svg,
    h6 .custom-class svg {
      visibility: hidden;
    }
    h1:hover .custom-class svg,
    h2:hover .custom-class svg,
    h3:hover .custom-class svg,
    h4:hover .custom-class svg,
    h5:hover .custom-class svg,
    h6:hover .custom-class svg,
    h1 .custom-class:focus svg,
    h2 .custom-class:focus svg,
    h3 .custom-class:focus svg,
    h4 .custom-class:focus svg,
    h5 .custom-class:focus svg,
    h6 .custom-class:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seungahhong.github.io/blog/2022/07/2022-07-25-msw/" data-baseprotocol="https:" data-basehost="seungahhong.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-TYGQRJE1B8', 'auto', {});
      
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-G8Z1HZWWYL"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-G8Z1HZWWYL', {"send_page_view":false});
      }
      </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Template__Container-sc-1a9t0ug-0 iJvdpr"><header class="PostContent__PostHeadWrapper-sc-9jovib-1 eUbyKZ"><div><a href="/"><h1>홍승아블로그</h1></a><a href="https://github.com/seungahhong" rel="noopener noreferrer" title="notion" target="_blank" size="35" class="PostContent__SocialLink-sc-9jovib-7 kaFjH"><img src="/static/4a6687a74051de2b3536e95d0b6c992a/github.svg" alt="Github Link Image"/></a></div></header><div class="PostContent__PostWrapper-sc-9jovib-0 dpzVnt"><div class="PostContent__PostContentWrapper-sc-9jovib-2 bDPFHN"><div class="PostContent__PostTitle-sc-9jovib-3 dwHlbl"><h1>msw</h1><time>2022.07.25</time></div><article class="PostContent__MarkdownRenderer-sc-9jovib-5 lcuqXx"><h1 id="mocking-라이브러리를-도입해야하는-이유" style="position:relative;"><a href="#mocking-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%8F%84%EC%9E%85%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0" aria-label="mocking 라이브러리를 도입해야하는 이유 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mocking 라이브러리를 도입해야하는 이유</h1>
<h2 id="frontend-현재-이슈" style="position:relative;"><a href="#frontend-%ED%98%84%EC%9E%AC-%EC%9D%B4%EC%8A%88" aria-label="frontend 현재 이슈 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Frontend 현재 이슈</h2>
<ul>
<li>신규 개발 진행 시
<ul>
<li>백엔드 API 작업과 동시에 FE 개발을 진행할 경우</li>
<li>FE 개발사항
<ul>
<li>백엔드 개발자와 API 인터페이스 상의 후 스펙정의</li>
<li>mocking 데이터가 만들어지기 전까지는 샘플 데이터를 만들어서 화면 컴포넌트를 개발 진행
<ul>
<li>기획/디자인 시안에 맞게 테스트를 위해서는 조건에 맞는 샘플 데이터를 생성</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>기존 기능을 변경 시
<ul>
<li>FE 개발사항
<ul>
<li>백엔드 개발자분이 실 API를 만들어 주기 전까지는 API 연동불가</li>
<li>디자인 시안, 기획문서에 나온 화면만으로 분석이 어려움(상태값/데이터에 따른 화면이 달라짐)
<ul>
<li>기획/디자인 시안에 맞게 테스트를 위해서는 조건에 맞는 샘플 데이터를 생성</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>결론
<ul>
<li>신규/기존 기능을 개발하던지, 백엔드 mock/실 api 나오기 전까지는 구현된 코드에 샘플데이터를 만들어서 테스트 진행
<ul>
<li>실수로 샘플데이터/연동 코드를 지우지 않는 경우 코드 에러, 서비스 품질 안좋아짐.</li>
<li>개발 막바지에 mock/실 API 연동 시 여러 상황에 대한 테스트가 전반적으로 이뤄지지 못해서 프론트엔드 업무가 과중됨</li>
</ul>
</li>
<li>실질적인 개발일정 수립 및 코드 품질이 좋지 않음.</li>
</ul>
</li>
</ul>
<h2 id="이런-일은-왜-일어날까" style="position:relative;"><a href="#%EC%9D%B4%EB%9F%B0-%EC%9D%BC%EC%9D%80-%EC%99%9C-%EC%9D%BC%EC%96%B4%EB%82%A0%EA%B9%8C" aria-label="이런 일은 왜 일어날까 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>이런 일은 왜 일어날까?</h2>
<h3 id="백엔드-api-작업과-동시에-fe-개발을-진행할-경우" style="position:relative;"><a href="#%EB%B0%B1%EC%97%94%EB%93%9C-api-%EC%9E%91%EC%97%85%EA%B3%BC-%EB%8F%99%EC%8B%9C%EC%97%90-fe-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%A7%84%ED%96%89%ED%95%A0-%EA%B2%BD%EC%9A%B0" aria-label="백엔드 api 작업과 동시에 fe 개발을 진행할 경우 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>백엔드 API 작업과 동시에 FE 개발을 진행할 경우</h3>
<ul>
<li>대부분의 개발 진행 시 기획,디자인/BE/FE 개발이 동시에 진행되다보니, 프로젝트 완성 단계의 엔드포인트 담당하는 프론트엔드는 API연동/샘플데이터 생성/테스트 등을 작업함으로써 시간적인 압박, 진행에 어려움 발생</li>
</ul>
<h3 id="기존에-개발된-화면-수정을-위해서-기능-파악-해야할-경우" style="position:relative;"><a href="#%EA%B8%B0%EC%A1%B4%EC%97%90-%EA%B0%9C%EB%B0%9C%EB%90%9C-%ED%99%94%EB%A9%B4-%EC%88%98%EC%A0%95%EC%9D%84-%EC%9C%84%ED%95%B4%EC%84%9C-%EA%B8%B0%EB%8A%A5-%ED%8C%8C%EC%95%85-%ED%95%B4%EC%95%BC%ED%95%A0-%EA%B2%BD%EC%9A%B0" aria-label="기존에 개발된 화면 수정을 위해서 기능 파악 해야할 경우 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>기존에 개발된 화면 수정을 위해서 기능 파악 해야할 경우</h3>
<ul>
<li>기획/디자인/개발 관련 정의서 미흡하거나 담당자가 부재일 경우
<ul>
<li>기능 파악을 위해서 샘플데이터 생성, 백엔드에 API 문의 등 개발하는데 걸림돌이 많음</li>
</ul>
</li>
</ul>
<h2 id="fe에서-해결하고자-하는-점은-무엇일까" style="position:relative;"><a href="#fe%EC%97%90%EC%84%9C-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B3%A0%EC%9E%90-%ED%95%98%EB%8A%94-%EC%A0%90%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C" aria-label="fe에서 해결하고자 하는 점은 무엇일까 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FE에서 해결하고자 하는 점은 무엇일까?</h2>
<h3 id="백엔드-api-작업과-동시에-fe-개발을-진행할-경우-1" style="position:relative;"><a href="#%EB%B0%B1%EC%97%94%EB%93%9C-api-%EC%9E%91%EC%97%85%EA%B3%BC-%EB%8F%99%EC%8B%9C%EC%97%90-fe-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%A7%84%ED%96%89%ED%95%A0-%EA%B2%BD%EC%9A%B0-1" aria-label="백엔드 api 작업과 동시에 fe 개발을 진행할 경우 1 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>백엔드 API 작업과 동시에 FE 개발을 진행할 경우</h3>
<ul>
<li>실 구현 코드에 샘플데이터를 추가/수정하지 않고, API 인터페이스에 맞춰서 병행해서 개발이 가능하면 좋겠다.
<ul>
<li>특히 실 API 연동 시 최대한 문제 없이 연동이 가능하면 좋겠다.</li>
</ul>
</li>
<li>API 개발이 완료되기 전에 프론트엔드 실 개발을 마무리 하면 좋을 것 같다.</li>
</ul>
<h3 id="기존에-개발된-화면-수정을-위해서-기능-파악-해야할-경우백엔드-api-종속적인-화면을-개발테스트-해야할-경우" style="position:relative;"><a href="#%EA%B8%B0%EC%A1%B4%EC%97%90-%EA%B0%9C%EB%B0%9C%EB%90%9C-%ED%99%94%EB%A9%B4-%EC%88%98%EC%A0%95%EC%9D%84-%EC%9C%84%ED%95%B4%EC%84%9C-%EA%B8%B0%EB%8A%A5-%ED%8C%8C%EC%95%85-%ED%95%B4%EC%95%BC%ED%95%A0-%EA%B2%BD%EC%9A%B0%EB%B0%B1%EC%97%94%EB%93%9C-api-%EC%A2%85%EC%86%8D%EC%A0%81%EC%9D%B8-%ED%99%94%EB%A9%B4%EC%9D%84-%EA%B0%9C%EB%B0%9C%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%95%B4%EC%95%BC%ED%95%A0-%EA%B2%BD%EC%9A%B0" aria-label="기존에 개발된 화면 수정을 위해서 기능 파악 해야할 경우백엔드 api 종속적인 화면을 개발테스트 해야할 경우 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>기존에 개발된 화면 수정을 위해서 기능 파악 해야할 경우(백엔드 API 종속적인 화면을 개발/테스트 해야할 경우)</h3>
<ul>
<li>기존 구현된 코드를 변경/추가 없이 화면 단 테스트가 가능하면 좋겠다.</li>
<li>API 테스트를 위해서 백엔드에 요청하는 pending 시간을 줄이기 위한 Mocking Server를 구축하면 좋겠다.</li>
</ul>
<h1 id="frontend에-mock-server를-구축해보자" style="position:relative;"><a href="#frontend%EC%97%90-mock-server%EB%A5%BC-%EA%B5%AC%EC%B6%95%ED%95%B4%EB%B3%B4%EC%9E%90" aria-label="frontend에 mock server를 구축해보자 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Frontend에 Mock Server를 구축해보자</h1>
<p>현재 이슈가 되는 프로세스를 개선하기 위해서 MSW(Mock Service Worker) 라이브러리를 도입해보자.</p>
<p>백엔드 개발자와 협의된 API 스펙을 바탕으로 Mock Server를 구축해보자.</p>
<h2 id="그외-비교-mock-library" style="position:relative;"><a href="#%EA%B7%B8%EC%99%B8-%EB%B9%84%EA%B5%90-mock-library" aria-label="그외 비교 mock library permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>그외 비교 Mock Library</h2>
<p>다른 Mocking 라이브러리도 검토해봤지만, 낮은 진입장벽으로 빠른 적용/GraphQL 지원이 가능한 MSW 라이브러리를 선택하였습니다.</p>
<ul>
<li>sinon
<ul>
<li>javascript 테스트를 도와 주는 라이브러리</li>
<li>Spies, Stubs, Mocks… 등의 여러가지 기능을 제공</li>
<li><a href="https://sinonjs.org/#get-started" target="_blank" rel="nofollow">Sinon.JS - Standalone test fakes, spies, stubs and mocks for JavaScript. Works with any unit testing framework.</a></li>
</ul>
</li>
<li>nock
<ul>
<li>NodeJS 기반에 HTTP 요청에 대해 Mock 데이터를 정의하는 용도</li>
<li><a href="https://www.npmjs.com/package/nock#node-version-support" target="_blank" rel="nofollow">npm: nock</a></li>
</ul>
</li>
</ul>
<h1 id="msw란" style="position:relative;"><a href="#msw%EB%9E%80" aria-label="msw란 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MSW란?</h1>
<ul>
<li>MSW(Mock Service Worker의 약자, <a href="https://mswjs.io/" target="_blank" rel="nofollow">https://mswjs.io</a>)는 API Mocking 라이브러리로 서버향의 네트워크 요청을 가로채서 모의 응답(Mocked response)을 보내주는 역할을 담당합니다.
<ul>
<li>Service Worker: 메인 스레드와 분리된 별도의 백그라운드 스레드에서 실행</li>
</ul>
</li>
<li>MSW(Mock Service Worker) 라이브러리를 통하면, Mock 서버를 구축하지 않아도 API를 네트워크 수준에서 Mocking 가능합니다.</li>
<li>MSW는 Service Worker를 기반으로 모의 API를 만들어내기 때문에 다른 프론트엔드에서 사용하는 수많은 라이브러리나 프레임워크에 종속적이지 않고 호환성에 문제없이 동작합니다.</li>
<li>Mock API 지원: REST API, GraphQL API</li>
<li>지원환경: Browser, Node</li>
</ul>
<p>MSW 흐름도</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 787px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/a0781b2cffd1486d4b065e5917edd25a/19dcc/Untitled3.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.34375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVR42pVSi27CMAzk//8P8WgpE6IvVhhNH0naxDc7MCgV0zRLbtraPju+WwAE1RCy3CDNely+CM4RpnatHY5ph+OxQXmy8B6wllCdCUVp8Fl5dN2tZiGPvgdOJ408bxgcoWBqbeuRFx2yTHGxCQ2t9bhePcqSh7g4GD0BFCMiDIOF1j2fA4qiwHK5RNM0L//n5kN3uvsMUIJEz2/n3CNR3sdxRF3XiOMYSZJAKRX+ET1X9AI4DbwzKZYpxauqwmazwWq1CuByo7eAf/ncZOK2be9X/8eEErPWIk1TRFGE3W7HJGX3Nf1yZWsNM53yjiKs1+tQtN1u+Yx5X3UgZxgMq6IPJEm+c+NL4wDIjXl0Ybbm3bB0WDvC7o9XlWJZKc6xDEaBOJGO1uD4yBr03OjBMnEicDj02H8o1pQkYyZsj2RfI4rPLHAddGoMcRPiupY16nmPN8BvgfoKU9fMRA4AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/a0781b2cffd1486d4b065e5917edd25a/4fae8/Untitled3.webp 256w,
/static/a0781b2cffd1486d4b065e5917edd25a/2bf0f/Untitled3.webp 512w,
/static/a0781b2cffd1486d4b065e5917edd25a/68152/Untitled3.webp 787w"
              sizes="(max-width: 787px) 100vw, 787px"
              type="image/webp"
            />
          <source
            srcset="/static/a0781b2cffd1486d4b065e5917edd25a/e3135/Untitled3.png 256w,
/static/a0781b2cffd1486d4b065e5917edd25a/06341/Untitled3.png 512w,
/static/a0781b2cffd1486d4b065e5917edd25a/19dcc/Untitled3.png 787w"
            sizes="(max-width: 787px) 100vw, 787px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/a0781b2cffd1486d4b065e5917edd25a/19dcc/Untitled3.png"
            alt="Untitled"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<h1 id="msw-활용한-개발방식" style="position:relative;"><a href="#msw-%ED%99%9C%EC%9A%A9%ED%95%9C-%EA%B0%9C%EB%B0%9C%EB%B0%A9%EC%8B%9D" aria-label="msw 활용한 개발방식 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MSW 활용한 개발방식</h1>
<ol>
<li>기획자/디자이너 요구사항 전달(kick off 공유)</li>
<li>백엔드 개발자와 API 스펙(인터페이스) 협의(FE API 요구사항 전달)</li>
<li>API 스펙문서 제공</li>
<li>MSW 라이브러리를 이용한 목업 서버 구축</li>
<li>FE 개발 진행(API 연동도 진행)</li>
<li>백엔드 개발자 실 API 제공 시 기존 목업서버와 교체</li>
</ol>
<h1 id="msw-장점" style="position:relative;"><a href="#msw-%EC%9E%A5%EC%A0%90" aria-label="msw 장점 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MSW 장점</h1>
<ul>
<li>낮은 진입장벽으로 빠른 적용이 가능</li>
<li>별도의 환경 없이 네트워크 요청에 대한 모의 가능</li>
<li>API에 종속성 없이 완성도 높은 수준의 사전 개발 가능</li>
<li>네트워크 상태에 따른 디버깅을 위해 활용 가능</li>
</ul>
<h1 id="msw-사용-방법" style="position:relative;"><a href="#msw-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95" aria-label="msw 사용 방법 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MSW 사용 방법</h1>
<ul>
<li>
<p>MSW install</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> msw --save-dev
<span class="token comment"># or</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> msw <span class="token parameter variable">--dev</span></code></pre></div>
</li>
<li>
<p>Define Mocks</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Create a mocks directory</span>
mkdir mocks

<span class="token comment">// Create a mocks/handlers.js file</span>
touch mocks<span class="token operator">/</span>handlers<span class="token punctuation">.</span>js

<span class="token comment">// Edit mocks/handlers.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> handlers <span class="token operator">=</span> <span class="token punctuation">[</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/web/login'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>
      ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Respond with a 200 status code</span>
      ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// api 응답값에 맞는 데이터로 변경</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'ffff'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'hong'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'seungah'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/web/:userId'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params
    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>
      ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Respond with a 200 status code</span>
      ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// api 응답값에 맞는 데이터로 변경</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> userId<span class="token punctuation">,</span>
          <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'hong'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'seungah'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
</li>
<li>
<p>Setup Mocks</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">// create a public/mockServiceWorker.js
npx msw init public/ <span class="token parameter variable">--save</span></code></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 673px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4baeec70dc66dc2f4a4af061daea0c31/60e44/Untitled5.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 57.8125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVR42nVT23KqQBDcRYHlpsCCgOEcvBzUsoy3qvxG8v9f05kZxZhUzsPULExvT08PqDhOUNcN8jyHtQWKorxHIZHnFtNpijTN5L219lEbYjabwRiD6/UNig91XaMoC7qUIggCRFGEOI7luSxLKKUwmUwwqyoin4JFhFFCuITwISw1cl0X63V/I2RQSV2apkGSJNKNSRzHQZZlcmYM12rCpNMEI0fBHWsKapaElMcDoS+XeBwZu7CiUGuN0Wj0IGS1/N7QBP+WLfqVxeLvBFUxQlMnGH8RmruqAIt5hdWikzF+U8hjl+UM85eWfGvg+YHU2KZvhAw2SYS6s+j6Tvz7STj463kefGr+52WO122BtnGQp5FM8yAMSdE4MtChA+VpIfgfIZtvPBd5ZrHuMpRWk/InQgYNS9ASWvxTWv3qYUBxPXR4u8zJKk9qURR+jRwE5kH4M1ghEw2Evu8jpg1XpYsi10RymyYMnwh5IaxCRqcCKx4ye1nRt8fE/D2y10zKyzAmlOXxPa4xfrPZcQOFruskVqsVdrsd+r7HcrmUzJ2fFTNmu92ibVupc7CvXO83W6j9fk+/zBXn80Xy5fL9fDyecDqdKB9xOLzS+XzH3DLjGMNN3t8/8AlUsR8f1lIvsQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/4baeec70dc66dc2f4a4af061daea0c31/4fae8/Untitled5.webp 256w,
/static/4baeec70dc66dc2f4a4af061daea0c31/2bf0f/Untitled5.webp 512w,
/static/4baeec70dc66dc2f4a4af061daea0c31/cea0b/Untitled5.webp 673w"
              sizes="(max-width: 673px) 100vw, 673px"
              type="image/webp"
            />
          <source
            srcset="/static/4baeec70dc66dc2f4a4af061daea0c31/e3135/Untitled5.png 256w,
/static/4baeec70dc66dc2f4a4af061daea0c31/06341/Untitled5.png 512w,
/static/4baeec70dc66dc2f4a4af061daea0c31/60e44/Untitled5.png 673w"
            sizes="(max-width: 673px) 100vw, 673px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/4baeec70dc66dc2f4a4af061daea0c31/60e44/Untitled5.png"
            alt="Untitled"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Create a mocks/browser.js file</span>
touch mocks<span class="token operator">/</span>browser<span class="token punctuation">.</span>js

<span class="token keyword">import</span> <span class="token punctuation">{</span> setupWorker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> handlers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./handlers'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span><span class="token operator">...</span>handlers<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Start worker</span>
<span class="token comment">// index.js</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'local'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> worker <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./mocks/browser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// worker.start(); // default worker path</span>
  worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// custom worker path</span>
    <span class="token literal-property property">serviceWorker</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'../../../public/mockServiceWorker.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
</li>
<li>
<p>jest에서 MSW 사용하기(테스트 자동화)</p>
<ul>
<li>API 자동화 테스트도 미리 개발이 가능하지 않을까??</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// jest-setup</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> server <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mocks/server'</span><span class="token punctuation">;</span>

<span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> server<span class="token punctuation">.</span><span class="token function">resetHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">afterAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> server<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// jest test</span>
mport <span class="token punctuation">{</span> getFruits <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mocks/handlers/fruit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> server <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mocks/server'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'My Fruits'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'사과, 바나나가 리스트에 포함되어 있어야 한다'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// 과일 리스트를 보여주는 컴포넌트</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>FruitList <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'사과'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'바나나'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'과일 정보가 없으면 과일 없음 문구를 보여줘야 한다.'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    server<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">getFruits</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 과일 리스트를 보여주는 컴포넌트</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>FruitList <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'과일 없음'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Storybook에서 MSW 사용하기</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">yarn add <span class="token operator">-</span><span class="token constant">D</span> msw<span class="token operator">-</span>storybook<span class="token operator">-</span>addon

<span class="token comment">// preview</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> addDecorator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@storybook/react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initializeWorker<span class="token punctuation">,</span> mswDecorator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw-storybook-addon'</span><span class="token punctuation">;</span>

<span class="token function">initializeWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addDecorator</span><span class="token punctuation">(</span>mswDecorator<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// storybook component</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> handlers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mocks/handlers'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Story <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@storybook/react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FruitList <span class="token keyword">from</span> <span class="token string">'.'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Components/FruitList'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">component</span><span class="token operator">:</span> FruitList<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">Template</span><span class="token operator">:</span> <span class="token function-variable function">Story</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>FruitList <span class="token punctuation">{</span><span class="token operator">...</span>args<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> DefaultFruitList <span class="token operator">=</span> <span class="token function">Template</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

DefaultFruitList<span class="token punctuation">.</span>args <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
DefaultFruitList<span class="token punctuation">.</span>parameters <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">msw</span><span class="token operator">:</span> handlers<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>life-cycle events
라이프사이클 이벤트 API는 .events에 의해서 노출됩니다.</p>
<ul>
<li>on: event에 반응하기 위해서 등록한다.</li>
<li>removeListener: 등록한 이벤트 제거</li>
<li>removeAllListeners: 등록된 모든 이벤트 제거
<strong>Methods</strong></li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// on</span>
worker<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request:start'</span><span class="token punctuation">,</span> <span class="token parameter">req</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method<span class="token punctuation">,</span> req<span class="token punctuation">.</span>url<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// removeListener</span>
<span class="token keyword">const</span> <span class="token function-variable function">listener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new request'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request:start'</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token string">'request:start'</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// removeAllListener</span>
worker<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">removeAllListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span>__mswStart <span class="token operator">=</span> worker<span class="token punctuation">.</span>start<span class="token punctuation">;</span>
window<span class="token punctuation">.</span>__mswStop <span class="token operator">=</span> worker<span class="token punctuation">.</span>stop<span class="token punctuation">;</span></code></pre></div>
<p><strong>Events</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// request:start</span>
<span class="token comment">// 새 요청이 온 경우</span>
worker<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request:start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new request:'</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>method<span class="token punctuation">,</span> req<span class="token punctuation">.</span>url<span class="token punctuation">.</span>href<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// request:match</span>
<span class="token operator">...</span> 추후작업</code></pre></div>
</li>
<li>
<p>live msw On/Off</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/mocks.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setupWorker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span><span class="token operator">...</span>mocks<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Start the worker by default</span>
worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Write the stop method on the window</span>
<span class="token comment">// to access during runtime.</span>
window<span class="token punctuation">.</span>__mswStart <span class="token operator">=</span> worker<span class="token punctuation">.</span>start<span class="token punctuation">;</span>
window<span class="token punctuation">.</span>__mswStop <span class="token operator">=</span> worker<span class="token punctuation">.</span>stop<span class="token punctuation">;</span></code></pre></div>
<ul>
<li>Calling window.__mswStop() in the browser would disable the mocking for the current page.</li>
</ul>
</li>
<li>
<p>setupWorker(start)</p>
<p><strong>start</strong></p>
<ul>
<li>string (default: “/mockServiceWorker.js”)
Custom Service Worker URL을 등록한다.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">serviceWorker</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Points to the custom location of the Service Worker file.</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/assets/mockServiceWorker.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>
<p><strong>options</strong></p>
<ul>
<li>RegistrationOptions
Custom Service Worker 옵션을 등록한다.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">
<span class="token comment">// url에 /product 경로가 있는경우에 mock response를 받을 수 있다.</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">serviceWorker</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Narrow the scope of the Service Worker to intercept requests</span>
      <span class="token comment">// only from pages under this path.</span>
      <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">'/product'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>
<p><strong>quiet</strong></p>
<ul>
<li>boolean (default: <em>false</em>)
browser console loggin on/off가 가능하다.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">quiet</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p><strong>resetHandlers</strong></p>
<p>런타임에 추가된 handler를 제거한다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">worker<span class="token punctuation">.</span><span class="token function">resetHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><strong>printHandlers</strong></p>
<p>browser console에 현재 요청한 API에 대한 콘솔이 찍히도록 한다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">worker<span class="token punctuation">.</span><span class="token function">printHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><strong>onUnhandledRequest</strong></p>
<ul>
<li>“bypass” | “warn” | “error” | (req: MockedRequest) => void</li>
<li>(default: “warn”)
요청 핸들러에 추가되지 않는 요청을 처리하는 방법 지정
<a href="https://www.notion.so/663ab8ffa37a4840838049736a50396c" target="_blank" rel="nofollow">제목 없음</a></li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'The Lord of the Rings'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">onUnhandledRequest</span><span class="token operator">:</span> <span class="token string">'warn'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">onUnhandledRequest</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">onUnhandledRequest</span><span class="token operator">:</span> <span class="token string">'bypass'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>참고페이지: <a href="https://mswjs.io/docs/api/setup-worker/start#onunhandledrequest" target="_blank" rel="nofollow">https://mswjs.io/docs/api/setup-worker/start#onunhandledrequest</a></p>
</li>
<li>
<p>setupWorker(use)</p>
<p><strong>use</strong></p>
<ul>
<li>setupWorker 초기화 이후에 Request handler를 등록하기 위해 사용됩니다.</li>
<li>기존에 handler가 등록되어 있다면, use에 호출된 request로 override 된다.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/mocks.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setupWorker<span class="token punctuation">,</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/book/:bookId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Lord of the Rings'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Make the `worker` and `rest` references available globally,</span>
<span class="token comment">// so they can be accessed in both runtime and test suites.</span>
window<span class="token punctuation">.</span>msw <span class="token operator">=</span> <span class="token punctuation">{</span>
  worker<span class="token punctuation">,</span>
  rest<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">worker<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  rest<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/book/:bookId/reviews'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>참고페이지: <a href="https://mswjs.io/docs/api/setup-worker/start#onunhandledrequest" target="_blank" rel="nofollow">https://mswjs.io/docs/api/setup-worker/start#onunhandledrequest</a></p>
</li>
<li>
<p>Query paramters</p>
<p>테스트마다 리퀘스트 파라미터에 따라 다른 리스펀스를 보내줘야 하는 경우가 있다. 핸들러에서 req 객체를 통해 파라미터에 접근 가능하다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> setupWorker<span class="token punctuation">,</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/products'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> productId <span class="token operator">=</span> req<span class="token punctuation">.</span>url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>
      ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        productId<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

Body
<span class="token punctuation">{</span>
  <span class="token comment">// Where '123' is the value of `req.url.searchParams.get('id')`</span>
  <span class="token comment">// parsed from the request URL.</span>
  <span class="token string-property property">"productId"</span><span class="token operator">:</span> <span class="token string">"123"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>참고페이지: <a href="https://mswjs.io/docs/recipes/query-parameters" target="_blank" rel="nofollow">https://mswjs.io/docs/recipes/query-parameters</a></p>
</li>
<li>
<p>Response patching</p>
<p>모의 응답(mocked response)를 실제 리퀘스트의 응답에 기반한 데이터로 구성할 수도 있다. 핸들러에서 실제 서버에 리퀘스트를 보낸 후 받은 데이터에 디버깅 등에 필요한 정보를 임의로 덧붙이는 방식이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> setupWorker<span class="token punctuation">,</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://api.github.com/users/:username'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// msw 핸들러에 가로챈 리퀘스트 정보로 살제 서버에 요청을 보낸다.</span>
    <span class="token comment">// msw에서 정의한 핸들러에 매칭되는 것을 방지하기 위해 window.fetch가 아닌 ctx.fetch를 대신 사용한다.</span>
    <span class="token keyword">const</span> originalResponse <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token keyword">const</span> originalResponseData <span class="token operator">=</span> <span class="token keyword">await</span> originalResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>
      ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">location</span><span class="token operator">:</span> originalResponseData<span class="token punctuation">.</span>location<span class="token punctuation">,</span>
        <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Not the real first name'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

Body
<span class="token punctuation">{</span>
  <span class="token comment">// Resolved from the original response</span>
  <span class="token string-property property">"location"</span><span class="token operator">:</span> <span class="token string">"San Francisco"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"firstName"</span><span class="token operator">:</span> <span class="token string">"Not the real first name"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>참고페이지: <a href="https://mswjs.io/docs/recipes/response-patching" target="_blank" rel="nofollow">https://mswjs.io/docs/recipes/response-patching</a></p>
</li>
<li>
<p>Mocking error responses</p>
<p>모의 응답(mocked response)를 실제 리퀘스트의 응답에 기반한 데이터로 구성할 수도 있다. 핸들러에서 실제 서버에 리퀘스트를 보낸 후 받은 데이터에 디버깅 등에 필요한 정보를 임의로 덧붙이는 방식이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> setupWorker<span class="token punctuation">,</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token function">setupWorker</span><span class="token punctuation">(</span>
  rest<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> username <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body
    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>
      <span class="token comment">// Send a valid HTTP status code</span>
      ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// And a response body, if necessary</span>
      ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">errorMessage</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">User '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">' not found</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Response</span>
Body
<span class="token punctuation">{</span>
  <span class="token string-property property">"errorMessage"</span><span class="token operator">:</span> <span class="token string">"User 'admin' not found"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>참고페이지: <a href="https://mswjs.io/docs/recipes/response-patching" target="_blank" rel="nofollow">https://mswjs.io/docs/recipes/response-patching</a></p>
</li>
<li>
<p>Binary response type</p>
<p>BufferSource 객체는 해당 버퍼를 ctx.body 함수로 응답할 수 있습니다. 바이너리 데이터 지원으로 모든 종류의 미디어 콘텐츠(이미지, 오디오, 문서)를 모의 응답으로 보낼 수 있습니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// mock server</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"msw"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token string">'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> handlers <span class="token operator">=</span> <span class="token punctuation">[</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/image"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> imageBuffer <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      res<span class="token punctuation">.</span><span class="token function">arrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>
      ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Content-Length'</span><span class="token punctuation">,</span> imageBuffer<span class="token punctuation">.</span>byteLength<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'image/png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// Respond with the "ArrayBuffer".</span>
      ctx<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>imageBuffer<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// client</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// Update the state with the received response</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>setUserData<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"/image"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">arrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Response</span>
Body
<span class="token punctuation">{</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> ReadableStream
  <span class="token literal-property property">bodyUsed</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> Headers <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token literal-property property">ok</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token literal-property property">redirected</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span>
  <span class="token literal-property property">statusText</span><span class="token operator">:</span> <span class="token string">"OK"</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"basic"</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"http://localhost:3001/image"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>참고페이지: <a href="https://mswjs.io/docs/recipes/binary-response-type" target="_blank" rel="nofollow">https://mswjs.io/docs/recipes/binary-response-type</a></p>
</li>
<li>
<p>Custom response composition
사용자 정의 응답 구성 작업을 추가가 가능합니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/mocks/handlers.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> delayedResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./res/delayed-response'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> handlers <span class="token operator">=</span> <span class="token punctuation">[</span>
  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/delay'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delayedResponse</span><span class="token punctuation">(</span>
      ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'f79e82e8-c34a-4dc7-a49e-9fadc0979fda'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'hong'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'seungah'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// src/mocks/res/delayed-response.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createResponseComposition<span class="token punctuation">,</span> context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> delayedResponse <span class="token operator">=</span> <span class="token function">createResponseComposition</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  context<span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>참고페이지: <a href="https://mswjs.io/docs/recipes/custom-response-composition" target="_blank" rel="nofollow">https://mswjs.io/docs/recipes/custom-response-composition</a></p>
</li>
</ul>
<h1 id="msw-사용예제코드" style="position:relative;"><a href="#msw-%EC%82%AC%EC%9A%A9%EC%98%88%EC%A0%9C%EC%BD%94%EB%93%9C" aria-label="msw 사용예제코드 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MSW 사용예제코드</h1>
<ul>
<li>
<p>fetch, axios</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/web/apip/store/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token string">'/web/apip/store/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
</li>
<li>
<p>상태관리 연동(reduxtoolkit)</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> fetchAsyncAction <span class="token operator">=</span> <span class="token function">createAsyncThunk</span><span class="token punctuation">(</span><span class="token constant">FETCH_ASYNC</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> base <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">fetchLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> base<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span>fetchAsyncAction<span class="token punctuation">.</span>fulfilled<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 성공</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>
    login<span class="token punctuation">,</span>
  <span class="token punctuation">]</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>state<span class="token punctuation">,</span>
    <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">login</span><span class="token operator">:</span> login<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
</li>
</ul>
<h3 id="개발내용결과" style="position:relative;"><a href="#%EA%B0%9C%EB%B0%9C%EB%82%B4%EC%9A%A9%EA%B2%B0%EA%B3%BC" aria-label="개발내용결과 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>개발내용/결과</h3>
<p><a href="/2a19986a3f308807076eb7a9a6cfaf01/msw-sample.zip">msw-sample.zip</a></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 965px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/859837ef5c57967e989cc98e2fa66b78/e7a62/Untitled6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 100.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADBElEQVR42pVUXY/UOBD0/39Hd+IF3d/ghBC74gW0cLCaZRd2Z3Ymk+/EseN8TzJF2ZlZAuKkO0ul7nQ67XJ3OWL14MHb+7hfb+H7PlabHH/8nTr8Sfz1JsXzVwmevUzx4nWCIE4RRglkoVEUBoUu6RsobVCaCiL2fPhxhiSTSJIUXpDg+j7GxzsfH+5CXN1F+HRvEeNmkyLNJdIsR5YXLEwrJcIwZ0zOBXUhUTUdakIZgyCxu7N4SjZRzI0yJmfQqkAhbSEJqTRibp4XyhVO8zkeJxnEcDjAreMR9cCi/YB2BOqDfZ5g+tHZo0s5OuDkn+04HTF0A47TBJHKAqaqybJB07QOtfOb2bYtGSvsfMtII7Os+M2ZnX3n+igVNK2IohA56bZdR7ToaLuuf0JPxmEU4cvtV2zXG/iPj9hvNtit10gYz3ncJYTKOWUOJstStGQzkfY4jj+h63vk7Gfw9hL66grNp88wHz6iu165Vi2X8AMf251HCSiUpUFlj/8TGigOwae0YuYa5pmiQMMBNmXpCJx7ayEetx62RC7nnvwOtjcRj5dRLrYFlvVyOZInokJrSiCOXf/sbtM0/sA4ulhTU06+hyAIyZZDIGPdTBjGRaXzkc+7HX/pxXINQ+8KKR7XNt76LQfWtp17Z60dpvWF7VNdN5RO5ZRu6hqa/THVHNPWUkpZmvHYMQWuXYED9TsMg0Pf9w7DcOBQwgQPu4g6C9zNsNfKaYsfSocSisOy0sqt/k6w712OZX2KKeaKkEV2fujuqE2oaivo1gn9CbW1rUN9wvL9MiZ8/j08skvIzCreslE8uibO1vk2Xs6xs51zTvFyfhbXjznCOMI+jBHywksW1aZ+Svq/EEkYwaewJf8URUqWqnT/OstILxj+V4jq3XsUFxfQl2+gLi5RaoWGmrRyWt6AWaMnLOK/QjTyG1R0Q6xQJreozRpd4+HQBuhpHeo9jocEmLIZY/qvEF21hkr+gUqvUeYrVMUt8YX+Dcpshc58Q1/dO5z9qd8Ch/1v8R0UH/U6QEKxCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/859837ef5c57967e989cc98e2fa66b78/4fae8/Untitled6.webp 256w,
/static/859837ef5c57967e989cc98e2fa66b78/2bf0f/Untitled6.webp 512w,
/static/859837ef5c57967e989cc98e2fa66b78/d655e/Untitled6.webp 965w"
              sizes="(max-width: 965px) 100vw, 965px"
              type="image/webp"
            />
          <source
            srcset="/static/859837ef5c57967e989cc98e2fa66b78/e3135/Untitled6.png 256w,
/static/859837ef5c57967e989cc98e2fa66b78/06341/Untitled6.png 512w,
/static/859837ef5c57967e989cc98e2fa66b78/e7a62/Untitled6.png 965w"
            sizes="(max-width: 965px) 100vw, 965px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/859837ef5c57967e989cc98e2fa66b78/e7a62/Untitled6.png"
            alt="Untitled"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<h1 id="mocking-폴더구조" style="position:relative;"><a href="#mocking-%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0" aria-label="mocking 폴더구조 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mocking 폴더구조</h1>
<ul>
<li>
<p>폴더구조</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">mocks
 ┣ login <span class="token comment">// handlers group</span>
 ┃ ┣ browser<span class="token punctuation">.</span>js <span class="token comment">// browser enviroment</span>
 ┃ ┣ index<span class="token punctuation">.</span>js
 ┃ ┣ node<span class="token punctuation">.</span>js <span class="token comment">// node enviroment</span>
 ┃ ┗ loginHandlers<span class="token punctuation">.</span>js
 ┣ fixtures <span class="token comment">// 모킹 데이터를 json으로 관리</span>
 ┃ ┣ login
 ┃ ┃ ┣ index<span class="token punctuation">.</span>js
 ┃ ┃ ┗ login<span class="token punctuation">.</span>json</code></pre></div>
<ul>
<li>
<p>handler 관리(mocks/~~)</p>
<ul>
<li>서비스의 특성에 맞게 폴더 추가</li>
</ul>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token comment">/* eslint-disable import/extensions */</span>
import <span class="token punctuation">{</span> rest <span class="token punctuation">}</span> from 'msw';
import loginData from './login.json';

export const loginHandlers = <span class="token punctuation">[</span>
  rest.get('/login'<span class="token punctuation">,</span> (req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx) => <span class="token punctuation">{</span>
    return res(
      ctx.status(<span class="token number">200</span>)<span class="token punctuation">,</span> <span class="token comment">// Respond with a 200 status code</span>
      ctx.json(loginData)<span class="token punctuation">,</span>
    );
  <span class="token punctuation">}</span>)<span class="token punctuation">,</span>
<span class="token punctuation">]</span>;</code></pre></div>
</li>
<li>
<p>모킹 데이터 관리(mocks/fixtures)</p>
<ul>
<li>모킹 데이터를 json 형식으로 관리
<ul>
<li>크롬 개발자 도구 - 네트워크 탭에서 응답값 그대로 복/붙해서 바로 사용하기 편하게 하기 위해서 json 형식으로 관리함.</li>
<li>storybook, jest, cypress 공통으로 사용하기 위한 공통 모킹 작업</li>
</ul>
</li>
<li>서비스의 특성에 맞게 모킹 데이터 폴더 추가</li>
</ul>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"timestamp"</span><span class="token operator">:</span> <span class="token number">1663662614700</span><span class="token punctuation">,</span>
  <span class="token property">"status"</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"SUCCESS"</span><span class="token punctuation">,</span>
  <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"OK"</span><span class="token punctuation">,</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"login"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
</li>
</ul>
</li>
</ul>
<h1 id="storybook--msw-사용" style="position:relative;"><a href="#storybook--msw-%EC%82%AC%EC%9A%A9" aria-label="storybook  msw 사용 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Storybook → MSW 사용</h1>
<ul>
<li>
<p>Install MSW and the addon</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i msw msw-storybook-addon <span class="token parameter variable">-D</span>
or
<span class="token function">yarn</span> <span class="token function">add</span> msw msw-storybook-addon <span class="token parameter variable">-D</span></code></pre></div>
</li>
<li>
<p>Configure the addon</p>
<ul>
<li>MSW를 스토리북에 초기화하기 위해서 ./storybook/preview.js decorator에 추가를 해야 MSW가 동작한다.</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> initialize<span class="token punctuation">,</span> mswDecorator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw-storybook-addon'</span><span class="token punctuation">;</span>

<span class="token comment">// Initialize MSW</span>
<span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Provide the MSW addon decorator globally</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> decorators <span class="token operator">=</span> <span class="token punctuation">[</span>mswDecorator<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
</li>
<li>
<p>Usage</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> rest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> loginHandlers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./loginHandlers'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">SuccessBehavior</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserProfile</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>

SuccessBehavior<span class="token punctuation">.</span>parameters <span class="token operator">=</span> <span class="token punctuation">{</span>
  msw<span class="token operator">:</span> <span class="token punctuation">{</span>
    handlers<span class="token operator">:</span> loginHandlers<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
</li>
</ul>
<h1 id="jest--msw-사용" style="position:relative;"><a href="#jest--msw-%EC%82%AC%EC%9A%A9" aria-label="jest  msw 사용 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Jest → MSW 사용</h1>
<ul>
<li>
<p>Configure-server</p>
<ul>
<li>src/mock/server.js 파일 추가</li>
</ul>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">touch</span> src/mocks/server.js</code></pre></div>
<ul>
<li>msw 패키지에서 setupServer import 후 mocking handler 연동</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/mocks/server.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setupServer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'msw/node'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> handlers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./handlers'</span><span class="token punctuation">;</span>
<span class="token comment">// This configures a request mocking server with the given request handlers.</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">setupServer</span><span class="token punctuation">(</span><span class="token operator">...</span>handlers<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
</li>
<li>
<p>Setup</p>
<ul>
<li>setupTests.js jest 환경설정 파일에 수정</li>
</ul>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/setupTests.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> server <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./mocks/server.js'</span><span class="token punctuation">;</span>

<span class="token comment">/* MSW mocking */</span>
<span class="token comment">// Establish API mocking before all tests.</span>
<span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Reset any request handlers that we may add during the tests,</span>
<span class="token comment">// so they don't affect other tests.</span>
<span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> server<span class="token punctuation">.</span><span class="token function">resetHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Clean up after the tests are finished.</span>
<span class="token function">afterAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> server<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
</li>
</ul>
<h1 id="cypress--fixtures-사용" style="position:relative;"><a href="#cypress--fixtures-%EC%82%AC%EC%9A%A9" aria-label="cypress  fixtures 사용 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cypress → Fixtures 사용</h1>
<ul>
<li>
<p>Configure the Fixtures folder</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// cypress.config.ts</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  e2e<span class="token operator">:</span> <span class="token punctuation">{</span>
    fixturesFolder<span class="token operator">:</span> <span class="token string">'mocks/fixtures'</span><span class="token punctuation">,</span> <span class="token comment">// 지정된 mocking 폴더 경로 지정</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
</li>
<li>
<p>Usage</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> fixture<span class="token operator">:</span> <span class="token string">'login/login.json'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
</li>
</ul>
<h3 id="참고사항" style="position:relative;"><a href="#%EC%B0%B8%EA%B3%A0%EC%82%AC%ED%95%AD" aria-label="참고사항 permalink" class="custom-class before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>참고사항</h3>
<ul>
<li><a href="https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c" target="_blank" rel="nofollow">https://blog.mathpresso.com/msw로-api-모킹하기-2d8a803c3d5c</a></li>
<li><a href="https://tech.kakao.com/2021/09/29/mocking-fe/" target="_blank" rel="nofollow">https://tech.kakao.com/2021/09/29/mocking-fe/</a></li>
<li><a href="https://mswjs.io/docs/" target="_blank" rel="nofollow">https://mswjs.io/docs/</a></li>
<li><a href="https://blog.rhostem.com/posts/2021-03-20-mock-service-worker" target="_blank" rel="nofollow">https://blog.rhostem.com/posts/2021-03-20-mock-service-worker</a></li>
<li><a href="https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c" target="_blank" rel="nofollow">https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c</a></li>
<li><a href="https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c" target="_blank" rel="nofollow">https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c</a></li>
<li><a href="https://storybook.js.org/addons/msw-storybook-addon" target="_blank" rel="nofollow">https://storybook.js.org/addons/msw-storybook-addon</a></li>
</ul></article><section class="PostContent__PostNavigator-sc-9jovib-6 eozcVb"><a href="/blog/2022/08/2022-08-07-cypress/"><h5>이전글</h5><i>← </i>cypress</a><a href="/blog/2022/07/2022-07-24-jest/"><h5>다음글</h5>jest<i> →</i></a></section><div></div></div><aside class="PostContent__TocRenderer-sc-9jovib-4 cbTbsU"><ul>
<li>
<p><a href="#mocking-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%8F%84%EC%9E%85%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0">Mocking 라이브러리를 도입해야하는 이유</a></p>
<ul>
<li><a href="#frontend-%ED%98%84%EC%9E%AC-%EC%9D%B4%EC%8A%88">Frontend 현재 이슈</a></li>
<li><a href="#%EC%9D%B4%EB%9F%B0-%EC%9D%BC%EC%9D%80-%EC%99%9C-%EC%9D%BC%EC%96%B4%EB%82%A0%EA%B9%8C">이런 일은 왜 일어날까?</a></li>
<li><a href="#fe%EC%97%90%EC%84%9C-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B3%A0%EC%9E%90-%ED%95%98%EB%8A%94-%EC%A0%90%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C">FE에서 해결하고자 하는 점은 무엇일까?</a></li>
</ul>
</li>
<li>
<p><a href="#frontend%EC%97%90-mock-server%EB%A5%BC-%EA%B5%AC%EC%B6%95%ED%95%B4%EB%B3%B4%EC%9E%90">Frontend에 Mock Server를 구축해보자</a></p>
<ul>
<li><a href="#%EA%B7%B8%EC%99%B8-%EB%B9%84%EA%B5%90-mock-library">그외 비교 Mock Library</a></li>
</ul>
</li>
<li>
<p><a href="#msw%EB%9E%80">MSW란?</a></p>
</li>
<li>
<p><a href="#msw-%ED%99%9C%EC%9A%A9%ED%95%9C-%EA%B0%9C%EB%B0%9C%EB%B0%A9%EC%8B%9D">MSW 활용한 개발방식</a></p>
</li>
<li>
<p><a href="#msw-%EC%9E%A5%EC%A0%90">MSW 장점</a></p>
</li>
<li>
<p><a href="#msw-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95">MSW 사용 방법</a></p>
</li>
<li>
<p><a href="#msw-%EC%82%AC%EC%9A%A9%EC%98%88%EC%A0%9C%EC%BD%94%EB%93%9C">MSW 사용예제코드</a></p>
</li>
<li>
<p><a href="#mocking-%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0">Mocking 폴더구조</a></p>
</li>
<li>
<p><a href="#storybook--msw-%EC%82%AC%EC%9A%A9">Storybook → MSW 사용</a></p>
</li>
<li>
<p><a href="#jest--msw-%EC%82%AC%EC%9A%A9">Jest → MSW 사용</a></p>
</li>
<li>
<p><a href="#cypress--fixtures-%EC%82%AC%EC%9A%A9">Cypress → Fixtures 사용</a></p>
</li>
</ul></aside></div><div class="Footer__FooterWrapper-sc-rphy7j-0 iqMMNl">Thank You for Visiting My Blog,<br/>© 2021 Developer SeungAh, Powered By Gatsby.</div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2022/07/2022-07-25-msw/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-3f569fefb0788f5a0023.js\"],\"component---src-components-templates-post-template-tsx\":[\"/component---src-components-templates-post-template-tsx-d9d3da42943c44af159e.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-4d52495227296e18c78a.js\"],\"component---src-pages-about-tsx\":[\"/component---src-pages-about-tsx-ed4d3b150f6b0138dbea.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-95992269d7f74c02239a.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="c3210c92db98a47d2773";</script><script src="/webpack-runtime-7612a97d8f43392f6335.js" async></script><script src="/framework-a96385c61229616bc6a1.js" async></script><script src="/app-3f569fefb0788f5a0023.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>