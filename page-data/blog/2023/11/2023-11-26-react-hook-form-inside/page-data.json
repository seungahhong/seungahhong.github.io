{"componentChunkName":"component---src-components-templates-post-template-tsx","path":"/blog/2023/11/2023-11-26-react-hook-form-inside/","result":{"data":{"site":{"siteMetadata":{"title":"홍승아 기술 블로그","description":"홍승아 기술 블로그에 오신걸 환영합니다.","author":"홍승아","type":"website","siteUrl":"https://seungahhong.github.io","social":{"facebook":"https://www.facebook.com/people/%ED%99%8D%EC%8A%B9%EC%95%84/100002349562000/","github":"https://github.com/seungahhong","notion":"https://material-debt-c1c.notion.site/daa60481e37840ea9e1b7e1b12269942","linkedin":"https://www.linkedin.com/in/seungahhong/"}}},"allFile":{"edges":[{"node":{"name":"facebook","publicURL":"/static/b185e9b61bb465d92b14ed1c9a9ded61/facebook.svg","childImageSharp":null}},{"node":{"name":"github","publicURL":"/static/4a6687a74051de2b3536e95d0b6c992a/github.svg","childImageSharp":null}},{"node":{"name":"notion","publicURL":"/static/19b0f81386812ed2f2f3a7aea202935f/notion.svg","childImageSharp":null}},{"node":{"name":"linkedin","publicURL":"/static/3dc9e0d0f748678205218f1c72941cc2/linkedin.svg","childImageSharp":null}},{"node":{"name":"background","publicURL":"/static/77f5c833c2343c992fd263c780495905/background.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAjABQDASIAAhEBAxEB/8QAGwABAAEFAQAAAAAAAAAAAAAAAAcEBggJCgX/xAAXAQEBAQEAAAAAAAAAAAAAAAAHBQYI/9oADAMBAAIQAxAAAAG5fRl7U4Ddg9LblwJg9mPTTxjbDu2KyVVZmqWuNuZyEMin/wD/xAAcEAADAQEBAAMAAAAAAAAAAAADBAUGAgcAARb/2gAIAQEAAQUCocsCqedUserp/wBPHH8jrdcIUUCzly6d9kvsIW5VVVRpQmuEKvdas00RPa7ztxVPfbJZDS1qT9pMnf30lSbAH//EACYRAAIBAgYBBAMAAAAAAAAAAAECAwQRAAUGEiEiURUjJDEyQWH/2gAIAQMBAT8Bzv5dFVU/uOqwNDUzQtZ5I5I5Cw3LwrSlW3MlnQv1Kk3I0npF+3q1dz5y/MOLWG3lr9fxH8Axnea1WXZnSUNRX08GXSVirDBIIxJJU7WXsZS14nXmMohJkSVS0bKRMuvKG3WPLI1+lSSirEkCg2G9UfarW5IH0f0Dxitmmk1PvklkdzqqMl3dmYlaqqRTuJJuqkqPCmw4xFGhjQlEJKgklQST5Jtj/8QAJREAAgEDAwQCAwAAAAAAAAAAAQIDBBESBSEiAAYTMRRRIzJB/9oACAECAQE/Ae1JFnkdPKKaSJ6b42KoyySCQKZGV8hIo2Zl2BV25C11v3Iu2NGP6cVpCtzYkg7fsTf0PfrrQaWOv0RsKKSerpaYg1NN5eNOHGCgxGLGpSzK4Zx+PBhlkTEmga9EiRqlVZERR4a+hMQsq8YzJBmUU8VyubD217mijSPRI0jRY0GjiyIoVReGFjxUAbnc/Z36lVfI/Fff0Ov/xAAnEAACAgIBAwMFAQEAAAAAAAACAwEEBRIRABMhFCIjBhUxMkEzQv/aAAgBAQAGPwK6haou0UFLaxMVvXbjsnEOhRDx/mLSZA8SJLIp0kJiOIN1ux6qp3Jp4744r3LUEJahcOB3aLI+NZiLHCPCzaXtL5N0tbAtaonVAYszGPawGWlkJ6wMz7Y8TE/mZ6mMuEVFgtoMKzPaBkysglEsOQEhktpAIOC4ITVO4dZB5bxMXAq1ZmDBczEtdLmP/bxAQCBDUjOJZ3Q7fBMbcRzZkvlYwmbunWC7xbq2nuc88z+0e7meeeqH1LFmweGysIpWVy9p1aOTAfEwki7SBtpiHrKBHl6nrjzrzSr/AFLinRTy2O9fi6EZ6vVX6w8hX+2NYu/DAxmSTDoKiu8sStLddMlxsA9W7f1JlalDLcJr2KmftprZJA1lClK2AK0gYAoAFbljK3DHcAzgtuk2LnpTwaqbrZ22optGL2MkbaeHXEvTVf2YYyswEy8LSAFJAZj04U/eJydx9Aq966JhaJ+NriijaymQkPZXfdgspkBSveWuawobzwFC5coY7IFm6isusKWU7I48GbUjpPQ+u0q9grNGxfJMTCxC8vQeJ2K4Ny494VnenrqIuEJUGpQK0DqkfdOxFAbmXuMiLz0JTPMzERPMDPjYv5Mcfz+dQAEmY8T8tSo8vKw/7ehh6x+BHbUY8DER1//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/IbjsjUQRDOG9yM8H6LHI1AF3hlR4BZJXKJMAACir473dyInWJOxmpkMQVQyHcnAdNamkCXWEAXfdQjTuahHixtYFU0pQAeZZgBWyPe+FR7akoVqS8vRqyotR0D6hilumzYosaSmxtobuIHifhRG0qHV6ADEvZwQQODoHg26va3vwzkwOFw+G/9oADAMBAAIAAwAAABCXI3JwL//EABgRAQEBAQEAAAAAAAAAAAAAAAERIQBR/9oACAEDAQE/EHVZhUihLRqkO8CCpiJbbqCaOqvbbsrimolDvsLCAEV0QgdoxxETJNt6DzBak1rJJOTOQCBVCVXVVV17/8QAGhEBAQEBAAMAAAAAAAAAAAAAAREhADFhkf/aAAgBAgEBPxCdZEzDipJRYSdhRs8DCKDVDaK1Cpytj88Ix2j+p65EH8wCDqRIkDLkWSkDjoBM4JqrvLRZWqsrmrPR87//xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPxBCvOwQu7PBe3aLTISCyfpEzgoKtriaxgWDxMzHb6d+Bd6TsASFFvYtFa9FIPaEtI3sbizgSsxk2P2s9d12ptjbwWm2LYGMjAp2NKChKJmGwzNWyYEVqx80qLWAlWnhTgQBmZsmRhBMOyzEJshRGqitlRChJ6SsgOcmYx4ScH8i4H//2Q=="},"images":{"fallback":{"src":"/static/77f5c833c2343c992fd263c780495905/c2a83/background.jpg","srcSet":"/static/77f5c833c2343c992fd263c780495905/9330e/background.jpg 139w,\n/static/77f5c833c2343c992fd263c780495905/53b4d/background.jpg 278w,\n/static/77f5c833c2343c992fd263c780495905/c2a83/background.jpg 555w","sizes":"(min-width: 555px) 555px, 100vw"},"sources":[{"srcSet":"/static/77f5c833c2343c992fd263c780495905/3ee68/background.webp 139w,\n/static/77f5c833c2343c992fd263c780495905/d0ff1/background.webp 278w,\n/static/77f5c833c2343c992fd263c780495905/21b9c/background.webp 555w","type":"image/webp","sizes":"(min-width: 555px) 555px, 100vw"}]},"width":555,"height":961}}}}]},"allMarkdownRemark":{"edges":[{"node":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/60cb6d32903413aee3430b57b1259548/57b1f/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.70312499999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVR42nVSiw6DIBDj/39z2cRNQVCj0ejN3lZ3I5tJA9Re7wEu5yy570XXN1JK0nWdAnueraYvYgiXY5TcNpKPIJLDMChoCq7chxBUQ2OsSOzS4y7pejnIj+E4jrLvu4ratpV4JF2W5QzCuaqqsxuABThtdxjPnxAjkJnZtq3G8uCmadIi1JAZaAawJYCtkqeO7dv4lyFEMRxEJ03TKGwwV1sZ/wOoHDw4naFeiL9JNsK6rrWVdV1l2zaxnw0G5nk+Z/u65eLakdF7rwKY/TIsn9D3sykIZEPbGDIqxO1a/Ht/nOcT3ruyEUgAQrwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/60cb6d32903413aee3430b57b1259548/4fae8/Untitled.webp 256w,\n/static/60cb6d32903413aee3430b57b1259548/2bf0f/Untitled.webp 512w,\n/static/60cb6d32903413aee3430b57b1259548/d71bc/Untitled.webp 1024w,\n/static/60cb6d32903413aee3430b57b1259548/f3efb/Untitled.webp 1536w,\n/static/60cb6d32903413aee3430b57b1259548/96d48/Untitled.webp 2048w,\n/static/60cb6d32903413aee3430b57b1259548/cdd4f/Untitled.webp 2963w\"\n              sizes=\"(max-width: 1024px) 100vw, 1024px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/60cb6d32903413aee3430b57b1259548/e3135/Untitled.png 256w,\n/static/60cb6d32903413aee3430b57b1259548/06341/Untitled.png 512w,\n/static/60cb6d32903413aee3430b57b1259548/42a19/Untitled.png 1024w,\n/static/60cb6d32903413aee3430b57b1259548/e8464/Untitled.png 1536w,\n/static/60cb6d32903413aee3430b57b1259548/2eb59/Untitled.png 2048w,\n/static/60cb6d32903413aee3430b57b1259548/57b1f/Untitled.png 2963w\"\n            sizes=\"(max-width: 1024px) 100vw, 1024px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/60cb6d32903413aee3430b57b1259548/42a19/Untitled.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1 id=\"form-객체-생성\" style=\"position:relative;\"><a href=\"#form-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1\" aria-label=\"form 객체 생성 permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Form 객체 생성</h1>\n<p>useForm에서 데이터를 최초 세팅 후 defaultValues 세팅 이후에 다시 변경 시 변경이 안되는 경우가 있는데 아래 코드 처럼 useRef 최초 1회 생성 시에만 defaultValues를 세팅함으로 변경이 안되는거 였다.</p>\n<p>해당 이슈를 해결을 위해서는 데이터를 얻어온 이후에 useForm을 호출해주는 방향으로 설계를 해야할 것 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> _formControl <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>\n  UseFormReturn<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token punctuation\">,</span> TContext<span class=\"token punctuation\">,</span> TTransformedValues<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span>\n<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>formState<span class=\"token punctuation\">,</span> updateFormState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>FormState<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token operator\">>></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  isDirty<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  isValidating<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  isLoading<span class=\"token operator\">:</span> <span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>defaultValues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  isSubmitted<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  isSubmitting<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  isSubmitSuccessful<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  isValid<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  submitCount<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  dirtyFields<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  touchedFields<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  errors<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  defaultValues<span class=\"token operator\">:</span> <span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>defaultValues<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> <span class=\"token keyword\">undefined</span>\n    <span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>defaultValues<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>_formControl<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  _formControl<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">createFormControl</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">updateFormState</span><span class=\"token punctuation\">(</span>formState <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>formState <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    formState<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> control <span class=\"token operator\">=</span> _formControl<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">;</span>\ncontrol<span class=\"token punctuation\">.</span>_options <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useSubscribe</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> Props<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> _props <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  _props<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span>\n      <span class=\"token operator\">!</span>props<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">&amp;&amp;</span>\n      _props<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>subject <span class=\"token operator\">&amp;&amp;</span>\n      <span class=\"token comment\">// 최초 구독 처리하고 2번째 인자로 넘어온 함수를 실행한다.</span>\n      _props<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>subject<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        next<span class=\"token operator\">:</span> _props<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      subscription <span class=\"token operator\">&amp;&amp;</span> subscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">useSubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// form 전체에 대한 상태값 관리하는 객체</span>\n  subject<span class=\"token operator\">:</span> control<span class=\"token punctuation\">.</span>_subjects<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">//</span>\n  <span class=\"token function-variable function\">next</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n    value<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>FormState<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token operator\">>></span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">?</span><span class=\"token operator\">:</span> InternalFieldName <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 객체 생성 함수 로직에서 value 넘어온 value값을 구독한 지점에 업데이트(watch, register)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">// 생성한 폼 객체의 상태값을 변경하기 위한 함수</span>\n      <span class=\"token function\">shouldRenderFormState</span><span class=\"token punctuation\">(</span>\n        value<span class=\"token punctuation\">,</span>\n        control<span class=\"token punctuation\">.</span>_proxyFormState<span class=\"token punctuation\">,</span>\n        control<span class=\"token punctuation\">.</span>_updateFormState<span class=\"token punctuation\">,</span>\n        <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 폼 객체의 상태값을 변경 이후에 useState 상태를 세팅함으로써 렌더링 되게 처리</span>\n      <span class=\"token function\">updateFormState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>control<span class=\"token punctuation\">.</span>_formState <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nReact<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 서버에서 받아온 values 값을 업데이트 할 경우</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>values <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">deepEqual</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">,</span> _values<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    control<span class=\"token punctuation\">.</span><span class=\"token function\">_reset</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">,</span> control<span class=\"token punctuation\">.</span>_options<span class=\"token punctuation\">.</span>resetOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    _values<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 기본값일 경우에는 디폴트 밸류 함수로 세팅한다.</span>\n    control<span class=\"token punctuation\">.</span><span class=\"token function\">_resetDefaultValues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">,</span> control<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nReact<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>control<span class=\"token punctuation\">.</span>_state<span class=\"token punctuation\">.</span>mount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 최초 1회 form 객체 생성(createFormControl)</span>\n    control<span class=\"token punctuation\">.</span><span class=\"token function\">_updateValid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 유효성 체크</span>\n    control<span class=\"token punctuation\">.</span>_state<span class=\"token punctuation\">.</span>mount <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// form 생명주기 상태값으로 mount 처리</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>control<span class=\"token punctuation\">.</span>_state<span class=\"token punctuation\">.</span>watch<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// watch 모드가 세팅 될 경우</span>\n    control<span class=\"token punctuation\">.</span>_state<span class=\"token punctuation\">.</span>watch <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// watch  모드 끄고</span>\n    control<span class=\"token punctuation\">.</span>_subjects<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>control<span class=\"token punctuation\">.</span>_formState <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// useSubscribed 훅의 next를 실행</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// element name 값으로 엘리먼트의 상태값을 관리 중 unMount가 있는경우 제거한다.(option.shouldUnregister 세팅된 경우)</span>\n  control<span class=\"token punctuation\">.</span><span class=\"token function\">_removeUnmounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// useState를 통해서 변경된 데이터를 내부 폼 전체 객체 상태값을 업데이트(상태값을 ref에 저장)</span>\n_formControl<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>formState <span class=\"token operator\">=</span> <span class=\"token function\">getProxyFormState</span><span class=\"token punctuation\">(</span>formState<span class=\"token punctuation\">,</span> control<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 컴포넌틀는 리랜더링 하더라도 useRef의 최신 상태값을 얻어오도록 ref에 current값을 리턴한다.</span>\n<span class=\"token keyword\">return</span> _formControl<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"최초-1회-form-객체-생성-로직createformcontrol\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%B4%88-1%ED%9A%8C-form-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1-%EB%A1%9C%EC%A7%81createformcontrol\" aria-label=\"최초 1회 form 객체 생성 로직createformcontrol permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최초 1회 Form 객체 생성 로직(createFormControl)</h1>\n<p>createFormControl 함수에 대한 설명을 해보겠습니다.</p>\n<p>props는 useForm 인자 props를 전달한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> defaultOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  mode<span class=\"token operator\">:</span> <span class=\"token constant\">VALIDATION_MODE</span><span class=\"token punctuation\">.</span>onSubmit<span class=\"token punctuation\">,</span>\n  reValidateMode<span class=\"token operator\">:</span> <span class=\"token constant\">VALIDATION_MODE</span><span class=\"token punctuation\">.</span>onChange<span class=\"token punctuation\">,</span>\n  shouldFocusError<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">createFormControl</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>\n  TFieldValues <span class=\"token keyword\">extends</span> FieldValues <span class=\"token operator\">=</span> FieldValues<span class=\"token punctuation\">,</span>\n  TContext <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n  props<span class=\"token operator\">:</span> UseFormProps<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token punctuation\">,</span> TContext<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">flushRootRender</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Omit<span class=\"token operator\">&lt;</span>UseFormReturn<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token punctuation\">,</span> TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'formState'</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 기본 값을 세팅</span>\n<span class=\"token keyword\">let</span> _defaultValues <span class=\"token operator\">=</span>\n  <span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>_options<span class=\"token punctuation\">.</span>defaultValues<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>_options<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> <span class=\"token function\">cloneObject</span><span class=\"token punctuation\">(</span>_options<span class=\"token punctuation\">.</span>defaultValues <span class=\"token operator\">||</span> _options<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// formValues 값을 세팅</span>\n<span class=\"token keyword\">let</span> _formValues <span class=\"token operator\">=</span> _options<span class=\"token punctuation\">.</span>shouldUnregister <span class=\"token comment\">// unmount 될 경우 입력데이터 손실처리</span>\n  <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">:</span> <span class=\"token function\">cloneObject</span><span class=\"token punctuation\">(</span>_defaultValues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// form 생명주기 상태값을 관리</span>\n<span class=\"token keyword\">let</span> _state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  action<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  mount<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  watch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// element name 값으로 엘리먼트의 상태값을 관리</span>\n<span class=\"token keyword\">let</span> _names<span class=\"token operator\">:</span> Names <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  mount<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// register, unregister 실행 시 name 값을 map으로 관리</span>\n  unMount<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  array<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  watch<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// form 전체에 대한 상태값 관리</span>\n<span class=\"token keyword\">const</span> _proxyFormState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  isDirty<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  dirtyFields<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  touchedFields<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  isValidating<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  isValid<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  errors<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 옵저버 패턴 객체 생성</span>\n<span class=\"token keyword\">const</span> _subjects<span class=\"token operator\">:</span> Subjects<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  values<span class=\"token operator\">:</span> <span class=\"token function\">createSubject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  array<span class=\"token operator\">:</span> <span class=\"token function\">createSubject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  state<span class=\"token operator\">:</span> <span class=\"token function\">createSubject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자의 인터렉션에 대해서만 dirty 세팅(DirtyFields and isDirty)</span>\n<span class=\"token keyword\">const</span> shouldCaptureDirtyFields <span class=\"token operator\">=</span>\n  props<span class=\"token punctuation\">.</span>resetOptions <span class=\"token operator\">&amp;&amp;</span> props<span class=\"token punctuation\">.</span>resetOptions<span class=\"token punctuation\">.</span>keepDirtyValues<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 제출 이전, 이후에 유효성 체크 로직 분리</span>\n<span class=\"token keyword\">const</span> validationModeBeforeSubmit <span class=\"token operator\">=</span> <span class=\"token function\">getValidationModes</span><span class=\"token punctuation\">(</span>_options<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> validationModeAfterSubmit <span class=\"token operator\">=</span> <span class=\"token function\">getValidationModes</span><span class=\"token punctuation\">(</span>_options<span class=\"token punctuation\">.</span>reValidateMode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"register\" style=\"position:relative;\"><a href=\"#register\" aria-label=\"register permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>register</h2>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> register<span class=\"token operator\">:</span> UseFormRegister<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// &lt;input type=\"radio\" {...register('radio')} value=\"1\" /></span>\n  <span class=\"token comment\">// element name값을 fields로 관리</span>\n  <span class=\"token keyword\">let</span> field <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>_fields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> disabledIsDefined <span class=\"token operator\">=</span> <span class=\"token function\">isBoolean</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// register 실행 후에 _fileds에서 name, mount: true, options값을 세팅</span>\n  <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>_fields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>field <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    _f<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>field <span class=\"token operator\">&amp;&amp;</span> field<span class=\"token punctuation\">.</span>_f <span class=\"token operator\">?</span> field<span class=\"token punctuation\">.</span>_f <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> ref<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      mount<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>options<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 마운트된 name값을 관리</span>\n  _names<span class=\"token punctuation\">.</span>mount<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 이미 element name이 있는경우</span>\n  <span class=\"token comment\">//   &lt;input type=\"radio\" {...register('radio')} value=\"1\" /></span>\n  <span class=\"token comment\">//   &lt;input type=\"radio\" {...register('radio')} value=\"2\" /></span>\n  <span class=\"token comment\">//   &lt;input type=\"radio\" {...register('radio')} value=\"3\" /></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">_updateDisabledField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      field<span class=\"token punctuation\">,</span>\n      disabled<span class=\"token operator\">:</span> options<span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">updateValidAndValue</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p>_updateDisabledField: disabled 속성이 있는 경우에 field를 업데이트 해주는 함수</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// _updateDisabledField</span>\n<span class=\"token keyword\">const</span> _updateDisabledField<span class=\"token operator\">:</span> Control<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token string\">'_updateDisabledField'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  disabled<span class=\"token punctuation\">,</span>\n  name<span class=\"token punctuation\">,</span>\n  field<span class=\"token punctuation\">,</span>\n  fields<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// disabled 속성이 있는 경우 element값을 undefine로 채운다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isBoolean</span><span class=\"token punctuation\">(</span>disabled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> disabled\n      <span class=\"token operator\">?</span> <span class=\"token keyword\">undefined</span>\n      <span class=\"token operator\">:</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>\n          _formValues<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          <span class=\"token function\">getFieldValue</span><span class=\"token punctuation\">(</span>field <span class=\"token operator\">?</span> field<span class=\"token punctuation\">.</span>_f <span class=\"token operator\">:</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>fields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>_formValues<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">updateTouchAndDirty</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>_updateValid: form의 유효성을 여부를 얻어와서 업데이트 해주는 함수</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">_updateValid</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>shouldUpdateValid<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// form 전체 유효한 경우, 강제 유효성 검증을 해야할 경우</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>_proxyFormState<span class=\"token punctuation\">.</span>isValid <span class=\"token operator\">||</span> shouldUpdateValid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// resolver가 있는경우</span>\n    <span class=\"token keyword\">const</span> isValid <span class=\"token operator\">=</span> _options<span class=\"token punctuation\">.</span>resolver\n      <span class=\"token operator\">?</span> <span class=\"token function\">isEmptyObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">_executeSchema</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">:</span> <span class=\"token keyword\">await</span> <span class=\"token function\">executeBuiltInValidation</span><span class=\"token punctuation\">(</span>_fields<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isValid <span class=\"token operator\">!==</span> _formState<span class=\"token punctuation\">.</span>isValid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      _subjects<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        isValid<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>updateValidAndValue: 값을 업데이트하고 유효성을 체크하는 함수</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// updateValidAndValue</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateValidAndValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  name<span class=\"token operator\">:</span> InternalFieldName<span class=\"token punctuation\">,</span>\n  shouldSkipSetValueAs<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n  value<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span>\n  ref<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Ref<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// element에 name 키값으로 내부의 _fields 값을 얻어옴</span>\n  <span class=\"token keyword\">const</span> field<span class=\"token operator\">:</span> Field <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>_fields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 초기에 값을 얻어오는 로직</span>\n    <span class=\"token keyword\">const</span> defaultValue <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>\n      _formValues<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      <span class=\"token function\">isUndefined</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>_defaultValues<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> value<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 초기값 X or defaultChecked(radio, checkbox)</span>\n    <span class=\"token comment\">// setValue 무시여부</span>\n    <span class=\"token function\">isUndefined</span><span class=\"token punctuation\">(</span>defaultValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span>\n    <span class=\"token punctuation\">(</span>ref <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>ref <span class=\"token keyword\">as</span> HTMLInputElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>defaultChecked<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span>\n    shouldSkipSetValueAs\n      <span class=\"token operator\">?</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>\n          _formValues<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          shouldSkipSetValueAs <span class=\"token operator\">?</span> defaultValue <span class=\"token operator\">:</span> <span class=\"token function\">getFieldValue</span><span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">.</span>_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">:</span> <span class=\"token function\">setFieldValue</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> defaultValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 마운트될 경우 유효성 체크하도록 처리</span>\n    _state<span class=\"token punctuation\">.</span>mount <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">_updateValid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>updateTouchAndDirty: field값이 변경될 경우 isDirty, dirtyFields가 업데이트 해주는 함수</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> updateTouchAndDirty <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  name<span class=\"token operator\">:</span> InternalFieldName<span class=\"token punctuation\">,</span>\n  fieldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span>\n  isBlurEvent<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n  shouldDirty<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n  shouldRender<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>\n  Pick<span class=\"token operator\">&lt;</span>FormState<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dirtyFields'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'isDirty'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'touchedFields'</span><span class=\"token operator\">></span>\n<span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> shouldUpdateField <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> isPreviousDirty <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> output<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>FormState<span class=\"token operator\">&lt;</span>TFieldValues<span class=\"token operator\">>></span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isBlurEvent <span class=\"token operator\">||</span> shouldDirty<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 폼 전체 상태값 isDirty이 true일 경우에만 dirty가 세팅된다.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>_proxyFormState<span class=\"token punctuation\">.</span>isDirty<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      isPreviousDirty <span class=\"token operator\">=</span> _formState<span class=\"token punctuation\">.</span>isDirty<span class=\"token punctuation\">;</span>\n      _formState<span class=\"token punctuation\">.</span>isDirty <span class=\"token operator\">=</span> output<span class=\"token punctuation\">.</span>isDirty <span class=\"token operator\">=</span> <span class=\"token function\">_getDirty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      shouldUpdateField <span class=\"token operator\">=</span> isPreviousDirty <span class=\"token operator\">!==</span> output<span class=\"token punctuation\">.</span>isDirty<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> isCurrentFieldPristine <span class=\"token operator\">=</span> <span class=\"token function\">deepEqual</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>_defaultValues<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      fieldValue<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    isPreviousDirty <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>_formState<span class=\"token punctuation\">.</span>dirtyFields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// setValue를 통해서 shouldDirty값이 true일 경우 dirtyfields가 호출되고</span>\n    <span class=\"token comment\">// 코드를 통해서 업데이트 할 경우 isDirty, dirtyFields값이 상이할 수 있다.</span>\n    isCurrentFieldPristine\n      <span class=\"token operator\">?</span> <span class=\"token function\">unset</span><span class=\"token punctuation\">(</span>_formState<span class=\"token punctuation\">.</span>dirtyFields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">:</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>_formState<span class=\"token punctuation\">.</span>dirtyFields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    output<span class=\"token punctuation\">.</span>dirtyFields <span class=\"token operator\">=</span> _formState<span class=\"token punctuation\">.</span>dirtyFields<span class=\"token punctuation\">;</span>\n    shouldUpdateField <span class=\"token operator\">=</span>\n      shouldUpdateField <span class=\"token operator\">||</span>\n      <span class=\"token punctuation\">(</span>_proxyFormState<span class=\"token punctuation\">.</span>dirtyFields <span class=\"token operator\">&amp;&amp;</span>\n        isPreviousDirty <span class=\"token operator\">!==</span> <span class=\"token operator\">!</span>isCurrentFieldPristine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBlurEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> isPreviousFieldTouched <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>_formState<span class=\"token punctuation\">.</span>touchedFields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isPreviousFieldTouched<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>_formState<span class=\"token punctuation\">.</span>touchedFields<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> isBlurEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      output<span class=\"token punctuation\">.</span>touchedFields <span class=\"token operator\">=</span> _formState<span class=\"token punctuation\">.</span>touchedFields<span class=\"token punctuation\">;</span>\n      shouldUpdateField <span class=\"token operator\">=</span>\n        shouldUpdateField <span class=\"token operator\">||</span>\n        <span class=\"token punctuation\">(</span>_proxyFormState<span class=\"token punctuation\">.</span>touchedFields <span class=\"token operator\">&amp;&amp;</span>\n          isPreviousFieldTouched <span class=\"token operator\">!==</span> isBlurEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  shouldUpdateField <span class=\"token operator\">&amp;&amp;</span> shouldRender <span class=\"token operator\">&amp;&amp;</span> _subjects<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>output<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> shouldUpdateField <span class=\"token operator\">?</span> output <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"inside-resolver\" style=\"position:relative;\"><a href=\"#inside-resolver\" aria-label=\"inside resolver permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>inside resolver</h1>\n<h2 id=\"resolver-summary\" style=\"position:relative;\"><a href=\"#resolver-summary\" aria-label=\"resolver summary permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>resolver summary</h2>\n<p>각 필드별로 builtin schema(register: required, min, max, minLength, maxLength.., control: rule)를 통해서 유효성 검증을 하는게 가능하지만, resolver를 통해서 object schema 사용 할 경우 schema를 하나로 통합해서 관리가 가능하며, 각 schema plugin 특성에 맞게 확장이 가능하기 때문에 react-hook-form resolver를 사용하기도 합니다.</p>\n<p><strong>Usage example(사용예제)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// resolver: 선호하는 스키마 라이브러리의 유효성 검증 로직 통합을 위해서 사용</span>\n<span class=\"token comment\">// context: 스키마 라이브러리에서 사용하기 위한 전역 객체</span>\n<span class=\"token comment\">// getResolverOptions: resolver options 값을 주입해주기 위한 함수</span>\n\n<span class=\"token comment\">// builtin schema 사용</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span>onSubmit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n    <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'firstName'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>firstName<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>errors<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">firstName error</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// resolver schema 사용(yup 사용 예)</span>\n<span class=\"token keyword\">const</span> validationSchema <span class=\"token operator\">=</span> yup\n  <span class=\"token punctuation\">.</span><span class=\"token function\">object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n      firstName<span class=\"token operator\">:</span> yup\n        <span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">required</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token string\">'$type'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">,</span> schema<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token function\">required</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'exclusivelyRequiredOne'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'exclusivelyRequiredTwo'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">required</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> dynamicValue <span class=\"token operator\">=</span> condition <span class=\"token operator\">?</span> <span class=\"token string\">'one'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  control<span class=\"token punctuation\">,</span>\n  register<span class=\"token punctuation\">,</span>\n  handleSubmit<span class=\"token punctuation\">,</span>\n  formState<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> errors <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useForm</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// resolver: 선호하는 스키마 라이브러리의 유효성 검증 로직 통합을 위해서 사용</span>\n  resolver<span class=\"token operator\">:</span> <span class=\"token function\">yupResolver</span><span class=\"token punctuation\">(</span>validationSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  mode<span class=\"token operator\">:</span> mode <span class=\"token keyword\">as</span> <span class=\"token keyword\">keyof</span> ValidationMode<span class=\"token punctuation\">,</span>\n  context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'one'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span>onSubmit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'firstName'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>firstName<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>errors<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">firstName error</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>resolver 설명</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6df74196b27b3416f1cfdcab1996dd7d/432df/Untitled1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.671875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVR42n2T6a6CQAyFef8n5BdLCEFEUZBVwd58vTnEfZJDS6dzus0EbdvaL5zP5yc0TeN25Cd78IsMp67rbBxHm+fZjsej5XnuOJ1ObmOv73snvVwu/4T8IDFA8pjF7XYz1v1+t3VdN190wFqWxYPVdW0BkTjIT1VV7iwbIAtIOUBAMpqmyTM/HA42DINdr9etdCcEcRxbGIZWFIUfxCZyHCUJDJF02bceYijL0tI0tSRJLMuyzel1KBqEgn0dyn6/92gYIUdXP5GUBfCjkiiK3I9hYKd8JRCg7HY77x86JaNDioOGouaTHXv0TYvhbBmi0HBFUE8hBRyEFAk02cf1RMiHJqsn6LoCSByVtW4BpWKnXPQ3Qg6KRBv0jt5wgCD6F/CRzjXSYwiUgW7667NDqvGQC8rubShkppK/Pb9P0FV5BIR/u5PjIIF0mQsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6df74196b27b3416f1cfdcab1996dd7d/4fae8/Untitled1.webp 256w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/2bf0f/Untitled1.webp 512w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/d71bc/Untitled1.webp 1024w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/f3efb/Untitled1.webp 1536w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/0cc5a/Untitled1.webp 1832w\"\n              sizes=\"(max-width: 1024px) 100vw, 1024px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6df74196b27b3416f1cfdcab1996dd7d/e3135/Untitled1.png 256w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/06341/Untitled1.png 512w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/42a19/Untitled1.png 1024w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/e8464/Untitled1.png 1536w,\n/static/6df74196b27b3416f1cfdcab1996dd7d/432df/Untitled1.png 1832w\"\n            sizes=\"(max-width: 1024px) 100vw, 1024px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6df74196b27b3416f1cfdcab1996dd7d/42a19/Untitled1.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>직접 custom resolver 구현한다면..</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Resolver<span class=\"token punctuation\">,</span> FieldError <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-hook-form'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">get</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash/get'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FormData</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  city<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  street<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">validateLength</span><span class=\"token punctuation\">(</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  errors<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> FieldError<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>value <span class=\"token operator\">||</span> value<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>errors<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        type<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">min-length-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>minLength<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        message<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The field \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\" must be at least </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>minLength<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> chars</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> errors<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> customResolver<span class=\"token operator\">:</span> Resolver<span class=\"token operator\">&lt;</span>FormData<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  values<span class=\"token punctuation\">,</span>\n  _context<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> names <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> errors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Validate only changed fields</span>\n    errors <span class=\"token operator\">=</span> names<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token function\">validateLength</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> acc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Validate all fields on submit event</span>\n    errors <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">validateLength</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> acc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> values<span class=\"token punctuation\">,</span> errors <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  register<span class=\"token punctuation\">,</span>\n  handleSubmit<span class=\"token punctuation\">,</span>\n  formState<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> errors <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useForm</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>FormData<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  mode<span class=\"token operator\">:</span> <span class=\"token string\">'onChange'</span><span class=\"token punctuation\">,</span>\n  resolver<span class=\"token operator\">:</span> customResolver<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>react-hook-form에서 지원해주는 resovler(총 14개)</li>\n</ul>\n<p><a href=\"https://github.com/react-hook-form/resolvers/blob/master/yup/src/yup.ts\" target=\"_blank\" rel=\"nofollow\">https://github.com/react-hook-form/resolvers#yup</a></p>\n<ul>\n<li>react-hook-form 지원하는 validation library 비교\n<ul>\n<li>ajv\n<ul>\n<li>AJV는 JSON 스키마를 사용하여 데이터의 유효성을 검사하며, 이는 다양한 언어로 수행될 수 있습니다.</li>\n<li>Github에 별이 12,000개에 달하고 매주 npm 다운로드가 8,500만 건에 달하는 대규모 커뮤니티입니다.</li>\n<li>AJV는 현재 json-schema-benchmarks에 따르면 가장 빠른 json 스키마 유효성 검사기 라이브러리입니다.</li>\n</ul>\n</li>\n<li>joi\n<ul>\n<li>Github에서 약 19,000개의 스타를 보유한 최대 규모의 커뮤니티 및 지원을 제공합니다.</li>\n<li>번들 크기는 약 149kb로 축소되었습니다.</li>\n<li>서버측을 위해 더 많이 구축되었으며 서버측 작업 시 권장됩니다.</li>\n<li>Joi는 매우 큰 API를 가지고 있어 문서화가 잘 되어 있어 학습 곡선이 단축됩니다.</li>\n</ul>\n</li>\n<li>yup\n<ul>\n<li>Schema는 Joi와 유사하며, 비슷한 방식을 가지고 있습니다.</li>\n<li>주로 클라이언트 측에서 사용되며 클라이언트 측 유효성 검사를 지원합니다.</li>\n<li>~60kb의 번들 크기가 축소되었습니다. 이는 AJV 및 Joi보다 낮지만 Zod보다 큽니다.</li>\n<li>예, 정적 유형 추론을 지원하지만 반드시 TypeScript와 일치할 필요는 없습니다.</li>\n</ul>\n</li>\n<li>zod\n<ul>\n<li>zod는 정적 유형 추론을 지원하며 TypeScript와 잘 작동합니다.</li>\n<li>번들 크기는 약 45kb입니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"inside-resolver-1\" style=\"position:relative;\"><a href=\"#inside-resolver-1\" aria-label=\"inside resolver 1 permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>inside resolver</h2>\n<h2 id=\"inside-resolver-initialize\" style=\"position:relative;\"><a href=\"#inside-resolver-initialize\" aria-label=\"inside resolver initialize permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>inside resolver initialize</h2>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> validationSchema <span class=\"token operator\">=</span> yup\n  <span class=\"token punctuation\">.</span><span class=\"token function\">object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n      firstName<span class=\"token operator\">:</span> yup\n        <span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">required</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token string\">'$type'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">,</span> schema<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token function\">required</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'exclusivelyRequiredOne'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'exclusivelyRequiredTwo'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">required</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  control<span class=\"token punctuation\">,</span>\n  register<span class=\"token punctuation\">,</span>\n  handleSubmit<span class=\"token punctuation\">,</span>\n  formState<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> errors <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useForm</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  resolver<span class=\"token operator\">:</span> <span class=\"token function\">yupResolver</span><span class=\"token punctuation\">(</span>validationSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  mode<span class=\"token operator\">:</span> mode <span class=\"token keyword\">as</span> <span class=\"token keyword\">keyof</span> ValidationMode<span class=\"token punctuation\">,</span>\n  context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'one'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// react-hook-form/resolvers/blob/master/yup/src/yup.ts</span>\n<span class=\"token comment\">// useForm에 yupResolver 함수 호출 후 기본 인자값을 세팅</span>\n<span class=\"token comment\">// schema: 사용자가 선언한 외부 통합을 위한 라이브러리 schema</span>\n<span class=\"token comment\">// schemaOptions: 외부 라이브러리 초기 옵션</span>\n<span class=\"token comment\">// resolverOptions: 동기/비동기 모드</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> yupResolver<span class=\"token operator\">:</span> <span class=\"token function-variable function\">Resolver</span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>schema<span class=\"token punctuation\">,</span> schemaOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> resolverOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>schemaOptions<span class=\"token punctuation\">.</span>context <span class=\"token operator\">&amp;&amp;</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// eslint-disable-next-line no-console</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">\"You should not used the yup options context. Please, use the 'useForm' context object instead\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> schema<span class=\"token punctuation\">[</span>\n        resolverOptions<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">'sync'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'validateSync'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'validate'</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>\n        values<span class=\"token punctuation\">,</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> abortEarly<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> schemaOptions<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> context <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 브라우저 기본 유효성 검사를 사용할지 여부를 설정이 있는경우 네이티브 유효성도 같이 검증</span>\n      options<span class=\"token punctuation\">.</span>shouldUseNativeValidation <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">validateFieldsNatively</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        values<span class=\"token operator\">:</span> result<span class=\"token punctuation\">,</span>\n        errors<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>e<span class=\"token punctuation\">.</span>inner<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        values<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        errors<span class=\"token operator\">:</span> <span class=\"token function\">toNestError</span><span class=\"token punctuation\">(</span>\n          <span class=\"token function\">parseErrorSchema</span><span class=\"token punctuation\">(</span>\n            e<span class=\"token punctuation\">,</span>\n            <span class=\"token operator\">!</span>options<span class=\"token punctuation\">.</span>shouldUseNativeValidation <span class=\"token operator\">&amp;&amp;</span>\n              options<span class=\"token punctuation\">.</span>criteriaMode <span class=\"token operator\">===</span> <span class=\"token string\">'all'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          options<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"inside-resolver-validation-check\" style=\"position:relative;\"><a href=\"#inside-resolver-validation-check\" aria-label=\"inside resolver validation check permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>inside resolver validation check</h2>\n<ul>\n<li>호출 동선\n<ul>\n<li>unregister, triggeer, resetField > _updateValid > _executeSchema</li>\n<li>register > updateValidAndValue > _updateValid > _executeSchema</li>\n<li>onChange, handleSubmit, useFieldArray(useEffect) > _executeSchema</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// unregister, triggerm, resetField > _updateValid > _executeSchema</span>\n<span class=\"token comment\">// register > updateValidAndValue > _updateValid > _executeSchema</span>\n<span class=\"token comment\">// onChange, handleSubmit, useFieldArray(useEffect) > _executeSchema</span>\n<span class=\"token keyword\">const</span> _executeSchema <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\n  name<span class=\"token operator\">?</span><span class=\"token operator\">:</span> InternalFieldName<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// name 값이 없는경우 전체 스키마를 검사</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  _options<span class=\"token punctuation\">.</span>resolver<span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>\n    _formValues <span class=\"token keyword\">as</span> TFieldValues<span class=\"token punctuation\">,</span> <span class=\"token comment\">// { fieldName: fieldValue -> firstName: HONG)</span>\n    _options<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">,</span> <span class=\"token comment\">// resolver schema에 주입을 위한 용도</span>\n    <span class=\"token function\">getResolverOptions</span><span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">// resolver options 값을 주입해주기 위한 함수</span>\n      name <span class=\"token operator\">||</span> _names<span class=\"token punctuation\">.</span>mount<span class=\"token punctuation\">,</span> <span class=\"token comment\">// name 있는경우: 특정 필드, _names.mount: 마운트 된 필드에 키값을 배열로 넘김</span>\n      _fields<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 마운트된 필드의 dom 엘리먼트, 네임을 저장하는 set 객체</span>\n      _options<span class=\"token punctuation\">.</span>criteriaMode<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 기준모드: 모든 유효성 검사 오류를 전체 표시, 한번에 하나씩 표기</span>\n      _options<span class=\"token punctuation\">.</span>shouldUseNativeValidation<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 브라우저 기본 유효성 검사를 사용할지 여부를 설정합니다. false로 설정하면 React Hook Form의 내장 유효성 검사를 사용합니다.</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>","frontmatter":{"title":"react-hook-form inside code","date":"2023.11.26","category":"개발","tags":["form"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#form-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1\">Form 객체 생성</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B5%9C%EC%B4%88-1%ED%9A%8C-form-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1-%EB%A1%9C%EC%A7%81createformcontrol\">최초 1회 Form 객체 생성 로직(createFormControl)</a></p>\n<ul>\n<li><a href=\"#register\">register</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#inside-resolver\">inside resolver</a></p>\n<ul>\n<li><a href=\"#resolver-summary\">resolver summary</a></li>\n<li><a href=\"#inside-resolver-1\">inside resolver</a></li>\n<li><a href=\"#inside-resolver-initialize\">inside resolver initialize</a></li>\n<li><a href=\"#inside-resolver-validation-check\">inside resolver validation check</a></li>\n</ul>\n</li>\n</ul>"}}]}},"pageContext":{"slug":"/blog/2023/11/2023-11-26-react-hook-form-inside/","previous":{"fields":{"slug":"/blog/2024/01/2024-01-14-cors/"},"frontmatter":{"title":"CORS(교차 출처 리소스 공유)"}},"next":{"fields":{"slug":"/blog/2023/09/2023-09-17-gatsby-v5/"},"frontmatter":{"title":"Gatsby(v5)"}}}},"staticQueryHashes":["3940312266","4157816502"],"slicesMap":{}}