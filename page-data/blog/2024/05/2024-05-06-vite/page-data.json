{"componentChunkName":"component---src-components-templates-post-template-tsx","path":"/blog/2024/05/2024-05-06-vite/","result":{"data":{"site":{"siteMetadata":{"title":"홍승아 기술 블로그","description":"홍승아 기술 블로그에 오신걸 환영합니다.","author":"홍승아","type":"website","siteUrl":"https://seungahhong.github.io","social":{"facebook":"https://www.facebook.com/people/%ED%99%8D%EC%8A%B9%EC%95%84/100002349562000/","github":"https://github.com/seungahhong","notion":"https://material-debt-c1c.notion.site/daa60481e37840ea9e1b7e1b12269942","linkedin":"https://www.linkedin.com/in/seungahhong/"}}},"allFile":{"edges":[{"node":{"name":"facebook","publicURL":"/static/b185e9b61bb465d92b14ed1c9a9ded61/facebook.svg","childImageSharp":null}},{"node":{"name":"github","publicURL":"/static/4a6687a74051de2b3536e95d0b6c992a/github.svg","childImageSharp":null}},{"node":{"name":"linkedin","publicURL":"/static/3dc9e0d0f748678205218f1c72941cc2/linkedin.svg","childImageSharp":null}},{"node":{"name":"notion","publicURL":"/static/19b0f81386812ed2f2f3a7aea202935f/notion.svg","childImageSharp":null}},{"node":{"name":"background","publicURL":"/static/77f5c833c2343c992fd263c780495905/background.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAjABQDASIAAhEBAxEB/8QAGwABAAEFAQAAAAAAAAAAAAAAAAcEBggJCgX/xAAXAQEBAQEAAAAAAAAAAAAAAAAHBQYI/9oADAMBAAIQAxAAAAG5fRl7U4Ddg9LblwJg9mPTTxjbDu2KyVVZmqWuNuZyEMin/wD/xAAcEAADAQEBAAMAAAAAAAAAAAADBAUGAgcAARb/2gAIAQEAAQUCocsCqedUserp/wBPHH8jrdcIUUCzly6d9kvsIW5VVVRpQmuEKvdas00RPa7ztxVPfbJZDS1qT9pMnf30lSbAH//EACYRAAIBAgYBBAMAAAAAAAAAAAECAwQRAAUGEiEiURUjJDEyQWH/2gAIAQMBAT8Bzv5dFVU/uOqwNDUzQtZ5I5I5Cw3LwrSlW3MlnQv1Kk3I0npF+3q1dz5y/MOLWG3lr9fxH8Axnea1WXZnSUNRX08GXSVirDBIIxJJU7WXsZS14nXmMohJkSVS0bKRMuvKG3WPLI1+lSSirEkCg2G9UfarW5IH0f0Dxitmmk1PvklkdzqqMl3dmYlaqqRTuJJuqkqPCmw4xFGhjQlEJKgklQST5Jtj/8QAJREAAgEDAwQCAwAAAAAAAAAAAQIDBBESBSEiAAYTMRRRIzJB/9oACAECAQE/Ae1JFnkdPKKaSJ6b42KoyySCQKZGV8hIo2Zl2BV25C11v3Iu2NGP6cVpCtzYkg7fsTf0PfrrQaWOv0RsKKSerpaYg1NN5eNOHGCgxGLGpSzK4Zx+PBhlkTEmga9EiRqlVZERR4a+hMQsq8YzJBmUU8VyubD217mijSPRI0jRY0GjiyIoVReGFjxUAbnc/Z36lVfI/Fff0Ov/xAAnEAACAgIBAwMFAQEAAAAAAAACAwEEBRIRABMhFCIjBhUxMkEzQv/aAAgBAQAGPwK6haou0UFLaxMVvXbjsnEOhRDx/mLSZA8SJLIp0kJiOIN1ux6qp3Jp4744r3LUEJahcOB3aLI+NZiLHCPCzaXtL5N0tbAtaonVAYszGPawGWlkJ6wMz7Y8TE/mZ6mMuEVFgtoMKzPaBkysglEsOQEhktpAIOC4ITVO4dZB5bxMXAq1ZmDBczEtdLmP/bxAQCBDUjOJZ3Q7fBMbcRzZkvlYwmbunWC7xbq2nuc88z+0e7meeeqH1LFmweGysIpWVy9p1aOTAfEwki7SBtpiHrKBHl6nrjzrzSr/AFLinRTy2O9fi6EZ6vVX6w8hX+2NYu/DAxmSTDoKiu8sStLddMlxsA9W7f1JlalDLcJr2KmftprZJA1lClK2AK0gYAoAFbljK3DHcAzgtuk2LnpTwaqbrZ22optGL2MkbaeHXEvTVf2YYyswEy8LSAFJAZj04U/eJydx9Aq966JhaJ+NriijaymQkPZXfdgspkBSveWuawobzwFC5coY7IFm6isusKWU7I48GbUjpPQ+u0q9grNGxfJMTCxC8vQeJ2K4Ny494VnenrqIuEJUGpQK0DqkfdOxFAbmXuMiLz0JTPMzERPMDPjYv5Mcfz+dQAEmY8T8tSo8vKw/7ehh6x+BHbUY8DER1//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/IbjsjUQRDOG9yM8H6LHI1AF3hlR4BZJXKJMAACir473dyInWJOxmpkMQVQyHcnAdNamkCXWEAXfdQjTuahHixtYFU0pQAeZZgBWyPe+FR7akoVqS8vRqyotR0D6hilumzYosaSmxtobuIHifhRG0qHV6ADEvZwQQODoHg26va3vwzkwOFw+G/9oADAMBAAIAAwAAABCXI3JwL//EABgRAQEBAQEAAAAAAAAAAAAAAAERIQBR/9oACAEDAQE/EHVZhUihLRqkO8CCpiJbbqCaOqvbbsrimolDvsLCAEV0QgdoxxETJNt6DzBak1rJJOTOQCBVCVXVVV17/8QAGhEBAQEBAAMAAAAAAAAAAAAAAREhADFhkf/aAAgBAgEBPxCdZEzDipJRYSdhRs8DCKDVDaK1Cpytj88Ix2j+p65EH8wCDqRIkDLkWSkDjoBM4JqrvLRZWqsrmrPR87//xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPxBCvOwQu7PBe3aLTISCyfpEzgoKtriaxgWDxMzHb6d+Bd6TsASFFvYtFa9FIPaEtI3sbizgSsxk2P2s9d12ptjbwWm2LYGMjAp2NKChKJmGwzNWyYEVqx80qLWAlWnhTgQBmZsmRhBMOyzEJshRGqitlRChJ6SsgOcmYx4ScH8i4H//2Q=="},"images":{"fallback":{"src":"/static/77f5c833c2343c992fd263c780495905/c2a83/background.jpg","srcSet":"/static/77f5c833c2343c992fd263c780495905/9330e/background.jpg 139w,\n/static/77f5c833c2343c992fd263c780495905/53b4d/background.jpg 278w,\n/static/77f5c833c2343c992fd263c780495905/c2a83/background.jpg 555w","sizes":"(min-width: 555px) 555px, 100vw"},"sources":[{"srcSet":"/static/77f5c833c2343c992fd263c780495905/3ee68/background.webp 139w,\n/static/77f5c833c2343c992fd263c780495905/d0ff1/background.webp 278w,\n/static/77f5c833c2343c992fd263c780495905/21b9c/background.webp 555w","type":"image/webp","sizes":"(min-width: 555px) 555px, 100vw"}]},"width":555,"height":961}}}}]},"allMarkdownRemark":{"edges":[{"node":{"html":"<h1 id=\"vite를-사용해야-하는-이유\" style=\"position:relative;\"><a href=\"#vite%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"vite를 사용해야 하는 이유 permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vite를 사용해야 하는 이유</h1>\n<h3 id=\"기존-모듈-번들러-문제점\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%A1%B4-%EB%AA%A8%EB%93%88-%EB%B2%88%EB%93%A4%EB%9F%AC-%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"기존 모듈 번들러 문제점 permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기존 모듈 번들러 문제점</h3>\n<ul>\n<li>\n<p>브라우저에서 Native ESM 방식을 지원하기 전까지는 Javascript 모듈화를 브라우저 레벨에서 진행할 수 없었고, 해당 소스 모듈을 브라우저에서 지원하기 위해서 require/IIFE/import,expor를 통한 모듈화 문법을 이용하여서 여러개의 파일로 합쳐주거나 의미 있는 단위로 묶어주는 기능을 번들링이라고 하며, 현재는 <a href=\"https://webpack.js.org/\" target=\"_blank\" rel=\"nofollow\"><strong>Webpack</strong></a>, <a href=\"https://rollupjs.org/\" target=\"_blank\" rel=\"nofollow\"><strong>Rollup</strong></a> 그리고 <a href=\"https://parceljs.org/\" target=\"_blank\" rel=\"nofollow\"><strong>Parcel</strong></a>을 도구들이 지원하고 있습니다.</p>\n</li>\n<li>\n<p>하지만 애플리케이션이 점점 더 발전함에 따라서 JS 도구들의 성능 병목 현상이 발생, HMR 사용하더라도 변경된 파일 적용 시 수초가 걸려서 개발자 생산성을 떨어뜨는 문제가 발생하고 있습니다.</p>\n</li>\n<li>\n<p>ESM(ECMAScript Modules)</p>\n<ul>\n<li>ESM은 모듈화 문법인 import, export를 별도의 도구 없이 브라우저 자체에서 소화해 낼 수 있는 모듈 방식을 의미한다. 만약 아래와 같은 코드를 웹팩과 같은 번들러 없이 브라우저에서 실행하면 에러가 발생합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// app.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> sum <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'test.js'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">&lt;</span>script src<span class=\"token operator\">=</span>\"app<span class=\"token punctuation\">.</span>js<span class=\"token operator\">></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc072cc95e4793cd6cbc34f0d6c8295a/11824/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.6875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVR42iXKyREAIAhDUfuvzxXHtQnwFBFvb5LvpBZwCpDZIZUglNUDZ6/vPe3jHHVT9waO3hqzNq/lkmy7p3xJtzP3jrAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bc072cc95e4793cd6cbc34f0d6c8295a/4fae8/Untitled.webp 256w,\n/static/bc072cc95e4793cd6cbc34f0d6c8295a/2bf0f/Untitled.webp 512w,\n/static/bc072cc95e4793cd6cbc34f0d6c8295a/d71bc/Untitled.webp 1024w,\n/static/bc072cc95e4793cd6cbc34f0d6c8295a/6d1d1/Untitled.webp 1298w\"\n              sizes=\"(max-width: 1024px) 100vw, 1024px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bc072cc95e4793cd6cbc34f0d6c8295a/e3135/Untitled.png 256w,\n/static/bc072cc95e4793cd6cbc34f0d6c8295a/06341/Untitled.png 512w,\n/static/bc072cc95e4793cd6cbc34f0d6c8295a/42a19/Untitled.png 1024w,\n/static/bc072cc95e4793cd6cbc34f0d6c8295a/11824/Untitled.png 1298w\"\n            sizes=\"(max-width: 1024px) 100vw, 1024px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bc072cc95e4793cd6cbc34f0d6c8295a/42a19/Untitled.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n예전에는 브라우저가 import와 export를 해석할 수 있는 능력이 없었지만 이제는 다음과 같이 속성을 추가하면 브라우저에서 import와 export를 소화할 수 있게 되었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token operator\">&lt;</span>script type<span class=\"token operator\">=</span><span class=\"token string\">\"module\"</span> src<span class=\"token operator\">=</span>\"app<span class=\"token punctuation\">.</span>mjs<span class=\"token operator\">></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"vite-특징\" style=\"position:relative;\"><a href=\"#vite-%ED%8A%B9%EC%A7%95\" aria-label=\"vite 특징 permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vite 특징</h3>\n<ul>\n<li>\n<p>콜드 스타트 방식의 개발 서버 구동에 대한 성능 개선\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6bc1dde5ce6007604a2d0d4be9767b82/06341/Untitled1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42o1Qy0rDQBTNP7lwZVLcuDIN/oCrghDRVcFmUxWkzQfoN/gD7hTFRRdCu/FRFNuFCk2mmUwmj0kymYeTWkVw4+VyOffMPedyR5P/CM7FFxBC/Oa1v6MIhZ7nlWX5M52lxAcggJCQHGPs+z4hpBYr14Jxruy/EydpEKKCVmzRUi5AlAVRBKN4HqUIRwAAHKe1WHnTBFVxQGNYxlBVliFBME/CKqnbAgdJOGcEKz7BqKgqxphyVkJNMvrgbl+1Vgd7jaljeF3jbl+/tfUbW7/cWXs5MMCR/thuXNuNQWtlet6bfMyex2MIA865Jhh9Pd0dtjeeDptvJ6bvmpPj5sgxhx1z5GzO+pbnWu+9rfuuNe6sg4uzXEhaFnmeq/3a4lfUdUwKdXqdgtd4kVzwJVljoZ5UXYaU8hOviHHk+1O7MAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6bc1dde5ce6007604a2d0d4be9767b82/4fae8/Untitled1.webp 256w,\n/static/6bc1dde5ce6007604a2d0d4be9767b82/2bf0f/Untitled1.webp 512w\"\n              sizes=\"(max-width: 512px) 100vw, 512px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6bc1dde5ce6007604a2d0d4be9767b82/e3135/Untitled1.png 256w,\n/static/6bc1dde5ce6007604a2d0d4be9767b82/06341/Untitled1.png 512w\"\n            sizes=\"(max-width: 512px) 100vw, 512px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6bc1dde5ce6007604a2d0d4be9767b82/06341/Untitled1.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>Dependencies: node_modulesd와 같이 내용이 바뀌지 않는 소스코드에 대해서 esbuild 이용한 사전 번들링 기능 제공</p>\n<ul>\n<li>\n<p>esbuild는 webpack, parcel과 같은 기존의 번들러 대비 10-100배 빠른 속도를 제공</p>\n</li>\n<li>\n<p>esbuild 로 node_modules 의 모든 패키지를 사전 번들링하여 아래와 같이 serving 하고 캐시</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Dependencies package import 할 경우</span>\n<span class=\"token keyword\">import</span> dayjs <span class=\"token keyword\">from</span> <span class=\"token string\">'dayjs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// vite esm 지원을 위한 변환/캐싱</span>\n<span class=\"token operator\">/</span>node_modules<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>vite<span class=\"token operator\">/</span>deps<span class=\"token operator\">/</span>dayjs<span class=\"token punctuation\">.</span>js<span class=\"token operator\">?</span>v<span class=\"token operator\">=</span>b09621d8</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>Source code: Native ESM 방식을 적용해서 브라우저가 모듈을 직접 가져오고 변환 및 제공하도록 처리\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a7f43006c1ef4c9aaf9d99dd527173bb/e9bec/Untitled2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.40625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAELUlEQVR42o1VW08bRxi1VKmPlfraf1Sp/6F/oUlVFfqSVoCVKFXjRKkoQYQqJklRISJFtBCH1nFqE2Ns8B0WjK94d+2Znb3Yxmmrnn4ztgNIQenD0bcXz/GZc75v1ucIDsF0ggGbqq3qELyl3llWC5awIIS4FJZlwXVd+GzWhF3PwW7kCQUCXZ/sE4qwmwfqmWjVacFg0WXgnMNxHPiEsGGRkvNgzESLFFrcRJuua0TYJAjWejehbbVpYXv4giv0HA99p4NTQrKaxueRHzGdXlcWnP32HBmtYZydJ7SGW5JqOTaPklgoRlDRj1Cs5+FPPMHDQgSCFklC2xUEWmNb8GwbffLu1HHhOe6AkHEdLatB1QQ/OcHM3hqubgWRq2dRrGUwHn2Euexz2IKBmQz1goVqhoE3bCTrFfyU3cNSPg2DlPpcUnXUimKzfA9aJQRWOsb9XAjX4j9Do2BylR18FXuE+ezvpKANQ6tge5bhz7sMrZiFa7FVfDAbwEfzd5A5qQ8UctpGm8tKCmo1zOyu4up2EJlGERqlPBlfwkL+BdRuTBPNIwuNAw7etHCgNxA63MeLkgZG7TP0kHpReSjIYAt/lPewqEVRNSooEun1xAoeF15SKG/38LXy0IF7MWWuiGXtU8p/O130bQ+J6i6+SDzAdH6dQhmmLEMcQgpgtK7NRinLLqeeExTICJzu+bAPJQFr6wrW/+nDTqcLt9ODp+rgegRPwuuqdwpeh+BdgO06b9DtdkkhqVAjZpSpHsKRIyevjeMhKhBmVdWBNWcjKGi+//FOgc5r/EUWvWlsSSioiYVeUqSKqKmpKp8JRVwiG2gUpV8yHDUdHD9kNzCRWMJ8cRPCsWmWKSUunDPYLqXnEKjS/QicZr5LYcHr419Ch35j6gyzmefwv1pGsBCGLQkdIpSR951B9IKRwW3qMcYvzKpHBOFyBhOpJUyllpE4pl2ZNqZzG5jcWT5T2CLZmXoVyVoF2ZMaDBotZlArtKjXSJkjFZJvXttFuJTDN8klTKaeYKd8CKtJhJl1fB1bxHx+c6AwdFjEe3cm8OHcLbx/dwqb+0X0WA81XUO0fh+Ryiz2GxFw00Hot3Xcvn4Tt298i3RqF42qju9vBhDw38CDe3Owabe+bVL28dPH+PTZL/hkdRE71TI6woPeruPQjEIzX6JmFqgPOeLbcQSDQSw8XEChkIdhGNjY2MDK0xWEw+FByi6x9sgflxq8Rz7KRpeeyYPXFT0FYbl0vDv4dW0NY2NfYnx8DFtbMTqIGQKBAPx+P2ZmZtSnwDf6Hoi3dT8RK1Cb2OR1pVRCKpXE7m4K1WoVJh0UkUgEodAzxGLRwZZHhJdCvtdp9DQN4vgYHXrW7fXUlDSbTUxNTeLKlc9w69Z3A4XyX6QX7wSRGkSg6rnnUm08/grp9J4i/A8ddHwGeBik4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a7f43006c1ef4c9aaf9d99dd527173bb/4fae8/Untitled2.webp 256w,\n/static/a7f43006c1ef4c9aaf9d99dd527173bb/2bf0f/Untitled2.webp 512w,\n/static/a7f43006c1ef4c9aaf9d99dd527173bb/d71bc/Untitled2.webp 1024w,\n/static/a7f43006c1ef4c9aaf9d99dd527173bb/f98dc/Untitled2.webp 1392w\"\n              sizes=\"(max-width: 1024px) 100vw, 1024px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a7f43006c1ef4c9aaf9d99dd527173bb/e3135/Untitled2.png 256w,\n/static/a7f43006c1ef4c9aaf9d99dd527173bb/06341/Untitled2.png 512w,\n/static/a7f43006c1ef4c9aaf9d99dd527173bb/42a19/Untitled2.png 1024w,\n/static/a7f43006c1ef4c9aaf9d99dd527173bb/e9bec/Untitled2.png 1392w\"\n            sizes=\"(max-width: 1024px) 100vw, 1024px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a7f43006c1ef4c9aaf9d99dd527173bb/42a19/Untitled2.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n</li>\n</ul>\n</li>\n<li>\n<p>HMR 성능 개선\n기존 번들러 기반에서는 소스 코드 변경 시 다시 번들링 과정을 다시 수행하다보니 성능이 느려지는 이슈를 Native ESM 방식을 사용하여 변경된 모듈만 교체해서 성능 개선\nHTTP 헤더를 활용하여 페이지 로드 속도 개선(요청 횟수 최소화)</p>\n<ul>\n<li>304 Not Modified: 클라이언트 캐시 사용</li>\n<li>Cache-Control: max-age=31536000, immutalble 이용한 캐시 사용</li>\n</ul>\n</li>\n<li>\n<p>프로덕션 환경 Rollup 사용</p>\n<ul>\n<li>가장 빠른 성능을 자랑하는 esbuild이지만 아쉬운 생태계와 브라우저용 번들링에서는 안정성이 떨어진다는 평가가 있어서 vite에서는 프로덕션 환경에서 Rollup 번들러를 사용(트리 셰이킹, 지연로딩, 파일 분활 등 성능 이점 제공)</li>\n<li>Rollup은 v4에서 파서를 SWC 전환 → Rust 포팅인 Rolldown 만드는 작업을 진행 중이며 개발이 완료된다면 esbuild를 모두 대체 가능(개발/빌드 사이에 불이치 제거 목표)</li>\n<li><a href=\"https://www.youtube.com/watch?v=EKvvptbTx6k\" target=\"_blank\" rel=\"nofollow\">https://www.youtube.com/watch?v=EKvvptbTx6k</a></li>\n</ul>\n</li>\n</ul>\n<h1 id=\"cra-to-vite-migration\" style=\"position:relative;\"><a href=\"#cra-to-vite-migration\" aria-label=\"cra to vite migration permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CRA to Vite Migration</h1>\n<h2 id=\"base\" style=\"position:relative;\"><a href=\"#base\" aria-label=\"base permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>base</h2>\n<ul>\n<li>\n<p><strong>Remove CRA package for Vite</strong>\n기존 CRA 환경에서 사용되는 패키지 삭제\n기존에 설치된 node_modules가 있는경우 폴더 자체를 삭제</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> remove react-scripts react-app-rewired babel-loader webpack-merge tsconfig-paths-webpack-plugin\n\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> node_modules</code></pre></div>\n</li>\n<li>\n<p><strong>Setting the Stage with Vite Installation</strong>\n<strong>vite: 모던 웹 프로젝트 빌드 도구</strong></p>\n<ul>\n<li>@vitejs/plugin-react: @vitejs/plugin-react는 vite에서 React를 사용할 때 필요한 구성을 추가하여 React 애플리케이션의 빠른 개발 및 번들링을 지원</li>\n<li>vite-tsconfig-paths: tsconfig.json 파일에 설정된 경로 별칭을 Vite에서도 적용할 수 있도록 지원. vite-tsconfig-paths를 사용하면 TypeScript 설정에 정의된 경로 별칭이 Vite에서도 인식되어 모듈 경로를 해석할 때 사용 가능</li>\n<li>vite-plugin-svgr\n<ul>\n<li>SVG를 React 컴포넌트로 변환하는 Vite 플러그인</li>\n<li>단, 3.3.0 이후 버전 설치 시 빌드, 타입 에러 발생(3.3.0 사용 시 아래와 같은 svgr을 리액트 컴포넌트로 변경 가능)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">import</span> <span class=\"token punctuation\">{</span> ReactComponent as ChannelLogo <span class=\"token punctuation\">}</span> from <span class=\"token string\">'../../assets/artwork-illust-pm-assign-info-channel-talk.svg'</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>vite-plugin-checker\n<ul>\n<li>vite를 사용하는 프로젝트에서 타입 체크, ESLint, VLS (Volar Language Server) 등을 포함한 여러 검사 기능을 제공하는 플러그인</li>\n<li>비동기로 체크를 하기 때문에 개발 서버 환경 로딩 속도에 영향을 주지 않는 장점이 있다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add vite @vitejs/plugin-react vite-tsconfig-paths vite-plugin-svgr@3.3.0\n\nyarn add vite-plugin-checker -D</code></pre></div>\n</li>\n<li>\n<p><strong>Updating package.json for Vite Commands</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">scripts<span class=\"token string\">\": {\n  \"</span>start<span class=\"token string\">\": \"</span>vite<span class=\"token string\">\",\n  \"</span>build<span class=\"token string\">\": \"</span>vite build\",\n<span class=\"token punctuation\">}</span>,</code></pre></div>\n</li>\n<li>\n<p><strong>Renaming React File Extensions to .jsx or .tsx</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mv</span> src/App.js src/App.jsx\n<span class=\"token function\">mv</span> src/index.ts src/index.tsx</code></pre></div>\n</li>\n<li>\n<p><strong>Move the index.html File</strong></p>\n<ul>\n<li>public 패스의 index.html 삭제하지 않을 경우 vite에서 개발 환경 로딩 시 public/index.html 선 로딩함으로 꼭 루트로 옮겨주세요!!</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mv</span> public/index.html <span class=\"token builtin class-name\">.</span></code></pre></div>\n</li>\n<li>\n<p><strong>Add module script to the bottom of the body tag</strong>\n초기 로딩 시 코드 진입점을 명시해주세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n  {/* others here */}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/src/index.tsx<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n<li>\n<p><strong>Update tsconfig.json</strong>\nisolatedModules 사용이유</p>\n<ul>\n<li><strong>모듈 간의 의존성 격리</strong>: 각 모듈이 서로의 타입에 의존하지 않도록 하여, 컴파일 시 모듈을 개별적으로 처리합니다. 이를 통해 TypeScript의 컴파일 시간이 줄어들 수 있습니다.</li>\n<li><strong>성능 향상</strong>: 독립적으로 모듈을 컴파일하면, 변화가 발생한 모듈만 다시 컴파일되므로 전체 컴파일 속도가 개선됩니다.</li>\n<li><strong>ESM 호환성</strong>: ES 모듈과의 호환성을 높여, 다양한 빌드 도구와의 통합 시 더 나은 결과를 제공합니다.</li>\n<li><strong>검사 오류 방지</strong>: 모든 모듈이 개별적으로 체크되므로, 한 모듈에서의 타입 오류가 다른 모듈에 영향을 미치는 것을 방지할 수 있습니다.\ninclude에 vite.config.js 패스 설정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"extends\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"./tsconfig.extend.json\"</span>,\n  <span class=\"token string\">\"compilerOptions\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"lib\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"dom\"</span>, <span class=\"token string\">\"dom.iterable\"</span>, <span class=\"token string\">\"es2020\"</span><span class=\"token punctuation\">]</span>,\n    <span class=\"token string\">\"target\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"ES6\"</span>,\n    <span class=\"token string\">\"types\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"vite/client\"</span>, <span class=\"token string\">\"react\"</span>, <span class=\"token string\">\"react-dom\"</span>, <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">]</span>,\n    <span class=\"token string\">\"isolatedModules\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token boolean\">true</span> // 추가\n  <span class=\"token punctuation\">}</span>,\n  <span class=\"token string\">\"include\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"./src/**/*\"</span>,\n    <span class=\"token string\">\"vite.config.js\"</span>\n  <span class=\"token punctuation\">]</span>,\n  <span class=\"token string\">\"exclude\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"node_modules\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><strong>Add module html minify</strong>\nCRA 프로젝트에서는 내장된 plugins중에 HtmlWebpackPlugin 통해서 html minify를 해주고 있는데, vite에서 내장이 되어 있지 않아서 직접 설치후에 환경 설정을 추가해줘야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">// Installation\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> vite-plugin-html\n\n// vite.config.js\ncreateHtmlPlugin<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  // input <span class=\"token operator\">&lt;</span>https://www.npmjs.com/package/html-minifier-terser<span class=\"token operator\">></span> options\n  minify: true,\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>,</code></pre></div>\n</li>\n</ul>\n<h2 id=\"configuration\" style=\"position:relative;\"><a href=\"#configuration\" aria-label=\"configuration permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuration</h2>\n<ul>\n<li>\n<p><strong>Crafting the Vite Configuration</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// &lt;root>/vite.config.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> defineConfig<span class=\"token punctuation\">,</span> loadEnv <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> path <span class=\"token keyword\">from</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> react <span class=\"token keyword\">from</span> <span class=\"token string\">'@vitejs/plugin-react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> viteTsconfigPaths <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-tsconfig-paths'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> svgr <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-plugin-svgr'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createHtmlPlugin <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-plugin-html'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> checker <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-plugin-checker'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span>config <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> env <span class=\"token operator\">=</span> <span class=\"token function\">loadEnv</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> generateSourceMap <span class=\"token operator\">=</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">GENERATE_SOURCEMAP</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> shouldUseSourceMap <span class=\"token operator\">=</span> generateSourceMap <span class=\"token operator\">!==</span> <span class=\"token string\">'false'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    build<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      outDir<span class=\"token operator\">:</span> <span class=\"token string\">'build'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// build 폴더명 변경(기본 dist)</span>\n      sourcemap<span class=\"token operator\">:</span> shouldUseSourceMap<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 소스맵 생성 여부</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    define<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      global<span class=\"token operator\">:</span> <span class=\"token string\">'globalThis'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 글로벌 객체를 빈 객체로 대체(global is not defined error 에러에 대한 방어코드)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">react</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">viteTsconfigPaths</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">svgr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"environment-variables\" style=\"position:relative;\"><a href=\"#environment-variables\" aria-label=\"environment variables permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Environment Variables</h2>\n<ul>\n<li>\n<p>VITE라는 prefix를 설정하지 않을 경우 import.meta.env 에서 값을 얻어 올 수 없습니다.</p>\n</li>\n<li>\n<p>기본적으로 속성값으로 DEV(vite), PROD(vite build)을 제공해줌으로 개발/빌드 환경 구분이 가능합니다.</p>\n</li>\n<li>\n<p><strong>ChangeEnv Variables and Modes</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// .env Files</span>\n.env                # loaded in all cases\n.env.local          # loaded in all cases<span class=\"token punctuation\">,</span> ignored by git\n.env.<span class=\"token punctuation\">[</span>mode<span class=\"token punctuation\">]</span>         # only loaded in specified mode\n.env.<span class=\"token punctuation\">[</span>mode<span class=\"token punctuation\">]</span>.local   # only loaded in specified mode<span class=\"token punctuation\">,</span> ignored by git\n\n<span class=\"token comment\">// Modes</span>\n# .env.production.live\nVITE_ENVIRONMENT=live\n\n<span class=\"token comment\">// command mode option flag</span>\n<span class=\"token property\">\"build:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn vite --mode production.dev\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build:rc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn vite --mode production.rc\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build:live\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn vite --mode production.live\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n<li>\n<p><strong>Update process.env.REACT_APP</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token operator\">-</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REACT_APP_VARIABLE</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_VARIABLE</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"ejs-variables\" style=\"position:relative;\"><a href=\"#ejs-variables\" aria-label=\"ejs variables permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EJS Variables</h2>\n<ul>\n<li>\n<p><strong>Update Configuration for Vite</strong>\n빌드 시 HTML CJS 문법이 치환되도록 처리하기 위해서 vite-plugin-html 이용해서 내보내기 처리 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">createHtmlPlugin({\n  ....\n  inject: {\n    data: {\n      VITE_VARIABLE: env.VITE_VARIABLE,\n    },\n  },\n}),</code></pre></div>\n</li>\n<li>\n<p><strong>Replace EJS Variables for Vite</strong>\n문자만 치환할 경우</p>\n<ul>\n<li>“%” → “&#x3C;%= ~~ =>”</li>\n<li>예) <script src=\"/variable\"></script> → 문자안에 글자를 치환할 경우</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">// env VITE_VARIABLE='/variable' //\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span>\n  <span class=\"token punctuation\">></span></span>/index.html //// CRA\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%REACT_APP_VARIABLE%<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n  //// VITE\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;%= VITE_VARIABLE %><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span>\n<span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>엘리먼트(태그) 자체를 변경할 경우</p>\n<ul>\n<li>% → &#x3C;%- ~~ -></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> // env\nVITE_SCRIPT=&lt;script>(function ~~ )&lt;/script>\n\n// &lt;root>/index.html\n//// CRA\n%VITE_SCRIPT%\n\n//// VITE\n&lt;%- VITE_SCRIPT %></code></pre></div>\n</li>\n<li>\n<p><strong>Updating Vite Commands(with enviroment)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"start:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn start --mode development.dev\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"start:rc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn start --mode development.rc\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite build\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn build --mode production.dev\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build:rc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn build --mode production.rc\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build:live\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn build --mode production.live\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"vite-lint-typescript-checker\" style=\"position:relative;\"><a href=\"#vite-lint-typescript-checker\" aria-label=\"vite lint typescript checker permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vite Lint, Typescript Checker</h2>\n<ul>\n<li>\n<p><strong>Add module vite-plugin-checker</strong>\nCRA 환경에서 내부적으로 fork-ts-checker-webpack-plugin 플러그인을 바탕으로 비동기로 타입 체크를 해주고 있지만, VITE 환경에서는 vite-plugin-checker 직접 설치 후 vite.config.js 구성에 추가해줘야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// vite.config.js</span>\n<span class=\"token keyword\">import</span> checker <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-plugin-checker'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">checker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typescript<span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  eslint<span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    lintCommand<span class=\"token operator\">:</span> <span class=\"token string\">'eslint \"./src/**/*.{ts,tsx,js,jsx}\"'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  stylelint<span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    lintCommand<span class=\"token operator\">:</span> <span class=\"token string\">'stylelint \"src/**/*.scss\"'</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"cra-to-vite-migration-tip\" style=\"position:relative;\"><a href=\"#cra-to-vite-migration-tip\" aria-label=\"cra to vite migration tip permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CRA to Vite Migration Tip</h1>\n<ul>\n<li>\n<p><strong>import.meta.glob dynamic load</strong>\nVite의 import.meta.glob을 사용하여 모든 아이콘을 동적으로 가져올 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> icons <span class=\"token operator\">=</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span><span class=\"token function\">glob</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./*Icon.tsx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> iconComponentPath <span class=\"token operator\">=</span> <span class=\"token string\">'./aIcon.tsx'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Icon <span class=\"token operator\">=</span>\n  icons <span class=\"token operator\">&amp;&amp;</span> icons<span class=\"token punctuation\">[</span>iconComponentPath <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span>\n    <span class=\"token operator\">?</span> <span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n          icons<span class=\"token punctuation\">[</span>iconComponentPath <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> ComponentType<span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p><strong>sass-resources-loader(dart sass) → vite config preprocessorOptions.sass</strong>\n공통적으로 사용되는 스타일을 전역적으로 적용할 때 사용하는 sass-resources-loader를 vite에서는 preprocessorOptions.sass로 대체가 가능</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// CRA</span>\nrules<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    test<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\\\.scss$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n    use<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        loader<span class=\"token operator\">:</span> <span class=\"token string\">'sass-resources-loader'</span><span class=\"token punctuation\">,</span>\n        options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          resources<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./sass.scss'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    include<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    exclude<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// vite.config.js</span>\ncss<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  preprocessorOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    scss<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Next line will prepend the import in all you scss files as you did with your vite.config.js file</span>\n      additionalData<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n        @import \"./sass.scss\";\n      </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><strong>단계별 에러 케이스 정리</strong>\n@forward rules must be written before any other rules 에러</p>\n<ul>\n<li>@forward 구문이 다른 모든 규칙(@import, @use, 스타일 선언) 보다 위에 위치하도록 수정\n@forward</li>\n<li>Dart Sass에서 도입된 Sass 모듈 시스템의 일부로, 모듈화된 스타일시트를 구성하고 관리하는 데 중요한 역할을 합니다.</li>\n<li>@import 방식과는 다르게, @forward는 Sass 코드의 모듈화와 재사용성을 더 쉽게 관리할 수 있도록 돕습니다.\n@use: 모듈을 가져오면서 네임스페이스를 사용해 충돌을 방지하고, 명시적으로 필요한 부분만 가져올 수 있습니다.\n@import는 파일을 단순히 포함하는 방식으로, 여러 번 포함될 수 있고 변수나 믹스인의 충돌 위험이 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// reset.scss</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">forward</span></span> <span class=\"token string\">'reset'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ./sass.scss</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">use</span></span> <span class=\"token string\">'color'</span><span class=\"token punctuation\">;</span>\n\ncss<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  preprocessorOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    scss<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Next line will prepend the import in all you scss files as you did with your vite.config.js file</span>\n      additionalData<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n        @forward 'reset';\n\n        @use './color.scss' as *;\n        @use './sass.scss' as *\n      </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n<li>\n<p><strong>setting module scss name for Vite(선택)</strong>\nCRA에서는 SCSS 모듈을 사용할 때, 파일명과 클래스명을 결합해 고유한 클래스명을 자동으로 생성해주만, VITE 에서는 클래스명으로만 생성되는 규칙을 다르게 가져가고 있음</p>\n<ul>\n<li>규칙: [파일명]<em>[원래 클래스명]</em>[hash:base64:5]\n단, 서비스 내에서 module scss를 전역으로 선택하는 경우가 없다면 굳이 세팅을 해줄 필요가 없습니다.(내부적으로는 세팅을 하지 않을 시 [클래스명, hash]값을 토대로 유니크한 값으로 자동 변경)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'./Test.module.scss'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Test</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Test<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 전</span>\n<span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"Test_container__28qL6\"</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token comment\">//// vite.config.js</span>\n<span class=\"token keyword\">const</span> namespaceUUID <span class=\"token operator\">=</span> <span class=\"token function\">v4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncss<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  modules<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 파일명과 클래스명을 포함한 고유한 이름 생성</span>\n    <span class=\"token function-variable function\">generateScopedName</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 파일 경로 기반 고유한 해시 생성</span>\n      <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.module'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.[^/.]+$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// UUID 생성 후 Base64 인코딩</span>\n      <span class=\"token keyword\">const</span> hash <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token function\">v5</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>file<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> namespaceUUID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>file<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">__</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>hash<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n<li>\n<p><strong>server(proxy, outside file)</strong>\nCRA proxy 설정을 VITE proxy로 대체가 가능합니다.\nVITE 환경 외에 외부 폴더/파일 접근 시 fs.allow 객체로 추가 시 dev server에서 접근이 가능합니다.\n기존에는 proxy 패스를 배열로 관리했지만 vite에서는 각각 패스로 관리를 해줘야합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// CRA</span>\n<span class=\"token comment\">//// 기존 패키지 삭제</span>\nyarn remove http<span class=\"token operator\">-</span>proxy<span class=\"token operator\">-</span>middleware\n\n<span class=\"token comment\">//// setupProxy.js</span>\n<span class=\"token comment\">// 수정 전</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createProxyMiddleware <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http-proxy-middleware'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setupProxy</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">createProxyMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'/test'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    changeOrigin<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\t  logLevel<span class=\"token operator\">:</span> <span class=\"token string\">'debug'</span><span class=\"token punctuation\">,</span>\n\t  autoRewrite<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    target<span class=\"token operator\">:</span> <span class=\"token string\">'http://www.test.kr'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onProxyRes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>proxyRes<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>proxyRes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onProxyReq</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>proxyReq<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      proxyReq<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'origin'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'http://www.test.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// vite.config.js</span>\n<span class=\"token comment\">//// 수정 후</span>\n<span class=\"token keyword\">const</span> env <span class=\"token operator\">=</span> <span class=\"token function\">loadEnv</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\tproxy<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\tfs<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t    <span class=\"token comment\">// 허용할 디렉터리 추가 (여기에 외부 파일 경로를 추가)</span>\n\t    allow<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t      <span class=\"token string\">'../../../outside'</span><span class=\"token punctuation\">,</span>\n\t      <span class=\"token string\">'/'</span>\n\t    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string-property property\">'/test'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t    changeOrigin<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\t\t  logLevel<span class=\"token operator\">:</span> <span class=\"token string\">'debug'</span><span class=\"token punctuation\">,</span>\n\t\t  autoRewrite<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\t    target<span class=\"token operator\">:</span> <span class=\"token string\">'http://www.test.kr'</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token function-variable function\">configure</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t      proxy<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'proxyRes'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>proxyRes<span class=\"token punctuation\">,</span> env<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>proxyRes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t      proxy<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'proxyReq'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>proxyReq<span class=\"token punctuation\">,</span> env<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t        proxyReq<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'origin'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'http://www.test.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n<li>\n<p><strong>external file link settings(alias)</strong>\nCRA에서 외부 파일내에 패스(tsconfig.json)를 접근 시 현재 프로젝트 환경 기준으로 패스를 바라보지만,\nVITE에서는 외부 파일 기준으로 패스를 접근하다보니 alias 처리에 이슈가 있어서 tsconfig path가 아닌 절대 경로 패스로 재 지정해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// CRA</span>\n<span class=\"token keyword\">const</span> modifiedConfig <span class=\"token operator\">=</span> <span class=\"token function\">aliasWebpack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  tsconfig<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./tsconfig.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// vite.config.js</span>\nresolve<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  alias<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'@outside'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../outside'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n</li>\n<li>\n<p><strong>setting external file access permissions</strong>\nCRA에서는 외부파일 접근 시 내부 config 파일에서 ModuleScopePlugin 플러그인에 추가해주는 번거로움이 있었지만,\nVITE에서는 빌드 과정에서는 외부 파일 접근이 자유로우나, 개발 환경에서는 외부 파일 패스 경로를 설정해줘야합니다.</p>\n<ul>\n<li>단, 파일 패스 설정 시 외부 파일 패스외에 내부 파일 패스도 같이 설정해줘야 합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">fs<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 허용할 디렉터리 추가 (여기에 외부 파일 경로를 추가)</span>\n  allow<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'../outside'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'/'</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n<li>\n<p><strong>setting baseurl for Vite</strong>\nCRA에서는 내부적으로 BaseURL(PUBLIC_URL)을 기준으로 리소스 패스 경로를 설정해주지만, VITE에서는 해당 경로를 base 속성값으로 변경해줘야합니다.\n단, DEV 환경에서는 내부 리소스 패스로 설정해야함으로 패스를 지정하지 말아야합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">// CRA //// index.html\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>shortcut icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%PUBLIC_URL%/favicon.ico<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n// VITE //// env.production.dev VITE_PUBLIC_URL=https://test\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>shortcut icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/favicon.ico<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n//// 결과물\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>shortcut icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://test/favicon.ico<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"cra-to-vite-migration-storybook\" style=\"position:relative;\"><a href=\"#cra-to-vite-migration-storybook\" aria-label=\"cra to vite migration storybook permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CRA to Vite Migration Storybook</h1>\n<ul>\n<li>\n<p><strong>Installation</strong>\n이전 버전 Storybook 삭제</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> remove @storybook/addon-*<span class=\"token punctuation\">(</span>knobs, controls 등등<span class=\"token punctuation\">)</span></code></pre></div>\n<p>vite 연동을 위한 스토리북 패키지 추가\n기존 CRA 환경에서는 @storybook/react 패키지 명령어를 사용해서 문제가 없었지만,\nVITE에서는 @storybook/react-vite 패키지를 사용하면서 storybook 패키지를 추가적으로 설치가 필요합니다.\n또한, storybook 연동 패키지가 6버전 사용 시 ‘storybook-channel-mock.js:7 Uncaught TypeError: import_channels.default is not a constructor’ 와 같은 에러가 발생하게 됩니다.\n꼭 최신 버전인 8버전 이상에 패키지를 설치를 해주세요</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> @storybook/builder-vite @storybook/react @storybook/react-vite storybook <span class=\"token parameter variable\">-D</span></code></pre></div>\n</li>\n<li>\n<p><strong>setting</strong>\n.storybook/main\naddon 설정</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"> addons<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">'@storybook/addon-links'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'@storybook/addon-essentials'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>builder, framework 지정</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">core<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  builder<span class=\"token operator\">:</span> <span class=\"token string\">'@storybook/builder-vite'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 👈 The builder enabled here.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\nframework<span class=\"token operator\">:</span> <span class=\"token string\">'@storybook/react-vite'</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>base static path 지정</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// CRA - @storybook/react</span>\n<span class=\"token string-property property\">\"storybook\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"start-storybook -p 9009 -s public\"</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token comment\">// VITE - @storybook/vite</span>\nstaticDirs<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'../public'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 이전 버전(v6) -s public 옵션과 동일</span></code></pre></div>\n<p>webpackFinal → ViteFinal 마이그레이션</p>\n<ul>\n<li>Preprocess SCSS, 허용할 파일 패스 연동</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// webpack</span>\nconfig<span class=\"token punctuation\">.</span>module<span class=\"token punctuation\">.</span>rules<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  test<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.scss$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n  use<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      loader<span class=\"token operator\">:</span> <span class=\"token string\">'sass-resources-loader'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        resources<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../sass.scss'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  include<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  exclude<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Vite</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> mergeConfig <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> <span class=\"token function\">mergeConfig</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Merge custom configuration into the default config</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> mergeConfig <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  css<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    preprocessorOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      scss<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Next line will prepend the import in all you scss files as you did with your vite.config.js file</span>\n      additionalData<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n        @forward 'reset';\n\n        @use './color.scss' as *;\n        @use './sass.scss' as *\n      </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<ul>\n<li>외부 파일 접근</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// VITE</span>\nserver<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  fs<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 허용할 디렉터리 추가 (여기에 외부 파일 경로를 추가)</span>\n    allow<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'../outside'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'/'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n<li>\n<p><strong>storybook code migration processing</strong>\n8 버전 업데이트가 되면서 argTypes에서 기본값 세팅을 할 수 없고 args에서 세팅하는걸로 변경되었습니다. 빌드 에러가 발생하진 않지만, 확인해보시면 undefined 설정되서 들어가게 되니 꼭 마이그레이션 시 변경 해주세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// CRA - storybook</span>\nargTypes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  isAIRecommendationModalOpened<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'모달 오픈여부'</span><span class=\"token punctuation\">,</span>\n    defaultValue<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    control<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">'boolean'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token comment\">// VITE - storybook</span>\nargTypes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  isAIRecommendationModalOpened<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'모달 오픈여부'</span><span class=\"token punctuation\">,</span>\n    control<span class=\"token operator\">:</span> <span class=\"token string\">'boolean'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\nargs<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  isAIRecommendationModalOpened<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n<li>\n<p><strong>package.json storybook command</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// CRA</span>\n<span class=\"token property\">\"storybook\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"start-storybook -p 9009 -s public\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build-storybook\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"build-storybook -s public -o .storybook/build --quiet\"</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token comment\">// VITE</span>\n<span class=\"token property\">\"storybook\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"storybook dev -p 9009\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"build-storybook\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"storybook build -o .storybook/build --quiet\"</span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"jest-to-vitest-migration\" style=\"position:relative;\"><a href=\"#jest-to-vitest-migration\" aria-label=\"jest to vitest migration permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jest to Vitest Migration</h1>\n<ul>\n<li>\n<p><strong>Installation</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-D</span> vitest jsdom @testing-library/dom @testing-library/jest-dom @testing-library/react @testing-library/user-event</code></pre></div>\n</li>\n<li>\n<p><strong>setting</strong>\n기존에 package.json/jest.setup.js 설정된 테스트 구성을 vitest.config.js로 이전</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\n<span class=\"token comment\">//// package.json</span>\n<span class=\"token string-property property\">\"jest\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"collectCoverageFrom\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"!&lt;rootDir>/node_modules/\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"moduleNameMapper\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"lodash-es\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lodash\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"transformIgnorePatterns\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"/node_modules/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"setupFilesAfterEnv\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"&lt;rootDir>/jest.setup.js\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token comment\">//// vitest.config.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  resolve<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    alias<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">\"lodash-es\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lodash\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">react</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">viteTsconfigPaths</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tsconfig 파일 패스 연동</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  test<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    environment<span class=\"token operator\">:</span> <span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// React 테스트 환경을 위해 설정</span>\n    globals<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// Jest와 동일한 글로벌 변수를 사용</span>\n    setupFiles<span class=\"token operator\">:</span> <span class=\"token string\">'./src/setupTests.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// setup 파일</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// src/setupTest.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'@testing-library/jest-dom'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>기존 리액트 테스트 환경 테스트를 위해서 test 환경을 꼭 json 으로 설정해주세요.\n타입스크립트 타입에 vitest 추가해주세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\n<span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dom.iterable\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"es2020\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ES6\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"types\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"vite/client\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"vitest/globals\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// vitest/globals 추가</span>\n  <span class=\"token property\">\"isolatedModules\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>eslint 글로벌 체크 타입 변수에 vi 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// .eslint.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  globals<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    context<span class=\"token operator\">:</span> <span class=\"token string\">'readonly'</span><span class=\"token punctuation\">,</span>\n    vi<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// vi 추가</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p><strong>jest code migration processing</strong>\n<strong>module mocks</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\njest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./some-path'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\nvi<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./some-path'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Importing the Original of a Mocked Package</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> cloneDeep <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">requireActual</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lodash/cloneDeep'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> cloneDeep <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> vi<span class=\"token punctuation\">.</span><span class=\"token function\">importActual</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lodash/cloneDeep'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p><strong>package.json test commands</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token string\">\"test\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"vitest\"</span>,\n<span class=\"token string\">\"test:run\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"vitest run\"</span>,</code></pre></div>\n</li>\n</ul>\n<h1 id=\"msw-migration-guide\" style=\"position:relative;\"><a href=\"#msw-migration-guide\" aria-label=\"msw migration guide permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MSW Migration Guide</h1>\n<ul>\n<li>\n<p>vitest 테스트와 msw 0.43.1 버전 같이 사용 시 아래 같은 문구에 에러가 발생</p>\n</li>\n<li>\n<p>vitest에서 ECMAscript 모듈을 지원하고 있고 msw 이전버전에서는 미지원함에 따른 에러 발생으로 추측(버전을 최신 버전으로 변경해서 수정)</p>\n</li>\n<li>\n<p>vitest Package subpath ‘./lib’ is not defined by “exports” in funding/node_modules/headers-polyfill/package.json</p>\n</li>\n<li>\n<p><strong>Installation</strong></p>\n<ul>\n<li>msw 버전을 최신버전으로 업그레이드 함에 따른 storybook에 사용되는 storybook-addon도 동일하게 업그레이드 처리해야 합니다.</li>\n<li>msw-storybook-addon 관련 스토리부 설정을 기존과 동일합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-D</span> msw@2.4.11 msw-storybook-addon@2.0.3</code></pre></div>\n</li>\n<li>\n<p><strong>msw code migration processing</strong>\n<strong>worker-imports</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> setupWorker <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> setupWorker <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw/browser'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Response resolver arguments</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\nrest<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> ctx<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> http <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span><span class=\"token punctuation\">;</span>\nhttp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> request <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">URL</span></span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> productId <span class=\"token operator\">=</span> url<span class=\"token punctuation\">.</span>searchParams<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Response declaration</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\nrest<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> ctx<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">res</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'abc-123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\n\n<span class=\"token comment\">// 변경 후 2</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> http<span class=\"token punctuation\">,</span> HttpResponse <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> handlers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  http<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'abc-123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token number\">200</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Request params</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\nrest<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/post/:id'</span><span class=\"token punctuation\">,</span> req <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> http <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span><span class=\"token punctuation\">;</span>\n\nhttp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/post/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> params <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> params<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Request cookies</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\nrest<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/resource'</span><span class=\"token punctuation\">,</span> req <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> token <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>cookies<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> http <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span><span class=\"token punctuation\">;</span>\n\nhttp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> cookies <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> token <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> cookies<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Request Body</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 변경 전</span>\nrest<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/resource'</span><span class=\"token punctuation\">,</span> req <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// The library would assume a JSON request body</span>\n  <span class=\"token comment\">// based on the request's \"Content-Type\" header.</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 변경 후</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> http <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span><span class=\"token punctuation\">;</span>\n\nhttp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> request <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Read the request body as JSON.</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> user<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"결과\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과</h1>\n<p>빌드 성능: <strong>6.16s → 2.49s ( 3.67s 빠름 )</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 982px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38869b98abd75e7e6016b90324463f24/9e029/Untitled3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.046875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACG0lEQVR42oVU2ZLaMBD0PyQBH/gEY1uy5PsksFt5yP//UWdGgKt2s8dDV0ty0eqZHmG93l7we71gnRfwmjk9pUjTFFEUGcRxjNPpZHA8HpEkieHnPgiCDdby54b59Yp2HjBdL2bNrLVG27ZQSqGqKrNnId/3/8MbwWBUCFuJUGUIG2HWUS2Q0M18e0wiyQMhuQ2C8IHgQ1gqF5B5ASVLaIISEhW5CsIQnusi8Fz4rmMQHDyEhOCdqzeCDZV1u90wTiPyIofSiqAhRYFMaTj9Cpuwn1/gdjM8qeHHR3Phh4Jd12FZFhNCnucoy9JACoGCeD9c8IsEf1z/El+wa2e4hfpcsK5r03hBAszcfGZG2zQQFEhK33JdoWx7COIkPd0FWHQTvrO1riuGvgfzNE0Yx3FjHic5NjisGuFY0n7FhaDJRF1XVH4FuxnhljUO1AojKKsadiYRi9I4yovCuGXnUkpTfkPnLbXmfD7D5aDehxIy38+saZ5R9QP6cUJPTllopjPuLTtlMXbP33h0Pkt36+HPglKreyxcJoGHmV3xK7BtG57nwXEcw/4X47IJJkIjpvoFzR+7YY7jhFI/G/BwP5/hd2JGsO80uob7pKncEsNQU3mayu6o1J7Svvfw+ey+FRTSga52ENKmHzsEm/q3f2BHzjwKwtuazvhK2BJFRiMymUQ5kKpiN0fzDxNF9H5pzsLHrD05y7JPHf8D/6iy3tK899QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/38869b98abd75e7e6016b90324463f24/4fae8/Untitled3.webp 256w,\n/static/38869b98abd75e7e6016b90324463f24/2bf0f/Untitled3.webp 512w,\n/static/38869b98abd75e7e6016b90324463f24/e28d7/Untitled3.webp 982w\"\n              sizes=\"(max-width: 982px) 100vw, 982px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/38869b98abd75e7e6016b90324463f24/e3135/Untitled3.png 256w,\n/static/38869b98abd75e7e6016b90324463f24/06341/Untitled3.png 512w,\n/static/38869b98abd75e7e6016b90324463f24/9e029/Untitled3.png 982w\"\n            sizes=\"(max-width: 982px) 100vw, 982px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/38869b98abd75e7e6016b90324463f24/9e029/Untitled3.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 916px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/690aac672dbd8041a0f43f87f32ca984/eb088/Untitled4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABu0lEQVR42kWR626bQBCF/RRuAAPmjrktiwGDL3HkuI7SOGobtaqqqlL7/g/xdYJ/9MfRN3NW2p0zO7u+fuby9Mzj44Un4fl8oesGdvsD47inLGuU0rRtT9+Pwg1FoSZP65a6XtM0LYuFM2k29BXbQYneqdkNDVni4LkGYXBHFAg9g6VjEoUmQWASxya+bxGG77x5YWgTRTazaowo+gC9F248ssFFn4S9S//g0px91NEn3fj0O1OmNxkGg6K0ZFqTWlviGVSViW4sZnp7lAseKU9nwm1H/jBSHkaa+x12GjOPfe6iAHsV40YiV2p7KfQmOo4ntT/1liWRu1qRS9RIIqdaodOGtafoA9nNUrFyYvzFkiSO6datTNWSponsTpEkCXmeyy41WZbJAxJ51a8pmoZSzKAbcdYnvPZM0H4k1A8E1Rbfi6lqPUnphjhJUVInaUaWF1SqJl3JhY7LLO4yiq4kLELifUW+KbHNOQvrJtv6gCO9awqN+U3SLxcGrnU3+ZOsm2ant78cv/5hfPnJ8fU3++sv+Yg3Ns8/6J6+kx1eyO6vqNMXmss3ajnLDp/Ij1esao9RbDHK//oHoqfzn0e7MmsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/690aac672dbd8041a0f43f87f32ca984/4fae8/Untitled4.webp 256w,\n/static/690aac672dbd8041a0f43f87f32ca984/2bf0f/Untitled4.webp 512w,\n/static/690aac672dbd8041a0f43f87f32ca984/14231/Untitled4.webp 916w\"\n              sizes=\"(max-width: 916px) 100vw, 916px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/690aac672dbd8041a0f43f87f32ca984/e3135/Untitled4.png 256w,\n/static/690aac672dbd8041a0f43f87f32ca984/06341/Untitled4.png 512w,\n/static/690aac672dbd8041a0f43f87f32ca984/eb088/Untitled4.png 916w\"\n            sizes=\"(max-width: 916px) 100vw, 916px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/690aac672dbd8041a0f43f87f32ca984/eb088/Untitled4.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Dev Server 구동: <strong>167ms → 엄청 빠름^^</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 992px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e0ed355fea7ffa8d9cb11431b26728e/43738/Untitled5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.578125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVR42o2S626jMBSEeYommPs9BmJjQwMkW6WJtu//SNPBbaruaqXtj0/jc8Dj8cWTUqJtW+R5jiRJsNUPvd1uWNcVcRyj6zrX23QjiiKEYYggCNz3B9424Xp9xfl8JhdcyDiOmOcZp9MMpbTDGOP6xlgXQGuNvu8xDMOfhq+3Kw1fOPkZyzrTdGECibIqUFUliiJHWWbUglqSgrvJXD9337adxV94o/GhWh+D3sHoJ8jDDorj/iiYaAdrWSuBI1mWPaZpzx7/Hz4YWSsVUAX7Al6ka/hrj7ArEJoGWVNAdS1qJpyswnIaUTFREgVMFiPLYqQpNf3Qv/HCPEXdSwzWIMpS7OsDAiJqyUU0ovYIX1kEskfMi/h+Xv/C20cho1rc73dGV+inE55frvj1+w2SY2knHJcLkkb+zNBOI2I+k7qq0TQNz1FjGi1qXkDDSzlUFRqOEy78PzNnWBale0+PdyVEAF8IhJ/1g5+YbYbvugsDxcM+DmcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2e0ed355fea7ffa8d9cb11431b26728e/4fae8/Untitled5.webp 256w,\n/static/2e0ed355fea7ffa8d9cb11431b26728e/2bf0f/Untitled5.webp 512w,\n/static/2e0ed355fea7ffa8d9cb11431b26728e/50e74/Untitled5.webp 992w\"\n              sizes=\"(max-width: 992px) 100vw, 992px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2e0ed355fea7ffa8d9cb11431b26728e/e3135/Untitled5.png 256w,\n/static/2e0ed355fea7ffa8d9cb11431b26728e/06341/Untitled5.png 512w,\n/static/2e0ed355fea7ffa8d9cb11431b26728e/43738/Untitled5.png 992w\"\n            sizes=\"(max-width: 992px) 100vw, 992px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2e0ed355fea7ffa8d9cb11431b26728e/43738/Untitled5.png\"\n            alt=\"Untitled\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1 id=\"참고페이지\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%ED%8E%98%EC%9D%B4%EC%A7%80\" aria-label=\"참고페이지 permalink\" class=\"custom-class before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고페이지</h1>\n<ul>\n<li>\n<p><a href=\"https://coreui.io/blog/how-to-migrate-create-react-app-to-vite/\" target=\"_blank\" rel=\"nofollow\">How to Migrate from create-react-app to Vite? · CoreUI</a></p>\n</li>\n<li>\n<p><a href=\"https://www.freecodecamp.org/news/how-to-migrate-from-create-react-app-to-vite/\" target=\"_blank\" rel=\"nofollow\">How to Migrate from create-react-app to Vite using Jest and Browserslist</a></p>\n</li>\n<li>\n<p><a href=\"https://nyagm.tistory.com/280\" target=\"_blank\" rel=\"nofollow\">[vite] 프론트엔드 개발자를 위한 Vite 101</a></p>\n</li>\n<li>\n<p><a href=\"https://khys.tistory.com/31\" target=\"_blank\" rel=\"nofollow\">[JS] 비트(Vite)란? - 비트 알아보기</a></p>\n</li>\n<li>\n<p><a href=\"https://engineering.ab180.co/stories/webpack-to-vite\" target=\"_blank\" rel=\"nofollow\">Webpack → Vite: 번들러 마이그레이션 이야기</a></p>\n</li>\n<li>\n<p><a href=\"https://nyagm.tistory.com/280\" target=\"_blank\" rel=\"nofollow\">[vite] 프론트엔드 개발자를 위한 Vite 101</a></p>\n</li>\n<li>\n<p><a href=\"https://www.freecodecamp.org/news/how-to-migrate-from-create-react-app-to-vite/\" target=\"_blank\" rel=\"nofollow\">How to Migrate from create-react-app to Vite using Jest and Browserslist</a></p>\n</li>\n<li>\n<p><a href=\"https://eun-jee.com/post/front-end/CRA_to_Vite/\" target=\"_blank\" rel=\"nofollow\">CRA에서 Vite로 마이그레이션하기 (feat. 배포 시간 줄이기)</a></p>\n</li>\n<li>\n<p><a href=\"https://storybook.js.org/docs/builders/vite\" target=\"_blank\" rel=\"nofollow\">Docs | Storybook</a></p>\n</li>\n</ul>","frontmatter":{"title":"vite","date":"2024.05.06","category":"개발","tags":["bundler"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#vite%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">Vite를 사용해야 하는 이유</a></p>\n</li>\n<li>\n<p><a href=\"#cra-to-vite-migration\">CRA to Vite Migration</a></p>\n<ul>\n<li><a href=\"#base\">base</a></li>\n<li><a href=\"#configuration\">Configuration</a></li>\n<li><a href=\"#environment-variables\">Environment Variables</a></li>\n<li><a href=\"#ejs-variables\">EJS Variables</a></li>\n<li><a href=\"#vite-lint-typescript-checker\">Vite Lint, Typescript Checker</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#cra-to-vite-migration-tip\">CRA to Vite Migration Tip</a></p>\n</li>\n<li>\n<p><a href=\"#cra-to-vite-migration-storybook\">CRA to Vite Migration Storybook</a></p>\n</li>\n<li>\n<p><a href=\"#jest-to-vitest-migration\">Jest to Vitest Migration</a></p>\n</li>\n<li>\n<p><a href=\"#msw-migration-guide\">MSW Migration Guide</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EA%B3%BC\">결과</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0%ED%8E%98%EC%9D%B4%EC%A7%80\">참고페이지</a></p>\n</li>\n</ul>"}}]}},"pageContext":{"slug":"/blog/2024/05/2024-05-06-vite/","previous":{"fields":{"slug":"/blog/2024/05/2024-05-12-development-improvements/"},"frontmatter":{"title":"개발 생산성 & 빌드 성능 개선"}},"next":{"fields":{"slug":"/blog/2024/04/2024-04-28-esbuild/"},"frontmatter":{"title":"esbuild"}}}},"staticQueryHashes":["3940312266","4157816502"],"slicesMap":{}}