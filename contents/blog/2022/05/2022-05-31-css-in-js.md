---
layout: post
title: css-in-js
date: 2022-05-31
published: 2022-05-31
category: ê°œë°œ
tags: ['CSS_IN_JS', 'styled-components']
comments: true,
thumbnail: './images/31/thumbnail.png'
github: 'https://github.com/seungahhong/seungahhong.github.io'
---

# CSS-in-JS ì™œ ë§Œë“¤ì–´ì¡Œë‚˜?

CSS-in-JSëŠ” ë‹¨ì–´ ê·¸ëŒ€ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì—ì„œ CSSë¥¼ ì‘ì„±í•˜ëŠ” ë°©ì‹ì„ ë§í•©ë‹ˆë‹¤. 2014ë…„ í˜ì´ìŠ¤ë¶ ê°œë°œìì¸ Christopher Chedeau aka Vjeuxê°€ ì²˜ìŒ ì†Œê°œí•˜ì˜€ìŠµë‹ˆë‹¤.

![Untitled](./images/31/Untitled.png)

VjeuxëŠ” CSSë¥¼ ì‘ì„±í•˜ëŠ” ì–´ë ¤ì›€ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•˜ì˜€ìœ¼ë©° CSS-in-JSë¡œ ì´ë“¤ ì´ìŠˆë¥¼ ëª¨ë‘ í•´ê²°í•  ìˆ˜ ìˆë‹¤ê³  ê°•ì¡°í–ˆìŠµë‹ˆë‹¤.

- Global namespace: ê¸€ë¡œë²Œ ê³µê°„ì— ì„ ì–¸ëœ ì´ë¦„ì˜ ëª…ëª… ê·œì¹™ í•„ìš”

  - Issue
    - CSS ì²˜ìŒë¶€í„° documentë¥¼ ìŠ¤íƒ€ì¼ì„ í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆê¸° ë•Œë¬¸ì— ëª¨ë“ˆí˜•ì‹ì˜ scope ê°œë…ì´ ì—†ìŒ(ì „ì—­ ìŠ¤ì½”í”„/ë„¤ì„ìŠ¤í˜ì´ìŠ¤)
    - CSS ë°©ë²•ë¡ (BEM), Module/Scope í˜•ì‹ì²˜ëŸ¼ CSS ruleì´ ì—¬ëŸ¬ Elementì— ì˜í–¥ì„ ì•ˆë°›ë„ë¡ í–ˆì§€ë§Œ, ì—¬ì „íˆ ëª¨ë“ˆë‹¨ìœ„ ìŠ¤ì½”í”„ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ
  - Solution
    - CSS-in-JSëŠ” styleì„ JSì—ì„œ ì •ì˜í•˜ê¸° ë•Œë¬¸ì— style variableì´ lexical scope(ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ ìŠ¤ì½”í”„)ì— í•œì •
    - CSS-in-JSëŠ” style variableë¥¼ ì–¼ë§ˆë“ ì§€ export/import í•˜ì—¬ì„œ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤

  ```tsx
  import styled from 'styled-components'
  export const Container = styled.div`
    display: flex;
    flex-direction: column;
    height: 100%;
  `;

  const Template: FunctionComponent<TemplateProps> = function ({
    return (
      <Container>
      ...
      </Container>
    );
  });
  ```

- Implicit Dependencies: ì˜ì¡´ ê´€ê³„ë¥¼ ê´€ë¦¬
  - Issue
    - JS/CSS ëª¨ë“ˆì´ ë¶„ë¦¬ ë˜ì–´ ìˆì–´ className/attribute ê´€ê³„ê°€ ëª…ì‹œì ì´ì§€ ì•Šê¸° ë•Œë¬¸ì— ê°œë°œìê°€ ê¸°ì–µí•´ì„œ ê´€ë¦¬ë¥¼ í•´ì¤˜ì•¼í•˜ëŠ” ì–´ë ¤ì›€ì´ ìˆìŒ
  - Solution
    - CSS-in-JSëŠ” CSSë¥¼ JSì— ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— ì •ì  ë¶„ì„ì´ ê°€ëŠ¥í•˜ê³ , IDEì˜ ë„ì›€ì„ ë°›ì•„ì„œ ì‚¬ìš©/ë¯¸ì‚¬ìš© ì—¬ë¶€ë¥¼ ê´€ë¦¬ê°€ ì‰¬ì›Œì§
- Dead Code Elimination: ë¯¸ì‚¬ìš© ì½”ë“œ ê²€ì¶œ
  - Issue
    - ì˜ì¡´ ê´€ê³„ ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì„œ ì‚¬ìš©ë˜ê³  ìˆì§€ ì•ŠëŠ”(dead code) ì¸ì§€ íŒŒì•…í•˜ê¸° í˜ë“¤ë‹¤.
    - êµ¬ê¸€ í¬ë¡¬ì˜ coverageë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì¶”ê°€ì ì¸ ì‘ì—…ì‹œê°„ì´ ë“¤ì–´ê°€ê²Œ ëœë‹¤.
  - Solution
    - CSS-in-JS ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ eslint, IDEì— ë„ì›€ì„ ë°›ì•„ì„œ ë¯¸ì‚¬ìš©ë˜ëŠ” ì½”ë“œë¥¼ ê°„ë‹¨íˆ ì œê±°ê°€ ê°€ëŠ¥í•¨.
- Non-deterministic Resolution
  - Issue
    - CSS ruleì€ specificityê°€ ë†’ì€ ê²ƒì´ ì ìš©ëœë‹¤. ê·¸ëŸ°ë° ë§Œì•½ ê°™ì€ specificityë¥¼ ê°€ì§„ë‹¤ë©´, ë’¤ì— ì •ì˜ëœ ruleì´ ì ìš©ëœë‹¤.
    - ë§Œì•½ ê°™ì€ specificityë¥¼ ê°–ëŠ” CSSë“¤ì„ asyncí•˜ê²Œ ë¶ˆëŸ¬ì˜¤ë©´ ì–´ë–¤ CSS ruleì´ ì ìš©ë ê¹Œ? ë‹µì€ ëª¨ë¥¸ë‹¤.
    - ì´ë¥¼ Non-deterministic Resolutionì´ë¼ê³  í•œë‹¤.
      ![Untitled](./images/31/Untitled1.png)
  - Solution
    - HTML/CSS/JSë¥¼ ëª¨ë“ˆ(ì»´í¬ë„ŒíŠ¸) ë‹¨ìœ„ë¡œ ê°•í•˜ê²Œ ê²°í•©ì‹œì¼œì„œ CSS ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•  ìˆ˜ ìˆê²Œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.
- Minification: í´ë˜ìŠ¤ ì´ë¦„ì˜ ìµœì†Œí™”

  ```tsx
  // module.css
  .DetailInfoHeader_titleInfo__2XYNF {
  }

  // styled-components
  .kuddxf {
   ...
  }
  ```

- Sharing Constants: JSì™€ CSSì˜ ìƒíƒœ ê³µìœ 

  ```tsx
  // css-in-js ì‚¬ìš© ì „(css/js ìƒíƒœ ê³µìœ X)
  /* common.css */
  :root {
    --primary-color: #2294e3;
    --border-color: #9a9a9a;
  }

  /* app.tsx */
  const --primary-color: '#2294e3';
  <article style={{ background: `${--primary-color}` }}

  // css-in-js ì‚¬ìš© ì „(css/js ìƒíƒœ ê³µìœ O)
  :root {
    --primary-color: #2294e3;
    --border-color: #9a9a9a;
  }

  const ArticleWrapper = styled.article`
    background: var(--primary-color);
  `;

  <ArticleWrapper></ArticleWrapper>

  ```

- Breaking Isolation: CSSì˜ ì™¸ë¶€ ìˆ˜ì •ì„ ê´€ë¦¬í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œ
  - ê¸°ëŠ¥ì˜ ì¬ì‚¬ìš©ì„±ê³¼ ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ì„ ì‰½ê²Œ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” CSS/JSì— í•¨ê»˜ ê´€ë¦¬ë˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì„
  - Vue/Svelte ë“±ì˜ ê²½ìš°ì—ëŠ” ì´ë¥¼ single-file-component ë°©ì‹ìœ¼ë¡œ style/script/html ë¬¶ì–´ì„œ ê´€ë¦¬
  - Reactì—ì„œëŠ” CSS in JS ë°©ì‹ìœ¼ë¡œ JS ìƒí…Œê³„ì—ì„œ ë¬¶ì–´ì„œ ê´€ë¦¬ë¥¼ í•˜ìëŠ” ëª©ì 

# styled-components

<details>
  <summary>styled-components</summary>

**ì„¤ì¹˜**

```bash
$ npm install styled-components
# or
$ yarn add styled-components
```

ê¸°ë³¸ì‚¬ìš©ë²•( sass ë¬¸ë²• ì§€ì› )

```jsx
import React from 'react';
import styled from 'styled-components';

const Circle = styled.div`
  width: 5rem;
  height: 5rem;
  background: black;
  border-radius: 50%;

  > a {
    color: #bfcbd9;
    text-decoration: none;
  }

  &:hover {
    opacity: 0.1;
  }
`;

export const AutoLayoutStyle = css`
  width: 100%;
  height: 100%;
`;

function App() {
  return <Circle />;
}

export default App;
```

Sass - lighten() ë˜ëŠ” darken() : polished

```
yarn add polished

import React from 'react';
import styled from 'styled-components';
import { darken, lighten } from 'polished';

const StyledButton = styled.button`
  background: darken($w9-color-primary, 20%); - scss

  /* ìƒ‰ìƒ */
  background: #228be6;
  &:hover {
    background: ${lighten(0.1, '#228be6')}; - polished
  }
  &:active {
    background: ${darken(0.1, '#228be6')}; - polished
  }

`;

function Button({ children, ...rest }) {
  return <StyledButton {...rest}>{children}</StyledButton>;
}

export default Button;
```

ì „ì—­ìŠ¤íƒ€ì¼ì„ ì ìš©í•  ê²½ìš° ThemeProvider

ìŠ¤íƒ€ì¼ë§ì„ ì‹œì‘í•˜ê¸° ì•ì„œ, ìì£¼ ì‚¬ìš©í•˜ê²Œ ë  ìƒ‰ìƒ ì½”ë“œ, ì‚¬ì´ì¦ˆ, í°íŠ¸, ë¯¸ë””ì–´ ì¿¼ë¦¬ ë“±ì˜ ì •ë³´ë¥¼ ë³€ìˆ˜ë¡œ ìƒì„±í•´ ì‚¬ìš©í•˜ë©´ ì¼ê´€ì ì¸ ìŠ¤íƒ€ì¼ ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤

```jsx
import React from 'react';
import styled, { ThemeProvider } from 'styled-components';
import Button from './components/Button';

const AppBlock = styled.div`
  width: 512px;
  margin: 0 auto;
  margin-top: 4rem;
  border: 1px solid black;
  padding: 1rem;
`;

function App() {
  return (
    <ThemeProvider
      theme={{
        palette: {
          blue: '#228be6',
          gray: '#495057',
          pink: '#f06595',
        },
      }}
    >
      <AppBlock>
        <Button color="gray">BUTTON</Button>
        <Button color="gray">BUTTON</Button>
        <Button color="pink">BUTTON</Button>
      </AppBlock>
    </ThemeProvider>
  );
}

export default App;
```

ì»´í¬ë„ŒíŠ¸ ìƒì†

```jsx
export const TileDiv = styled.div`
  display: flex;
  flex: 1;
  margin: 0 auto;
  max-width: 1550px;
`;

import { TileDiv } from './styles/CommonStyle';

const ContactDiv = styled(TileDiv)`
  flex-direction: column;
  padding: 5px;
  box-sizing: border-box;
`;
```

css ì‚½ì…

```jsx
export const AutoLayoutStyle = css`
  width: 100%;
  height: 100%;
`;

export const DirectSizeStyle = ({ width, height }) => css`
  width: ${width};
  min-width: ${width};
  height: ${height};
  min-height: ${height};
`;

import { AutoLayoutStyle } from './styles/CommonStyle';
const IntroduceDiv = styled.div`
  ${AutoLayoutStyle};
  ${DirectSizeStyle({ width: '200px', height: '200px' })};
`;

const CompItemContentTitleDiv = styled.div`
  display: flex;
  color: #008073;
  font-size: 20px;
  font-weight: 600;

  ${css`
    > span {
      cursor: pointer;
      height: 12px;
      padding-bottom: 10px;
      &:hover {
        border-bottom: 2px solid #008073;
      }
    }
  `}
`;
```

ë°ì´í„° ì‚½ì…(íŠ¹íˆ, ì´ë¯¸ì§€)

```jsx
import HomeImg from '../../imgs/bg-home.jpg';
const HomeBody = styled.div`
  background: url(${HomeImg}) no-repeat center center;
`;
```

props ì „ë‹¬ ë° ë¶„ê¸°ì²˜ë¦¬

```jsx
const SideBarDiv = styled.div`
  ${AutoLayoutStyle};
  max-width: ${props => (props.isSidebarOpen ? '170px' : '0px')};
  max-width: ${props => (props.isSidebarOpen ? '170px' : '0px')};
`;

function SideBar({ isSidebarOpen }) {
  return <SideBarDiv isSidebarOpen={isSidebarOpen} />;
}
```

attribute ì²˜ë¦¬

```jsx
import circle from '../../../imgs/circle.svg';
export const ListItemCircleImg = styled.img.attrs({
  src: circle,
  alt: '',
})`
  margin-right: 5px;
`;

const PasswordInput = styled.input.attrs(props => ({
  // Every <PasswordInput /> should be type="password"
  type: 'password',
}))``;
```

ì „ì—­ìŠ¤íƒ€ì¼ ì²˜ë¦¬(createGlobalStyle)

```jsx
import React from "react";
    import styled, { createGlobalStyle } from "styled-components";

    const GlobalStyle = createGlobalStyle`
			*, *::before, *::after {
			    box-sizing: border-box;
			  }
      body {
        margin: 50px;
        padding: 50px;
        background-color: black;
      }
    `;
    ...
    const App = () => {
      return (
        <Container>
          <GlobalStyle />
          <Button>ë²„íŠ¼1</Button>
          <Button color="red">ë²„íŠ¼2</Button>
        </Container>
      );
    };

import theme from '/src/styles/theme'

return (
    <ThemeProvider theme={theme}>
      <GlobalStyle />
      <Header switchTheme={switchTheme} />
      <Container currentThemeText={currentThemeText} />
    </ThemeProvider>
  );

const GlobalStyle = createGlobalStyle`
    ${reset};
    ${customReset};

    html {
      font-size: 62.5%; //1rem = 10px;
    }

    ${({ theme }) => {
      return css`
        body {
          font-family: ${theme.fonts.family.base};
          font-weight: ${theme.fonts.weight.normal};
          font-size: ${theme.fonts.size.base};
        }
      `;
    }}
`;
```

animations

```jsx
// Create the keyframes
const rotate = keyframes`
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
`;

// Here we create a component that will rotate everything we pass in over two seconds
const Rotate = styled.div`
  display: inline-block;
  animation: ${rotate} 2s linear infinite;
  padding: 2rem 1rem;
  font-size: 1.2rem;
`;

render(<Rotate>&lt; ğŸ’…ğŸ¾ &gt;</Rotate>);
```

SCSS import ê°€ëŠ¥

```jsx
import { createGlobalStyle, css } from 'styled-components';
import reset from 'styled-reset';
import customReset from './customReset.scss'; // waffleì— scss ë„ì…ê°€ëŠ¥í•œì§€ í™•ì¸??

const GlobalStyle = createGlobalStyle`
    ${reset};
    ${customReset};

    html {
      font-size: 62.5%; //1rem = 10px;
    }

    ${({ theme }) => {
      return css`
        body {
          font-family: ${theme.fonts.family.base};
          font-weight: ${theme.fonts.weight.normal};
          font-size: ${theme.fonts.size.base};
        }
      `;
    }}
`;

export default GlobalStyle;
```

</details>

# Emotion

<details>
  <summary>Emotion</summary>

![Untitled](./images/31/Untitled2.png)

- styled-components ì™€ ë¹„ìŠ·í•œ CSS-in-JS ë¼ì´ë¸ŒëŸ¬ë¦¬
- material-ui(v5) - emotion ì ìš©
  - [https://hoontae24.github.io/19](https://hoontae24.github.io/19)
- [https://www.howdy-mj.me/css/emotion.js-intro/](https://www.howdy-mj.me/css/emotion.js-intro/)
- [https://emotion.sh/docs/introduction](https://emotion.sh/docs/introduction)
- [https://hoontae24.github.io/19](https://hoontae24.github.io/19)

</details>

# **ì°¸ê³ í˜ì´ì§€**

- [https://blog.eunsukim.me/posts/introducing-css-in-js](https://blog.eunsukim.me/posts/introducing-css-in-js)
- [http://blog.vjeux.com/2014/javascript/react-css-in-js-nationjs.html](http://blog.vjeux.com/2014/javascript/react-css-in-js-nationjs.html)
- [https://speakerdeck.com/vjeux/react-css-in-js?slide=23](https://speakerdeck.com/vjeux/react-css-in-js?slide=23)
- [https://so-so.dev/web/css-in-js-whats-the-defference/](https://so-so.dev/web/css-in-js-whats-the-defference/)
