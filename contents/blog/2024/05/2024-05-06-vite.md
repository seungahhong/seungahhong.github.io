---
layout: post
title: vite
date: 2024-05-06
published: 2024-05-06
category: ê°œë°œ
tags: ['bundler']
comments: true
thumbnail: './assets/06/thumbnail.png'
github: 'https://github.com/seungahhong/seungahhong.github.io'
---

# Viteë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ 

## ê¸°ì¡´ ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ ë¬¸ì œì 

- ë¸Œë¼ìš°ì €ì—ì„œ Native ESM ë°©ì‹ì„ ì§€ì›í•˜ê¸° ì „ê¹Œì§€ëŠ” Javascript ëª¨ë“ˆí™”ë¥¼ ë¸Œë¼ìš°ì € ë ˆë²¨ì—ì„œ ì§„í–‰í•  ìˆ˜ ì—†ì—ˆê³ , í•´ë‹¹ ì†ŒìŠ¤ ëª¨ë“ˆì„ ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›í•˜ê¸° ìœ„í•´ì„œ require/IIFE/import,exporë¥¼ í†µí•œ ëª¨ë“ˆí™” ë¬¸ë²•ì„ ì´ìš©í•˜ì—¬ì„œ ì—¬ëŸ¬ê°œì˜ íŒŒì¼ë¡œ í•©ì³ì£¼ê±°ë‚˜ ì˜ë¯¸ ìˆëŠ” ë‹¨ìœ„ë¡œ ë¬¶ì–´ì£¼ëŠ” ê¸°ëŠ¥ì„ ë²ˆë“¤ë§ì´ë¼ê³  í•˜ë©°, í˜„ì¬ëŠ” [Webpack](https://webpack.js.org/),Â [Rollup](https://rollupjs.org/)Â ê·¸ë¦¬ê³ Â [Parcel](https://parceljs.org/)ì„ ë„êµ¬ë“¤ì´ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì ì  ë” ë°œì „í•¨ì— ë”°ë¼ì„œ JS ë„êµ¬ë“¤ì˜ ì„±ëŠ¥ ë³‘ëª© í˜„ìƒì´ ë°œìƒ, HMR ì‚¬ìš©í•˜ë”ë¼ë„ ë³€ê²½ëœ íŒŒì¼ ì ìš© ì‹œ ìˆ˜ì´ˆê°€ ê±¸ë ¤ì„œ ê°œë°œì ìƒì‚°ì„±ì„ ë–¨ì–´ëœ¨ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤.
- ESM(ECMAScript Modules)

  - ESMì€ ëª¨ë“ˆí™” ë¬¸ë²•ì¸ import, exportë¥¼ ë³„ë„ì˜ ë„êµ¬ ì—†ì´ ë¸Œë¼ìš°ì € ìì²´ì—ì„œ ì†Œí™”í•´ ë‚¼ ìˆ˜ ìˆëŠ” ëª¨ë“ˆ ë°©ì‹ì„ ì˜ë¯¸í•œë‹¤. ë§Œì•½ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì›¹íŒ©ê³¼ ê°™ì€ ë²ˆë“¤ëŸ¬ ì—†ì´ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

  ```tsx
  // app.js
  import { sum } from 'test.js'
  console.log(sum(1,2));

  <script src="app.js></script>
  ```

  ![Untitled](./assets/06/Untitled.png)
  ì˜ˆì „ì—ëŠ” ë¸Œë¼ìš°ì €ê°€ importì™€ exportë¥¼ í•´ì„í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ì—†ì—ˆì§€ë§Œ ì´ì œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì†ì„±ì„ ì¶”ê°€í•˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ importì™€ exportë¥¼ ì†Œí™”í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

  ```tsx
  <script type="module" src="app.mjs></script>
  ```

## Vite íŠ¹ì§•

- ì½œë“œ ìŠ¤íƒ€íŠ¸ ë°©ì‹ì˜ ê°œë°œ ì„œë²„ êµ¬ë™ì— ëŒ€í•œ ì„±ëŠ¥ ê°œì„ 
  ![Untitled](./assets/06/Untitled1.png)

  - Dependencies: node_modulesdì™€ ê°™ì´ ë‚´ìš©ì´ ë°”ë€Œì§€ ì•ŠëŠ” ì†ŒìŠ¤ì½”ë“œì— ëŒ€í•´ì„œ esbuild ì´ìš©í•œ ì‚¬ì „ ë²ˆë“¤ë§ ê¸°ëŠ¥ ì œê³µ

    - esbuildëŠ” webpack, parcelê³¼ ê°™ì€ ê¸°ì¡´ì˜ ë²ˆë“¤ëŸ¬ ëŒ€ë¹„ 10-100ë°° ë¹ ë¥¸ ì†ë„ë¥¼ ì œê³µ
    - esbuild ë¡œ node_modules ì˜ ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ ì‚¬ì „ ë²ˆë“¤ë§í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ serving í•˜ê³  ìºì‹œ

      ```tsx
      // Dependencies package import í•  ê²½ìš°
      import dayjs from 'dayjs';

      // vite esm ì§€ì›ì„ ìœ„í•œ ë³€í™˜/ìºì‹±
      /node_modules/.vite/deps/dayjs.js?v=b09621d8
      ```

  - Source code: Native ESM ë°©ì‹ì„ ì ìš©í•´ì„œ ë¸Œë¼ìš°ì €ê°€ ëª¨ë“ˆì„ ì§ì ‘ ê°€ì ¸ì˜¤ê³  ë³€í™˜ ë° ì œê³µí•˜ë„ë¡ ì²˜ë¦¬
    ![Untitled](./assets/06/Untitled2.png)

- HMR ì„±ëŠ¥ ê°œì„ 
  ê¸°ì¡´ ë²ˆë“¤ëŸ¬ ê¸°ë°˜ì—ì„œëŠ” ì†ŒìŠ¤ ì½”ë“œ ë³€ê²½ ì‹œ ë‹¤ì‹œ ë²ˆë“¤ë§ ê³¼ì •ì„ ë‹¤ì‹œ ìˆ˜í–‰í•˜ë‹¤ë³´ë‹ˆ ì„±ëŠ¥ì´ ëŠë ¤ì§€ëŠ” ì´ìŠˆë¥¼ Native ESM ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë³€ê²½ëœ ëª¨ë“ˆë§Œ êµì²´í•´ì„œ ì„±ëŠ¥ ê°œì„ 
  HTTP í—¤ë”ë¥¼ í™œìš©í•˜ì—¬ í˜ì´ì§€ ë¡œë“œ ì†ë„ ê°œì„ (ìš”ì²­ íšŸìˆ˜ ìµœì†Œí™”)
  - 304 Not Modified: í´ë¼ì´ì–¸íŠ¸ ìºì‹œ ì‚¬ìš©
  - Cache-Control: max-age=31536000, immutalble ì´ìš©í•œ ìºì‹œ ì‚¬ìš©
- í”„ë¡œë•ì…˜ í™˜ê²½ Rollup ì‚¬ìš©
  - ê°€ì¥ ë¹ ë¥¸ ì„±ëŠ¥ì„ ìë‘í•˜ëŠ” esbuildì´ì§€ë§Œ ì•„ì‰¬ìš´ ìƒíƒœê³„ì™€ ë¸Œë¼ìš°ì €ìš© ë²ˆë“¤ë§ì—ì„œëŠ” ì•ˆì •ì„±ì´ ë–¨ì–´ì§„ë‹¤ëŠ” í‰ê°€ê°€ ìˆì–´ì„œ viteì—ì„œëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ Rollup ë²ˆë“¤ëŸ¬ë¥¼ ì‚¬ìš©(íŠ¸ë¦¬ ì…°ì´í‚¹, ì§€ì—°ë¡œë”©, íŒŒì¼ ë¶„í™œ ë“± ì„±ëŠ¥ ì´ì  ì œê³µ)
  - Rollupì€ v4ì—ì„œ íŒŒì„œë¥¼ SWC ì „í™˜ â†’ Rust í¬íŒ…ì¸ Rolldown ë§Œë“œëŠ” ì‘ì—…ì„ ì§„í–‰ ì¤‘ì´ë©° ê°œë°œì´ ì™„ë£Œëœë‹¤ë©´ esbuildë¥¼ ëª¨ë‘ ëŒ€ì²´ ê°€ëŠ¥(ê°œë°œ/ë¹Œë“œ ì‚¬ì´ì— ë¶ˆì´ì¹˜ ì œê±° ëª©í‘œ)

# CRA to Vite Migration

### **Setting the Stage with Vite Installation**

- @vitejs/plugin-react : @vitejs/plugin-reactëŠ” Viteì—ì„œ Reactë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ êµ¬ì„±ì„ ì¶”ê°€í•˜ì—¬ React ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹ ë¥¸ ê°œë°œ ë° ë²ˆë“¤ë§ì„ ì§€ì›
- vite-tsconfig-paths : tsconfig.json íŒŒì¼ì— ì„¤ì •ëœ ê²½ë¡œ ë³„ì¹­ì„ Viteì—ì„œë„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›. vite-tsconfig-pathsë¥¼ ì‚¬ìš©í•˜ë©´ TypeScript ì„¤ì •ì— ì •ì˜ëœ ê²½ë¡œ ë³„ì¹­ì´ Viteì—ì„œë„ ì¸ì‹ë˜ì–´ ëª¨ë“ˆ ê²½ë¡œë¥¼ í•´ì„í•  ë•Œ ì‚¬ìš© ê°€ëŠ¥
- @svgr/rollup : SVGRì„ Rollup ë²ˆë“¤ëŸ¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›. SVGRì€ SVG íŒŒì¼ì„ React ì»´í¬ë„ŒíŠ¸ë¡œ ë³€í™˜í•˜ì—¬, JSXë¡œ SVGë¥¼ ì‰½ê²Œ ì¡°ì‘í•˜ê³  ìŠ¤íƒ€ì¼ë§. @svgr/rollupì€ Rollupì˜ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œì„œ SVGRì„ í”„ë¡œì íŠ¸ì— í†µí•©í•˜ì—¬ SVG íŒŒì¼ì„ React ì»´í¬ë„ŒíŠ¸ë¡œ ìë™ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë„ë¡ ì§€ì›

```tsx
npm install vite @vitejs/plugin-react vite-tsconfig-paths @svgr/rollup vite-plugin-minify

npm uninstall react-scripts
```

### **Updating package.json for Vite Commands**

```tsx
"scripts": {
  "start": "vite",
  "build": "vite build",
  "preview": "vite preview"
},
```

### **Renaming File Extensions to .jsx or .tsx**

```tsx
mv src/App.js src/App.jsx
mv src/index.js src/index.jsx
```

### **Crafting the Vite Configuration**

- define: { global: '{}' }
  - Node.js í™˜ê²½ì—ì„œ ì‚¬ìš©ë˜ëŠ” global ê°ì²´ë¥¼ ì›¹ í™˜ê²½ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ í˜¸í™˜ì„±ì„ ë³´ì¥í•˜ê³ , ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ ëª¨ë“ˆì˜ ì›í™œí•œ ì‚¬ìš©ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ê²ƒ

```tsx
// vite.config.js
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import viteTsconfigPaths from 'vite-tsconfig-paths';
import svgr from '@svgr/rollup';

export default defineConfig(() => {
  return {
    build: {
      outDir: 'build', // build í´ë”ëª… ë³€ê²½(ê¸°ë³¸ dist)
    },
    define: {
			global: '{}',  // ê¸€ë¡œë²Œ ê°ì²´ë¥¼ ë¹ˆ ê°ì²´ë¡œ ëŒ€ì²´
		},vi
    plugins: [react(), viteTsconfigPaths(), svgr()],
    server: {
        // this ensures that the browser opens upon server start
        open: true,
        // this sets a default port to 3000
        port: 3000,
    },
  };
});
```

### **Create aÂ ViteÂ Types File Reference**

For client side code,Â [Vite provides the type definitions](https://vitejs.dev/guide/env-and-mode.html#intellisense-for-typescript)Â inÂ [`vite/client.d.ts`](https://github.com/vitejs/vite/blob/main/packages/vite/client.d.ts).

- create file src/vite-env.d.ts

```tsx
/// <reference types="vite/client" />
```

### Move the index.html File

```tsx
mv public/index.html .
```

### **Rehousing the index.html File**

- RemoveÂ %PUBLIC_URL%

```tsx
<script type="module" src="/src/index.jsx"></script> -
  <link rel="icon" type="image/svg+xml" href="%PUBLIC_URL%/favicon.svg" /> +
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />;
```

### **Add module script to the bottom of the body tag**

Vite treatsÂ `index.html`Â [as source code and part of the module graph](https://vitejs.dev/guide/#index-html-and-project-root)

```tsx
<body>
  {/* others here */}
  <script type="module" src="/src/index.tsx"></script>
</body>
```

### Update tsconfig.json

```tsx
{
    "compilerOptions": {
        "lib": ["dom", "dom.iterable", "esnext"],
        "target": "ESNext",
         "types": ["vite/client", "react", "react-dom", "node"], // ì¶”ê°€
         "isolatedModules": true, // ì¶”ê°€
    },
 }
```

### **ChangeEnv Variables and Modes**

```tsx
// .env Files
.env                # loaded in all cases
.env.local          # loaded in all cases, ignored by git
.env.[mode]         # only loaded in specified mode
.env.[mode].local   # only loaded in specified mode, ignored by git

// HTML Env Replacement(CRA ë™ì¼í•œ ê¸°ëŠ¥ ì œê³µ)
<h1>Vite is running in %MODE%</h1>
<p>Using data from %VITE_API_URL%</p>

// Modes
# .env.staging
VITE_APP_TITLE=My App

// command mode option flag
vite build --mode staging
```

### **globalÂ is not defined error**

```tsx
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  // ...
  define: {
    // here is the main update
    global: 'globalThis',
  },
});
```

### Update process.env.REACT_APP

```tsx
- process.env.REACT_APP_VARIABLE
+ import.meta.env.VITE_VARIABLE(ì´ë¦„ ë³€ê²½ì€ ì„ íƒ)
```

### Replace REACT*APP* with VITE\_

```tsx
- REACT_APP_API_BASE
+ VITE_API_BASE(ì´ë¦„ ë³€ê²½ì€ ì„ íƒ)
```

### Modify Jest Configration

- **Install Jest and TypeScript-related Dependencies**

  ```tsx
  yarn add -D jest @types/jest ts-jest jest-environment-jsdom

  OR

  npm install --save-dev jest @types/jest ts-jest jest-environment-jsdom
  ```

- **Update Jest Config**
  ```tsx
  // package.json
  "jest": {
    "preset": "ts-jest/presets/js-with-ts",
    "testEnvironment": "jest-environment-jsdom",
    "moduleNameMapper": {
      "\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$": "<rootDir>/__mocks__/fileMock.js",
      "\\.(css|less)$": "<rootDir>/__mocks__/styleMock.js"
    },
    "modulePaths": [
      // you can update this to match your application setup
      "<rootDir>/src"
    ],
  },
  ```
- **Add theÂ **mocks**Â Directory to the Root of Your Project**

  ```tsx
  // __mocks__//styleMock.js
  module.exports = {};

  // __mocks__//fileMock.js
  module.exports = 'test-file-stub';
  ```

- **Update theÂ package.jsonÂ Scripts**

  ```tsx
  // Before
  "scripts": {
      "test": "react-app-rewired test"
  }

  // After
  "scripts": {
      "test": "jest test"
  }
  ```

- **TroubleShooting**
  **unexpected Warning:Â ReactDOMTestUtils.actÂ is deprecated in favor ofÂ React.act.**
  [https://github.com/facebook/react/issues/29000](https://github.com/facebook/react/issues/29000)

  ```tsx
  // upgrade @testing-library/react (>=v15.0.6)
  "@testing-library/react": "^15.0.6",
  ```

  **Property 'toBeInTheDocument' does not exist on type 'JestMatchers<HTMLElement>'**

  ```tsx
  // create ./jest-setup.ts
  import '@testing-library/jest-dom';

  // package.json
  "testEnvironment": "jest-environment-jsdom" // ì¶”ê°€
  ```

### Storybook for Vite

- Setup

  ```tsx
  // install
  yarn add --dev @storybook/builder-vite

  // include the builder
  //// .storybook/main.ts
  export default {
    stories: ['../src/**/*.mdx', '../stories/**/*.stories.@(js|jsx|mjs|ts|tsx)'],
    addons: ['@storybook/addon-links', '@storybook/addon-essentials'],
    core: {
      builder: '@storybook/builder-vite', // ğŸ‘ˆ The builder enabled here.
    },
    async viteFinal(config, { configType }) { // configuration
      // Merge custom configuration into the default config
      const { mergeConfig } = await import('vite');

      if (configType === 'DEVELOPMENT') {
        // Your development configuration goes here
      }
      if (configType === 'PRODUCTION') {
        // Your production configuration goes here.
      }

      return mergeConfig(config, {
        // Add dependencies to pre-optimization
        optimizeDeps: {
          include: ['storybook-dark-mode'],
        },
      });
    },
  };
  ```

### import.meta.glob dynamic load

Viteì˜ import.meta.globì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì•„ì´ì½˜ì„ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜´

```tsx
const icons = import.meta.glob('./*Icon.tsx');

const iconComponentPath = './aIcon.tsx';

const Icon =
  icons && icons[iconComponentPath as string]
    ? lazy(
        () =>
          icons[iconComponentPath as string]() as Promise<{
            default: ComponentType;
          }>,
      )
    : null;
```

### sass-resources-loader â†’ preprocessorOptions.sass

ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ìŠ¤íƒ€ì¼ì„ ì „ì—­ì ìœ¼ë¡œ ì ìš©í•  ë•Œ ì‚¬ìš©í•˜ëŠ” sass-resources-loaderë¥¼ viteì—ì„œëŠ” preprocessorOptions.sassë¡œ ëŒ€ì²´ê°€ ê°€ëŠ¥

```tsx
// CRA
rules: [
  {
    test: /\.scss$/,
    use: [
      {
        loader: 'sass-resources-loader',
        options: {
          resources: [
            path.resolve(__dirname, './index.scss'),
          ],
        },
      },
    ],
    include: path.resolve(__dirname, './src'),
    exclude: /node_modules/,
  },
]

// vite.config.js
css: {
  preprocessorOptions: {
    scss: {
      // Next line will prepend the import in all you scss files as you did with your vite.config.js file
      additionalData: `
        @use './index.scss' as *;
      `,
    },
  },
},
```

### vite-plugin-html(CRA CJS ëŒ€ì²´, Html Minify)

CRA ë‚´ë¶€ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì„ VITEì—ì„œëŠ” vite-plugin-html ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ì„œ ì§€ì›ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```tsx
// CRA
<!DOCTYPE html>
<html lang="ko">

<head>
  <title>í…ŒìŠ¤íŠ¸/title>
  %CJS%
</head>

<body>
  <noscript>
    You need to enable JavaScript to run this app.
  </noscript>
  <div id="root"></div>
</body>
</html>

// VITE
<!DOCTYPE html>
<html lang="ko">

<head>
  <title>í…ŒìŠ¤íŠ¸/title>
  <%= CJS %> // ë¬¸ìë¡œ ì‚½ì…
  <%- CJS %> // RAW ë°ì´í„° ê·¸ëŒ€ë¡œ ì‚½ì…
</head>

<body>
  <noscript>
    You need to enable JavaScript to run this app.
  </noscript>
  <div id="root"></div>
</body>
</html>

//// vite.config.js
import createHtmlPlugin from 'vite-plugin-html';

createHtmlPlugin({
  minify: true, // html minify
  inject: { // CJS ëŒ€ì²´
    data: {
      CJS: 'TEST',
    },
  },
}),

```

### server(proxy, outside file)

CRA proxy ì„¤ì •ì„ VITE proxyë¡œ ëŒ€ì²´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

VITE í™˜ê²½ ì™¸ì— ì™¸ë¶€ í´ë”/íŒŒì¼ ì ‘ê·¼ ì‹œ fs.allow ê°ì²´ë¡œ ì¶”ê°€ ì‹œ dev serverì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥

```tsx
// CRA
//// setupProxy.js
const { createProxyMiddleware } = require("http-proxy-middleware");

module.exports = function setupProxy(app) {
  app.use(createProxyMiddleware(['/test'], {
    changeOrigin: true,
	  logLevel: 'debug',
	  autoRewrite: true,
    target: 'http://www.test.kr',
    onProxyRes: (proxyRes) => {
      console.log(proxyRes);
    }),
    onProxyReq: (proxyReq) => {
      proxyReq.setHeader('origin', 'http://www.test.kr');
    },
  }));

//// vite.config.js
server: {
	proxy: {
		fs: {
	    // í—ˆìš©í•  ë””ë ‰í„°ë¦¬ ì¶”ê°€ (ì—¬ê¸°ì— ì™¸ë¶€ íŒŒì¼ ê²½ë¡œë¥¼ ì¶”ê°€)
	    allow: [
	      '../../../outside',
	      '/'
	    ],
	  },
		'/test': {
	    changeOrigin: true,
		  logLevel: 'debug',
		  autoRewrite: true,
	    target: 'http://www.test.kr',
	    configure: (proxy) => {
	      proxy.on('proxyRes', (proxyRes) => {
	        console.log(proxyRes);
	      }),
	      proxy.on('proxyReq', (proxyReq) => {
	        proxyReq.setHeader('origin', 'http://www.test.kr');
	      });
	    },
	  },
	},
},
```

### support svg

CRA í™˜ê²½ì—ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ(react-scripts) SVG íŒŒì¼ì„ import ì‹œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€í™˜í•´ì£¼ì§€ë§Œ, VITEì—ì„œëŠ” ì™¸ë¶€ ë¼ì´ë¸Œë¦¬ëŸ¬ë¥¼ ì‚¬ìš©í•´ì„œ ë³€ê²½ì„ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

@svgr/rollup: Rollup ë²ˆë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•  ë•Œ SVG íŒŒì¼ì„ React ì»´í¬ë„ŒíŠ¸ë¡œ ë³€í™˜í•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸

```tsx
// src/App.js
import React from 'react';
import { ReactComponent as Icon } from './icon.svg'; // SVG íŒŒì¼ì„ React ì»´í¬ë„ŒíŠ¸ë¡œ ê°€ì ¸ì˜¤ê¸°

function App() {
  return (
    <div>
      <h1>Hello, SVG!</h1>
      <Icon width={50} height={50} fill="red" /> {/* SVG ì†ì„± ì¡°ì • */}
    </div>
  );
}

export default App;

// vite.config.js
import svgr from '@svgr/rollup';
plugins: [
  svgr(),
],
```

## ê²°ê³¼

ë¹Œë“œ ì„±ëŠ¥: **6.16s â†’ 2.49s ( 3.67s ë¹ ë¦„ )**

![Untitled](./assets/06/Untitled3.png)

![Untitled](./assets/06/Untitled4.png)

Dev Server êµ¬ë™: **167ms â†’ ì—„ì²­ ë¹ ë¦„^^**

![Untitled](./assets/06/Untitled5.png)

# ì°¸ê³ í˜ì´ì§€

- [How to Migrate from create-react-app to Vite? Â· CoreUI](https://coreui.io/blog/how-to-migrate-create-react-app-to-vite/)

- [How to Migrate from create-react-app to Vite using Jest and Browserslist](https://www.freecodecamp.org/news/how-to-migrate-from-create-react-app-to-vite/)

- [[vite] í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¥¼ ìœ„í•œ Vite 101](https://nyagm.tistory.com/280)

- [[JS] ë¹„íŠ¸(Vite)ë€? - ë¹„íŠ¸ ì•Œì•„ë³´ê¸°](https://khys.tistory.com/31)

- [Webpack â†’ Vite: ë²ˆë“¤ëŸ¬ ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ì•¼ê¸°](https://engineering.ab180.co/stories/webpack-to-vite)

- [[vite] í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¥¼ ìœ„í•œ Vite 101](https://nyagm.tistory.com/280)
